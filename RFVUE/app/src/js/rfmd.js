/*! JointJS v2.0.1 (2017-11-15) - JavaScript diagramming library


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).PerfectScrollbar=e()}(this,function(){"use strict";var t=Math.abs,e=Math.floor;function n(t){return getComputedStyle(t)}function r(t,e){for(var n in e){var r=e[n];"number"==typeof r&&(r+="px"),t.style[n]=r}return t}function i(t){var e=document.createElement("div");return e.className=t,e}function o(t,e){if(!A)throw new Error("No element matching method supported");return A.call(t,e)}function a(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){return Array.prototype.filter.call(t.children,function(t){return o(t,e)})}function u(t,e){var n=t.element.classList,r=C.state.scrolling(e);n.contains(r)?clearTimeout(y[e]):n.add(r)}function l(t,e){y[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(C.state.scrolling(e))},t.settings.scrollingThreshold)}function c(t,e){u(t,e),l(t,e)}function h(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function g(t,e,n,r,i){var o;if(void 0===r&&(r=!0),void 0===i&&(i=!1),"top"===e)o=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(t,e,n,r,i){var o=n[0],a=n[1],s=n[2],u=n[3],l=n[4],g=n[5];void 0===r&&(r=!0),void 0===i&&(i=!1);var f=t.element;t.reach[u]=null,1>f[s]&&(t.reach[u]="start"),f[s]>t[o]-t[a]-1&&(t.reach[u]="end"),e&&(f.dispatchEvent(h("ps-scroll-"+u)),0>e?f.dispatchEvent(h("ps-scroll-"+l)):0<e&&f.dispatchEvent(h("ps-scroll-"+g)),r&&c(t,u)),t.reach[u]&&(e||i)&&f.dispatchEvent(h("ps-"+u+"-reach-"+t.reach[u]))}(t,n,o,r,i)}function f(t){return parseInt(t,10)||0}function d(t){return o(t,"input,[contenteditable]")||o(t,"select,[contenteditable]")||o(t,"textarea,[contenteditable]")||o(t,"button,[contenteditable]")}function p(t){var n=Math.round,r=t.element,i=e(r.scrollTop),o=r.getBoundingClientRect();t.containerWidth=n(o.width),t.containerHeight=n(o.height),t.contentWidth=r.scrollWidth,t.contentHeight=r.scrollHeight,r.contains(t.scrollbarXRail)||(s(r,C.element.rail("x")).forEach(function(t){return a(t)}),r.appendChild(t.scrollbarXRail)),r.contains(t.scrollbarYRail)||(s(r,C.element.rail("y")).forEach(function(t){return a(t)}),r.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=I(t,f(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=f((t.negativeScrollAdjustment+r.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=I(t,f(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=f(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),v(r,t),t.scrollbarXActive?r.classList.add(C.state.active("x")):(r.classList.remove(C.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,r.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?r.classList.add(C.state.active("y")):(r.classList.remove(C.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,r.scrollTop=0)}function I(t,e){var n=Math.min,r=Math.max;return t.settings.minScrollbarLength&&(e=r(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=n(e,t.settings.maxScrollbarLength)),e}function v(t,n){var i={width:n.railXWidth},o=e(t.scrollTop);i.left=n.isRtl?n.negativeScrollAdjustment+t.scrollLeft+n.containerWidth-n.contentWidth:t.scrollLeft,n.isScrollbarXUsingBottom?i.bottom=n.scrollbarXBottom-o:i.top=n.scrollbarXTop+o,r(n.scrollbarXRail,i);var a={top:o,height:n.railYHeight};n.isScrollbarYUsingRight?n.isRtl?a.right=n.contentWidth-(n.negativeScrollAdjustment+t.scrollLeft)-n.scrollbarYRight-n.scrollbarYOuterWidth-9:a.right=n.scrollbarYRight-t.scrollLeft:n.isRtl?a.left=n.negativeScrollAdjustment+t.scrollLeft+2*n.containerWidth-n.contentWidth-n.scrollbarYLeft-n.scrollbarYOuterWidth:a.left=n.scrollbarYLeft+t.scrollLeft,r(n.scrollbarYRail,a),r(n.scrollbarX,{left:n.scrollbarXLeft,width:n.scrollbarXWidth-n.railBorderXWidth}),r(n.scrollbarY,{top:n.scrollbarYTop,height:n.scrollbarYHeight-n.railBorderYWidth})}function m(t,e){function n(e){e.touches&&e.touches[0]&&(e[s]=e.touches[0].pageY),v[f]=m+y*(e[s]-A),u(t,d),p(t),e.stopPropagation(),e.type.startsWith("touch")&&1<e.changedTouches.length&&e.preventDefault()}function r(){l(t,d),t[I].classList.remove(C.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",n)}function i(e,i){m=v[f],i&&e.touches&&(e[s]=e.touches[0].pageY),A=e[s],y=(t[a]-t[o])/(t[c]-t[g]),i?t.event.bind(t.ownerDocument,"touchmove",n):(t.event.bind(t.ownerDocument,"mousemove",n),t.event.once(t.ownerDocument,"mouseup",r),e.preventDefault()),t[I].classList.add(C.state.clicking),e.stopPropagation()}var o=e[0],a=e[1],s=e[2],c=e[3],h=e[4],g=e[5],f=e[6],d=e[7],I=e[8],v=t.element,m=null,A=null,y=null;t.event.bind(t[h],"mousedown",function(t){i(t)}),t.event.bind(t[h],"touchstart",function(t){i(t,!0)})}var A="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),C={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},y={x:null,y:null},b=function(t){this.element=t,this.handlers={}},w={isEmpty:{configurable:!0}};b.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},b.prototype.unbind=function(t,e){var n=this;this.handlers[t]=this.handlers[t].filter(function(r){return!(!e||r===e)||(n.element.removeEventListener(t,r,!1),!1)})},b.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},w.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return 0===t.handlers[e].length})},Object.defineProperties(b.prototype,w);var N=function(){this.eventElements=[]};N.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return e||(e=new b(t),this.eventElements.push(e)),e},N.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},N.prototype.unbind=function(t,e,n){var r=this.eventElement(t);r.unbind(e,n),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},N.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]},N.prototype.once=function(t,e,n){var r=this.eventElement(t),i=function(t){r.unbind(e,i),n(t)};r.bind(e,i)};var x={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&0<window.navigator.maxTouchPoints||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},M={"click-rail":function(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top>t.scrollbarYTop?1:-1;t.element.scrollTop+=n*t.containerHeight,p(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=n*t.containerWidth,p(t),e.stopPropagation()})},"drag-thumb":function(t){m(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),m(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(t){var n=t.element,r=function(){return o(n,":hover")},i=function(){return o(t.scrollbarX,":focus")||o(t.scrollbarY,":focus")};t.event.bind(t.ownerDocument,"keydown",function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)&&(r()||i())){var a=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(a){if("IFRAME"===a.tagName)a=a.contentDocument.activeElement;else for(;a.shadowRoot;)a=a.shadowRoot.activeElement;if(d(a))return}var s=0,u=0;switch(o.which){case 37:s=o.metaKey?-t.contentWidth:o.altKey?-t.containerWidth:-30;break;case 38:u=o.metaKey?t.contentHeight:o.altKey?t.containerHeight:30;break;case 39:s=o.metaKey?t.contentWidth:o.altKey?t.containerWidth:30;break;case 40:u=o.metaKey?-t.contentHeight:o.altKey?-t.containerHeight:-30;break;case 32:u=o.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:u=t.containerHeight;break;case 34:u=-t.containerHeight;break;case 36:u=t.contentHeight;break;case 35:u=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==s||t.settings.suppressScrollY&&0!==u||(n.scrollTop-=u,n.scrollLeft+=s,p(t),function(r,i){var o=e(n.scrollTop);if(0===r){if(!t.scrollbarYActive)return!1;if(0===o&&0<i||o>=t.contentHeight-t.containerHeight&&0>i)return!t.settings.wheelPropagation}var a=n.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===a&&0>r||a>=t.contentWidth-t.containerWidth&&0<r)return!t.settings.wheelPropagation}return!0}(s,u)&&o.preventDefault())}})},wheel:function(r){function i(t,e,r){if(!x.isWebKit&&a.querySelector("select:focus"))return!0;if(!a.contains(t))return!1;for(var i=t;i&&i!==a;){if(i.classList.contains(C.element.consuming))return!0;var o=n(i);if(r&&o.overflowY.match(/(scroll|auto)/)){var s=i.scrollHeight-i.clientHeight;if(0<s&&(0<i.scrollTop&&0>r||i.scrollTop<s&&0<r))return!0}if(e&&o.overflowX.match(/(scroll|auto)/)){var u=i.scrollWidth-i.clientWidth;if(0<u&&(0<i.scrollLeft&&0>e||i.scrollLeft<u&&0<e))return!0}i=i.parentNode}return!1}function o(n){var o=function(t){var e=t.deltaX,n=-1*t.deltaY;return(void 0===e||void 0===n)&&(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!=e&&n!=n&&(e=0,n=t.wheelDelta),t.shiftKey?[-n,-e]:[e,n]}(n),s=o[0],u=o[1];if(!i(n.target,s,u)){var l=!1;r.settings.useBothWheelAxes?r.scrollbarYActive&&!r.scrollbarXActive?(u?a.scrollTop-=u*r.settings.wheelSpeed:a.scrollTop+=s*r.settings.wheelSpeed,l=!0):r.scrollbarXActive&&!r.scrollbarYActive&&(s?a.scrollLeft+=s*r.settings.wheelSpeed:a.scrollLeft-=u*r.settings.wheelSpeed,l=!0):(a.scrollTop-=u*r.settings.wheelSpeed,a.scrollLeft+=s*r.settings.wheelSpeed),p(r),(l=l||function(n,i){var o=e(a.scrollTop),s=0===a.scrollTop,u=o+a.offsetHeight===a.scrollHeight,l=0===a.scrollLeft,c=a.scrollLeft+a.offsetWidth===a.scrollWidth;return!(t(i)>t(n)?s||u:l||c)||!r.settings.wheelPropagation}(s,u))&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}var a=r.element;void 0===window.onwheel?void 0!==window.onmousewheel&&r.event.bind(a,"mousewheel",o):r.event.bind(a,"wheel",o)},touch:function(r){function i(n,i){var o=e(g.scrollTop),a=g.scrollLeft,s=t(n),u=t(i);if(u>s){if(0>i&&o===r.contentHeight-r.containerHeight||0<i&&0===o)return 0===window.scrollY&&0<i&&x.isChrome}else if(s>u&&(0>n&&a===r.contentWidth-r.containerWidth||0<n&&0===a))return!0;return!0}function o(t,e){g.scrollTop-=e,g.scrollLeft-=t,p(r)}function a(t){return t.targetTouches?t.targetTouches[0]:t}function s(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function u(t){if(s(t)){var e=a(t);f.pageX=e.pageX,f.pageY=e.pageY,d=(new Date).getTime(),null!==v&&clearInterval(v)}}function l(t,e,r){if(!g.contains(t))return!1;for(var i=t;i&&i!==g;){if(i.classList.contains(C.element.consuming))return!0;var o=n(i);if(r&&o.overflowY.match(/(scroll|auto)/)){var a=i.scrollHeight-i.clientHeight;if(0<a&&(0<i.scrollTop&&0>r||i.scrollTop<a&&0<r))return!0}if(e&&o.overflowX.match(/(scroll|auto)/)){var s=i.scrollWidth-i.clientWidth;if(0<s&&(0<i.scrollLeft&&0>e||i.scrollLeft<s&&0<e))return!0}i=i.parentNode}return!1}function c(t){if(s(t)){var e=a(t),n={pageX:e.pageX,pageY:e.pageY},r=n.pageX-f.pageX,u=n.pageY-f.pageY;if(l(t.target,r,u))return;o(r,u),f=n;var c=(new Date).getTime(),h=c-d;0<h&&(I.x=r/h,I.y=u/h,d=c),i(r,u)&&t.preventDefault()}}function h(){r.settings.swipeEasing&&(clearInterval(v),v=setInterval(function(){return r.isInitialized?void clearInterval(v):I.x||I.y?.01>t(I.x)&&.01>t(I.y)?void clearInterval(v):r.element?(o(30*I.x,30*I.y),I.x*=.8,void(I.y*=.8)):void clearInterval(v):void clearInterval(v)},10))}if(x.supportsTouch||x.supportsIePointer){var g=r.element,f={},d=0,I={},v=null;x.supportsTouch?(r.event.bind(g,"touchstart",u),r.event.bind(g,"touchmove",c),r.event.bind(g,"touchend",h)):x.supportsIePointer&&(window.PointerEvent?(r.event.bind(g,"pointerdown",u),r.event.bind(g,"pointermove",c),r.event.bind(g,"pointerup",h)):window.MSPointerEvent&&(r.event.bind(g,"MSPointerDown",u),r.event.bind(g,"MSPointerMove",c),r.event.bind(g,"MSPointerUp",h)))}}},_=function(t,o){var a=this;if(void 0===o&&(o={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var s in this.element=t,t.classList.add(C.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},o)this.settings[s]=o[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var u=function(){return t.classList.add(C.state.focus)},l=function(){return t.classList.remove(C.state.focus)};this.isRtl="rtl"===n(t).direction,!0===this.isRtl&&t.classList.add(C.rtl),this.isNegativeScroll=function(){var e,n=t.scrollLeft;return t.scrollLeft=-1,e=0>t.scrollLeft,t.scrollLeft=n,e}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new N,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=i(C.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=i(C.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",u),this.event.bind(this.scrollbarX,"blur",l),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=n(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=f(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=f(c.borderLeftWidth)+f(c.borderRightWidth),r(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=f(c.marginLeft)+f(c.marginRight),r(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i(C.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=i(C.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",u),this.event.bind(this.scrollbarY,"blur",l),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var h=n(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=f(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var e=n(t);return f(e.width)+f(e.paddingLeft)+f(e.paddingRight)+f(e.borderLeftWidth)+f(e.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=f(h.borderTopWidth)+f(h.borderBottomWidth),r(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=f(h.marginTop)+f(h.marginBottom),r(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:0>=t.scrollLeft?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:0>=t.scrollTop?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(t){return M[t](a)}),this.lastScrollTop=e(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(t){return a.onScroll(t)}),p(this)};return _.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,r(this.scrollbarXRail,{display:"block"}),r(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=f(n(this.scrollbarXRail).marginLeft)+f(n(this.scrollbarXRail).marginRight),this.railYMarginHeight=f(n(this.scrollbarYRail).marginTop)+f(n(this.scrollbarYRail).marginBottom),r(this.scrollbarXRail,{display:"none"}),r(this.scrollbarYRail,{display:"none"}),p(this),g(this,"top",0,!1,!0),g(this,"left",0,!1,!0),r(this.scrollbarXRail,{display:""}),r(this.scrollbarYRail,{display:""}))},_.prototype.onScroll=function(){this.isAlive&&(p(this),g(this,"top",this.element.scrollTop-this.lastScrollTop),g(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=e(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},_.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),a(this.scrollbarX),a(this.scrollbarY),a(this.scrollbarXRail),a(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},_.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")},_}),

function(){function t(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function e(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function r(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function i(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function o(t,e){return!(null==t||!t.length)&&p(t,e,0)>-1}function a(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function s(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function u(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function l(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function c(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function h(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function g(t){return t.match(be)||[]}function f(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function d(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function p(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):d(t,v,n)}function I(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function v(t){return t!=t}function m(t,e){var n=null==t?0:t.length;return n?b(t,e)/n:vt}function A(t){return function(e){return null==e?Y:e[t]}}function C(t){return function(e){return null==t?Y:t[e]}}function y(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function b(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==Y&&(n=n===Y?o:n+o)}return n}function w(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function N(t){return function(e){return t(e)}}function x(t,e){return s(e,function(e){return t[e]})}function M(t,e){return t.has(e)}function _(t,e){for(var n=-1,r=t.length;++n<r&&p(e,t[n],0)>-1;);return n}function j(t,e){for(var n=t.length;n--&&p(e,t[n],0)>-1;);return n}function k(t){return"\\"+yn[t]}function z(t){return pn.test(t)}function D(t){return In.test(t)}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function G(t,e){return function(n){return t(e(n))}}function T(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==V||(t[n]=V,o[i++]=n)}return o}function S(t,e){return"__proto__"==e?Y:t[e]}function L(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function B(t){return z(t)?function(t){for(var e=fn.lastIndex=0;fn.test(t);)++e;return e}(t):On(t)}function O(t){return z(t)?function(t){return t.match(fn)||[]}(t):function(t){return t.split("")}(t)}function E(t){return t.match(dn)||[]}var Y,P=200,W="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",R="Expected a function",X="__lodash_hash_undefined__",U=500,V="__lodash_placeholder__",F=1,J=2,H=4,Q=1,K=2,$=1,q=2,tt=4,et=8,nt=16,rt=32,it=64,ot=128,at=256,st=512,ut=30,lt="...",ct=800,ht=16,gt=1,ft=2,dt=1/0,pt=9007199254740991,It=1.7976931348623157e308,vt=NaN,mt=4294967295,At=mt-1,Ct=mt>>>1,yt=[["ary",ot],["bind",$],["bindKey",q],["curry",et],["curryRight",nt],["flip",st],["partial",rt],["partialRight",it],["rearg",at]],bt="[object Arguments]",wt="[object Array]",Nt="[object AsyncFunction]",xt="[object Boolean]",Mt="[object Date]",_t="[object DOMException]",jt="[object Error]",kt="[object Function]",zt="[object GeneratorFunction]",Dt="[object Map]",Zt="[object Number]",Gt="[object Null]",Tt="[object Object]",St="[object Promise]",Lt="[object Proxy]",Bt="[object RegExp]",Ot="[object Set]",Et="[object String]",Yt="[object Symbol]",Pt="[object Undefined]",Wt="[object WeakMap]",Rt="[object WeakSet]",Xt="[object ArrayBuffer]",Ut="[object DataView]",Vt="[object Float32Array]",Ft="[object Float64Array]",Jt="[object Int8Array]",Ht="[object Int16Array]",Qt="[object Int32Array]",Kt="[object Uint8Array]",$t="[object Uint8ClampedArray]",qt="[object Uint16Array]",te="[object Uint32Array]",ee=/\b__p \+= '';/g,ne=/\b(__p \+=) '' \+/g,re=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ie=/&(?:amp|lt|gt|quot|#39);/g,oe=/[&<>"']/g,ae=RegExp(ie.source),se=RegExp(oe.source),ue=/<%-([\s\S]+?)%>/g,le=/<%([\s\S]+?)%>/g,ce=/<%=([\s\S]+?)%>/g,he=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ge=/^\w*$/,fe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,de=/[\\^$.*+?()[\]{}|]/g,pe=RegExp(de.source),Ie=/^\s+|\s+$/g,ve=/^\s+/,me=/\s+$/,Ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ye=/,? & /,be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,we=/\\(\\)?/g,Ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/\w*$/,Me=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,je=/^\[object .+?Constructor\]$/,ke=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,De=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Ge=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Le="\\u2700-\\u27bf",Be="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ee="\\ufe0e\\ufe0f",Ye="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['’]",We="["+Te+"]",Re="["+Ye+"]",Xe="["+Se+"]",Ue="\\d+",Ve="["+Le+"]",Fe="["+Be+"]",Je="[^"+Te+Ye+Ue+Le+Be+Oe+"]",He="\\ud83c[\\udffb-\\udfff]",Qe="[^"+Te+"]",Ke="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+Oe+"]",tn="\\u200d",en="(?:"+Fe+"|"+Je+")",nn="(?:"+qe+"|"+Je+")",rn="(?:['’](?:d|ll|m|re|s|t|ve))?",on="(?:['’](?:D|LL|M|RE|S|T|VE))?",an="(?:"+Xe+"|"+He+")"+"?",sn="["+Ee+"]?",un=sn+an+("(?:"+tn+"(?:"+[Qe,Ke,$e].join("|")+")"+sn+an+")*"),ln="(?:"+[Ve,Ke,$e].join("|")+")"+un,cn="(?:"+[Qe+Xe+"?",Xe,Ke,$e,We].join("|")+")",hn=RegExp(Pe,"g"),gn=RegExp(Xe,"g"),fn=RegExp(He+"(?="+He+")|"+cn+un,"g"),dn=RegExp([qe+"?"+Fe+"+"+rn+"(?="+[Re,qe,"$"].join("|")+")",nn+"+"+on+"(?="+[Re,qe+en,"$"].join("|")+")",qe+"?"+en+"+"+rn,qe+"+"+on,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ue,ln].join("|"),"g"),pn=RegExp("["+tn+Te+Se+Ee+"]"),In=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mn=-1,An={};An[Vt]=An[Ft]=An[Jt]=An[Ht]=An[Qt]=An[Kt]=An[$t]=An[qt]=An[te]=!0,An[bt]=An[wt]=An[Xt]=An[xt]=An[Ut]=An[Mt]=An[jt]=An[kt]=An[Dt]=An[Zt]=An[Tt]=An[Bt]=An[Ot]=An[Et]=An[Wt]=!1;var Cn={};Cn[bt]=Cn[wt]=Cn[Xt]=Cn[Ut]=Cn[xt]=Cn[Mt]=Cn[Vt]=Cn[Ft]=Cn[Jt]=Cn[Ht]=Cn[Qt]=Cn[Dt]=Cn[Zt]=Cn[Tt]=Cn[Bt]=Cn[Ot]=Cn[Et]=Cn[Yt]=Cn[Kt]=Cn[$t]=Cn[qt]=Cn[te]=!0,Cn[jt]=Cn[kt]=Cn[Wt]=!1;var yn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bn=parseFloat,wn=parseInt,Nn="object"==typeof global&&global&&global.Object===Object&&global,xn="object"==typeof self&&self&&self.Object===Object&&self,Mn=Nn||xn||Function("return this")(),_n="object"==typeof exports&&exports&&!exports.nodeType&&exports,jn=_n&&"object"==typeof module&&module&&!module.nodeType&&module,kn=jn&&jn.exports===_n,zn=kn&&Nn.process,Dn=function(){try{return zn&&zn.binding&&zn.binding("util")}catch(t){}}(),Zn=Dn&&Dn.isArrayBuffer,Gn=Dn&&Dn.isDate,Tn=Dn&&Dn.isMap,Sn=Dn&&Dn.isRegExp,Ln=Dn&&Dn.isSet,Bn=Dn&&Dn.isTypedArray,On=A("length"),En=C({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Yn=C({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Pn=C({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Wn=function C(be){function Te(t){if(oo(t)&&!Hs(t)&&!(t instanceof Be)){if(t instanceof Le)return t;if(Ho.call(t,"__wrapped__"))return Di(t)}return new Le(t)}function Se(){}function Le(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Y}function Be(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=mt,this.__views__=[]}function Oe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ee(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ye(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Pe(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ye;++e<n;)this.add(t[e])}function We(t){this.size=(this.__data__=new Ee(t)).size}function Re(t,e){var n=Hs(t),r=!n&&Js(t),i=!n&&!r&&Ks(t),o=!n&&!r&&!i&&nu(t),a=n||r||i||o,s=a?w(t.length,Wo):[],u=s.length;for(var l in t)!e&&!Ho.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ii(l,u))||s.push(l);return s}function Xe(t){var e=t.length;return e?t[nr(0,e-1)]:Y}function Ue(t,e,n){(n===Y||Ki(t[e],n))&&(n!==Y||e in t)||Qe(t,e,n)}function Ve(t,e,n){var r=t[e];Ho.call(t,e)&&Ki(r,n)&&(n!==Y||e in t)||Qe(t,e,n)}function Fe(t,e){for(var n=t.length;n--;)if(Ki(t[n][0],e))return n;return-1}function Je(t,e,n,r){return Fa(t,function(t,i,o){e(r,t,n(t),o)}),r}function He(t,e){return t&&Dr(e,Co(e),t)}function Qe(t,e,n){"__proto__"==e&&fa?fa(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ke(t,e){for(var n=-1,r=e.length,i=So(r),o=null==t;++n<r;)i[n]=o?Y:mo(t,e[n]);return i}function $e(t,e,n){return t==t&&(n!==Y&&(t=t<=n?t:n),e!==Y&&(t=t>=e?t:e)),t}function qe(t,e,r,i,o,a){var s,u=e&F,l=e&J,c=e&H;if(r&&(s=o?r(t,i,o,a):r(t)),s!==Y)return s;if(!io(t))return t;var h=Hs(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ho.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return zr(t,s)}else{var g=os(t),f=g==kt||g==zt;if(Ks(t))return Nr(t,u);if(g==Tt||g==bt||f&&!o){if(s=l||f?{}:di(t),!u)return l?function(t,e){return Dr(t,is(t),e)}(t,function(t,e){return t&&Dr(e,yo(e),t)}(s,t)):function(t,e){return Dr(t,rs(t),e)}(t,He(s,t))}else{if(!Cn[g])return o?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case Xt:return xr(t);case xt:case Mt:return new r(+t);case Ut:return function(t,e){return new t.constructor(e?xr(t.buffer):t.buffer,t.byteOffset,t.byteLength)}(t,n);case Vt:case Ft:case Jt:case Ht:case Qt:case Kt:case $t:case qt:case te:return Mr(t,n);case Dt:return new r;case Zt:case Et:return new r(t);case Bt:return function(t){var e=new t.constructor(t.source,xe.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Ot:return new r;case Yt:return function(t){return Xa?Yo(Xa.call(t)):{}}(t)}}(t,g,u)}}a||(a=new We);var d=a.get(t);if(d)return d;if(a.set(t,s),eu(t))return t.forEach(function(n){s.add(qe(n,e,r,n,t,a))}),s;if(qs(t))return t.forEach(function(n,i){s.set(i,qe(n,e,r,i,t,a))}),s;var p=h?Y:(c?l?ai:oi:l?yo:Co)(t);return n(p||t,function(n,i){p&&(n=t[i=n]),Ve(s,i,qe(n,e,r,i,t,a))}),s}function tn(t,e,n){var r=n.length;if(null==t)return!r;for(t=Yo(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===Y&&!(i in t)||!o(a))return!1}return!0}function en(t,e,n){if("function"!=typeof t)throw new Ro(R);return us(function(){t.apply(Y,n)},e)}function nn(t,e,n,r){var i=-1,u=o,l=!0,c=t.length,h=[],g=e.length;if(!c)return h;n&&(e=s(e,N(n))),r?(u=a,l=!1):e.length>=P&&(u=M,l=!1,e=new Pe(e));t:for(;++i<c;){var f=t[i],d=null==n?f:n(f);if(f=r||0!==f?f:0,l&&d==d){for(var p=g;p--;)if(e[p]===d)continue t;h.push(f)}else u(e,d,r)||h.push(f)}return h}function rn(t,e){var n=!0;return Fa(t,function(t,r,i){return n=!!e(t,r,i)}),n}function on(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===Y?a==a&&!lo(a):n(a,s)))var s=a,u=o}return u}function an(t,e){var n=[];return Fa(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function sn(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=pi),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?sn(s,e-1,n,r,i):u(i,s):r||(i[i.length]=s)}return i}function un(t,e){return t&&Ha(t,e,Co)}function ln(t,e){return t&&Qa(t,e,Co)}function cn(t,e){return i(e,function(e){return eo(t[e])})}function fn(t,e){for(var n=0,r=(e=br(e,t)).length;null!=t&&n<r;)t=t[ji(e[n++])];return n&&n==r?t:Y}function dn(t,e,n){var r=e(t);return Hs(t)?r:u(r,n(t))}function pn(t){return null==t?t===Y?Pt:Gt:ga&&ga in Yo(t)?function(t){var e=Ho.call(t,ga),n=t[ga];try{t[ga]=Y;var r=!0}catch(t){}var i=$o.call(t);return r&&(e?t[ga]=n:delete t[ga]),i}(t):function(t){return $o.call(t)}(t)}function In(t,e){return t>e}function yn(t,e){return null!=t&&Ho.call(t,e)}function Nn(t,e){return null!=t&&e in Yo(t)}function xn(t,e,n){for(var r=n?a:o,i=t[0].length,u=t.length,l=u,c=So(u),h=1/0,g=[];l--;){var f=t[l];l&&e&&(f=s(f,N(e))),h=xa(f.length,h),c[l]=!n&&(e||i>=120&&f.length>=120)?new Pe(l&&f):Y}f=t[0];var d=-1,p=c[0];t:for(;++d<i&&g.length<h;){var I=f[d],v=e?e(I):I;if(I=n||0!==I?I:0,!(p?M(p,v):r(g,v,n))){for(l=u;--l;){var m=c[l];if(!(m?M(m,v):r(t[l],v,n)))continue t}p&&p.push(v),g.push(I)}}return g}function _n(e,n,r){var i=null==(e=Ni(e,n=br(n,e)))?e:e[ji(Li(n))];return null==i?Y:t(i,e,r)}function jn(t){return oo(t)&&pn(t)==bt}function zn(t,e,n,r,i){return t===e||(null==t||null==e||!oo(t)&&!oo(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var a=Hs(t),s=Hs(e),u=a?wt:os(t),l=s?wt:os(e),c=(u=u==bt?Tt:u)==Tt,h=(l=l==bt?Tt:l)==Tt,g=u==l;if(g&&Ks(t)){if(!Ks(e))return!1;a=!0,c=!1}if(g&&!c)return o||(o=new We),a||nu(t)?ri(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case Ut:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Xt:return!(t.byteLength!=e.byteLength||!o(new ia(t),new ia(e)));case xt:case Mt:case Zt:return Ki(+t,+e);case jt:return t.name==e.name&&t.message==e.message;case Bt:case Et:return t==e+"";case Dt:var s=Z;case Ot:var u=r&Q;if(s||(s=L),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=K,a.set(t,e);var c=ri(s(t),s(e),r,i,o,a);return a.delete(t),c;case Yt:if(Xa)return Xa.call(t)==Xa.call(e)}return!1}(t,e,u,n,r,i,o);if(!(n&Q)){var f=c&&Ho.call(t,"__wrapped__"),d=h&&Ho.call(e,"__wrapped__");if(f||d){var p=f?t.value():t,I=d?e.value():e;return o||(o=new We),i(p,I,n,r,o)}}return!!g&&(o||(o=new We),function(t,e,n,r,i,o){var a=n&Q,s=oi(t),u=s.length;if(u!=oi(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:Ho.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var g=!0;o.set(t,e),o.set(e,t);for(var f=a;++l<u;){c=s[l];var d=t[c],p=e[c];if(r)var I=a?r(p,d,c,e,t,o):r(d,p,c,t,e,o);if(!(I===Y?d===p||i(d,p,n,r,o):I)){g=!1;break}f||(f="constructor"==c)}if(g&&!f){var v=t.constructor,m=e.constructor;v!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(g=!1)}return o.delete(t),o.delete(e),g}(t,e,n,r,i,o))}(t,e,n,r,zn,i))}function Dn(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Yo(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(l===Y&&!(u in t))return!1}else{var h=new We;if(r)var g=r(l,c,u,t,e,h);if(!(g===Y?zn(c,l,Q|K,r,h):g))return!1}}return!0}function On(t){return!(!io(t)||function(t){return!!Ko&&Ko in t}(t))&&(eo(t)?ea:je).test(ki(t))}function Rn(t){return"function"==typeof t?t:null==t?jo:"object"==typeof t?Hs(t)?Hn(t[0],t[1]):Jn(t):Zo(t)}function Xn(t){if(!Ci(t))return wa(t);var e=[];for(var n in Yo(t))Ho.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Un(t){if(!io(t))return function(t){var e=[];if(null!=t)for(var n in Yo(t))e.push(n);return e}(t);var e=Ci(t),n=[];for(var r in t)("constructor"!=r||!e&&Ho.call(t,r))&&n.push(r);return n}function Vn(t,e){return t<e}function Fn(t,e){var n=-1,r=$i(t)?So(t.length):[];return Fa(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Jn(t){var e=hi(t);return 1==e.length&&e[0][2]?bi(e[0][0],e[0][1]):function(n){return n===t||Dn(n,t,e)}}function Hn(t,e){return mi(t)&&yi(e)?bi(ji(t),e):function(n){var r=mo(n,t);return r===Y&&r===e?Ao(n,t):zn(e,r,Q|K)}}function Qn(t,e,n,r,i){t!==e&&Ha(e,function(o,a){if(io(o))i||(i=new We),function(t,e,n,r,i,o,a){var s=S(t,n),u=S(e,n),l=a.get(u);if(l)return Ue(t,n,l),Y;var c=o?o(s,u,n+"",t,e,a):Y,h=c===Y;if(h){var g=Hs(u),f=!g&&Ks(u),d=!g&&!f&&nu(u);c=u,g||f||d?Hs(s)?c=s:qi(s)?c=zr(s):f?(h=!1,c=Nr(u,!0)):d?(h=!1,c=Mr(u,!0)):c=[]:so(u)||Js(u)?(c=s,Js(s)?c=Io(s):(!io(s)||r&&eo(s))&&(c=di(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),Ue(t,n,c)}(t,e,a,n,Qn,r,i);else{var s=r?r(S(t,a),o,a+"",t,e,i):Y;s===Y&&(s=o),Ue(t,a,s)}},yo)}function Kn(t,e){var n=t.length;if(n)return Ii(e+=e<0?n:0,n)?t[e]:Y}function $n(t,e,n){var r=-1;return e=s(e.length?e:[jo],N(li())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Fn(t,function(t,n,i){return{criteria:s(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=_r(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)})}function qn(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=fn(t,a);n(s,a)&&or(o,br(a,t),s)}return o}function tr(t,e,n,r){var i=r?I:p,o=-1,a=e.length,u=t;for(t===e&&(e=zr(e)),n&&(u=s(t,N(n)));++o<a;)for(var l=0,c=e[o],h=n?n(c):c;(l=i(u,h,l,r))>-1;)u!==t&&la.call(u,l,1),la.call(t,l,1);return t}function er(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Ii(i)?la.call(t,i,1):dr(t,i)}}return t}function nr(t,e){return t+ma(ja()*(e-t+1))}function rr(t,e){var n="";if(!t||e<1||e>pt)return n;do{e%2&&(n+=t),(e=ma(e/2))&&(t+=t)}while(e);return n}function ir(t,e){return ls(wi(t,e,jo),t+"")}function or(t,e,n,r){if(!io(t))return t;for(var i=-1,o=(e=br(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=ji(e[i]),l=n;if(i!=a){var c=s[u];(l=r?r(c,u,s):Y)===Y&&(l=io(c)?c:Ii(e[i+1])?[]:{})}Ve(s,u,l),s=s[u]}return t}function ar(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=So(i);++r<i;)o[r]=t[r+e];return o}function sr(t,e){var n;return Fa(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ur(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=Ct){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!lo(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return lr(t,e,jo,n)}function lr(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!=e,s=null===e,u=lo(e),l=e===Y;i<o;){var c=ma((i+o)/2),h=n(t[c]),g=h!==Y,f=null===h,d=h==h,p=lo(h);if(a)var I=r||d;else I=l?d&&(r||g):s?d&&g&&(r||!f):u?d&&g&&!f&&(r||!p):!f&&!p&&(r?h<=e:h<e);I?i=c+1:o=c}return xa(o,At)}function cr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ki(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function hr(t){return"number"==typeof t?t:lo(t)?vt:+t}function gr(t){if("string"==typeof t)return t;if(Hs(t))return s(t,gr)+"";if(lo(t))return Ua?Ua.call(t):"";var e=t+"";return"0"==e&&1/t==-dt?"-0":e}function fr(t,e,n){var r=-1,i=o,s=t.length,u=!0,l=[],c=l;if(n)u=!1,i=a;else if(s>=P){var h=e?null:es(t);if(h)return L(h);u=!1,i=M,c=new Pe}else c=e?[]:l;t:for(;++r<s;){var g=t[r],f=e?e(g):g;if(g=n||0!==g?g:0,u&&f==f){for(var d=c.length;d--;)if(c[d]===f)continue t;e&&c.push(f),l.push(g)}else i(c,f,n)||(c!==l&&c.push(f),l.push(g))}return l}function dr(t,e){return null==(t=Ni(t,e=br(e,t)))||delete t[ji(Li(e))]}function pr(t,e,n,r){return or(t,e,n(fn(t,e)),r)}function Ir(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ar(t,r?0:o,r?o+1:i):ar(t,r?o+1:0,r?i:o)}function vr(t,e){var n=t;return n instanceof Be&&(n=n.value()),l(e,function(t,e){return e.func.apply(e.thisArg,u([t],e.args))},n)}function mr(t,e,n){var r=t.length;if(r<2)return r?fr(t[0]):[];for(var i=-1,o=So(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=nn(o[i]||a,t[s],e,n));return fr(sn(o,1),e,n)}function Ar(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;)n(a,t[r],r<o?e[r]:Y);return a}function Cr(t){return qi(t)?t:[]}function yr(t){return"function"==typeof t?t:jo}function br(t,e){return Hs(t)?t:mi(t,e)?[t]:cs(vo(t))}function wr(t,e,n){var r=t.length;return n=n===Y?r:n,!e&&n>=r?t:ar(t,e,n)}function Nr(t,e){if(e)return t.slice();var n=t.length,r=oa?oa(n):new t.constructor(n);return t.copy(r),r}function xr(t){var e=new t.constructor(t.byteLength);return new ia(e).set(new ia(t)),e}function Mr(t,e){return new t.constructor(e?xr(t.buffer):t.buffer,t.byteOffset,t.length)}function _r(t,e){if(t!==e){var n=t!==Y,r=null===t,i=t==t,o=lo(t),a=e!==Y,s=null===e,u=e==e,l=lo(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function jr(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=Na(o-a,0),c=So(u+l),h=!r;++s<u;)c[s]=e[s];for(;++i<a;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function kr(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=Na(o-s,0),h=So(c+l),g=!r;++i<c;)h[i]=t[i];for(var f=i;++u<l;)h[f+u]=e[u];for(;++a<s;)(g||i<o)&&(h[f+n[a]]=t[i++]);return h}function zr(t,e){var n=-1,r=t.length;for(e||(e=So(r));++n<r;)e[n]=t[n];return e}function Dr(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):Y;u===Y&&(u=t[s]),i?Qe(n,s,u):Ve(n,s,u)}return n}function Zr(t,n){return function(r,i){var o=Hs(r)?e:Je,a=n?n():{};return o(r,t,li(i,2),a)}}function Gr(t){return ir(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:Y,a=i>2?n[2]:Y;for(o=t.length>3&&"function"==typeof o?(i--,o):Y,a&&vi(n[0],n[1],a)&&(o=i<3?Y:o,i=1),e=Yo(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Tr(t,e){return function(n,r){if(null==n)return n;if(!$i(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Yo(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Sr(t){return function(e,n,r){for(var i=-1,o=Yo(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Lr(t){return function(e){var n=z(e=vo(e))?O(e):Y,r=n?n[0]:e.charAt(0),i=n?wr(n,1).join(""):e.slice(1);return r[t]()+i}}function Br(t){return function(e){return l(Mo(xo(e).replace(hn,"")),t,"")}}function Or(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Va(t.prototype),r=t.apply(n,e);return io(r)?r:n}}function Er(e,n,r){var i=Or(e);return function o(){for(var a=arguments.length,s=So(a),u=a,l=ui(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:T(s,l);return(a-=c.length)<r?Qr(e,n,Wr,o.placeholder,Y,s,c,Y,Y,r-a):t(this&&this!==Mn&&this instanceof o?i:e,this,s)}}function Yr(t){return function(e,n,r){var i=Yo(e);if(!$i(e)){var o=li(n,3);e=Co(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:Y}}function Pr(t){return ii(function(e){var n=e.length,r=n,i=Le.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new Ro(R);if(i&&!a&&"wrapper"==si(o))var a=new Le([],!0)}for(r=a?r:n;++r<n;){var s=si(o=e[r]),u="wrapper"==s?ns(o):Y;a=u&&Ai(u[0])&&u[1]==(ot|et|rt|at)&&!u[4].length&&1==u[9]?a[si(u[0])].apply(a,u[3]):1==o.length&&Ai(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Hs(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Wr(t,e,n,r,i,o,a,s,u,l){var c=e&ot,h=e&$,g=e&q,f=e&(et|nt),d=e&st,p=g?Y:Or(t);return function I(){for(var v=arguments.length,m=So(v),A=v;A--;)m[A]=arguments[A];if(f)var C=ui(I),y=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(m,C);if(r&&(m=jr(m,r,i,f)),o&&(m=kr(m,o,a,f)),v-=y,f&&v<l)return Qr(t,e,Wr,I.placeholder,n,m,T(m,C),s,u,l-v);var b=h?n:this,w=g?b[t]:t;return v=m.length,s?m=function(t,e){for(var n=t.length,r=xa(e.length,n),i=zr(t);r--;){var o=e[r];t[r]=Ii(o,n)?i[o]:Y}return t}(m,s):d&&v>1&&m.reverse(),c&&u<v&&(m.length=u),this&&this!==Mn&&this instanceof I&&(w=p||Or(w)),w.apply(b,m)}}function Rr(t,e){return function(n,r){return function(t,e,n,r){return un(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function Xr(t,e){return function(n,r){var i;if(n===Y&&r===Y)return e;if(n!==Y&&(i=n),r!==Y){if(i===Y)return r;"string"==typeof n||"string"==typeof r?(n=gr(n),r=gr(r)):(n=hr(n),r=hr(r)),i=t(n,r)}return i}}function Ur(e){return ii(function(n){return n=s(n,N(li())),ir(function(r){var i=this;return e(n,function(e){return t(e,i,r)})})})}function Vr(t,e){var n=(e=e===Y?" ":gr(e)).length;if(n<2)return n?rr(e,t):e;var r=rr(e,va(t/B(e)));return z(e)?wr(O(r),0,t).join(""):r.slice(0,t)}function Fr(e,n,r,i){var o=n&$,a=Or(e);return function n(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=So(c+u),g=this&&this!==Mn&&this instanceof n?a:e;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return t(g,o?r:this,h)}}function Jr(t){return function(e,n,r){return r&&"number"!=typeof r&&vi(e,n,r)&&(n=r=Y),e=ho(e),n===Y?(n=e,e=0):n=ho(n),function(t,e,n,r){for(var i=-1,o=Na(va((e-t)/(n||1)),0),a=So(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r=r===Y?e<n?1:-1:ho(r),t)}}function Hr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=po(e),n=po(n)),t(e,n)}}function Qr(t,e,n,r,i,o,a,s,u,l){var c=e&et;e|=c?rt:it,(e&=~(c?it:rt))&tt||(e&=~($|q));var h=[t,e,i,c?o:Y,c?a:Y,c?Y:o,c?Y:a,s,u,l],g=n.apply(Y,h);return Ai(t)&&ss(g,h),g.placeholder=r,xi(g,t,e)}function Kr(t){var e=Eo[t];return function(t,n){if(t=po(t),n=null==n?0:xa(go(n),292)){var r=(vo(t)+"e").split("e");return+((r=(vo(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}function $r(t){return function(e){var n=os(e);return n==Dt?Z(e):n==Ot?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return s(e,function(e){return[e,t[e]]})}(e,t(e))}}function qr(t,e,n,r,i,o,a,s){var u=e&q;if(!u&&"function"!=typeof t)throw new Ro(R);var l=r?r.length:0;if(l||(e&=~(rt|it),r=i=Y),a=a===Y?a:Na(go(a),0),s=s===Y?s:go(s),l-=i?i.length:0,e&it){var c=r,h=i;r=i=Y}var g=u?Y:ns(t),f=[t,e,n,r,i,c,h,o,a,s];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<($|q|ot),a=r==ot&&n==et||r==ot&&n==at&&t[7].length<=e[8]||r==(ot|at)&&e[7].length<=e[8]&&n==et;if(!o&&!a)return t;r&$&&(t[2]=e[2],i|=n&$?0:tt);var s=e[3];if(s){var u=t[3];t[3]=u?jr(u,s,e[4]):s,t[4]=u?T(t[3],V):e[4]}(s=e[5])&&(u=t[5],t[5]=u?kr(u,s,e[6]):s,t[6]=u?T(t[5],V):e[6]),(s=e[7])&&(t[7]=s),r&ot&&(t[8]=null==t[8]?e[8]:xa(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(f,g),t=f[0],e=f[1],n=f[2],r=f[3],i=f[4],!(s=f[9]=f[9]===Y?u?0:t.length:Na(f[9]-l,0))&&e&(et|nt)&&(e&=~(et|nt)),e&&e!=$)d=e==et||e==nt?Er(t,e,s):e!=rt&&e!=($|rt)||i.length?Wr.apply(Y,f):Fr(t,e,n,r);else var d=function(t,e,n){var r=e&$,i=Or(t);return function e(){return(this&&this!==Mn&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return xi((g?Ka:ss)(d,f),t,e)}function ti(t,e,n,r){return t===Y||Ki(t,Vo[n])&&!Ho.call(r,n)?e:t}function ei(t,e,n,r,i,o){return io(t)&&io(e)&&(o.set(e,t),Qn(t,e,Y,ei,o),o.delete(e)),t}function ni(t){return so(t)?Y:t}function ri(t,e,n,r,i,o){var a=n&Q,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,g=!0,f=n&K?new Pe:Y;for(o.set(t,e),o.set(e,t);++c<s;){var d=t[c],p=e[c];if(r)var I=a?r(p,d,c,e,t,o):r(d,p,c,t,e,o);if(I!==Y){if(I)continue;g=!1;break}if(f){if(!h(e,function(t,e){if(!M(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){g=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){g=!1;break}}return o.delete(t),o.delete(e),g}function ii(t){return ls(wi(t,Y,Ti),t+"")}function oi(t){return dn(t,Co,rs)}function ai(t){return dn(t,yo,is)}function si(t){for(var e=t.name+"",n=Ba[e],r=Ho.call(Ba,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function ui(t){return(Ho.call(Te,"placeholder")?Te:t).placeholder}function li(){var t=Te.iteratee||ko;return t=t===ko?Rn:t,arguments.length?t(arguments[0],arguments[1]):t}function ci(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function hi(t){for(var e=Co(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,yi(i)]}return e}function gi(t,e){var n=function(t,e){return null==t?Y:t[e]}(t,e);return On(n)?n:Y}function fi(t,e,n){for(var r=-1,i=(e=br(e,t)).length,o=!1;++r<i;){var a=ji(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ro(i)&&Ii(a,i)&&(Hs(t)||Js(t))}function di(t){return"function"!=typeof t.constructor||Ci(t)?{}:Va(aa(t))}function pi(t){return Hs(t)||Js(t)||!!(ca&&t&&t[ca])}function Ii(t,e){var n=typeof t;return!!(e=null==e?pt:e)&&("number"==n||"symbol"!=n&&ze.test(t))&&t>-1&&t%1==0&&t<e}function vi(t,e,n){if(!io(n))return!1;var r=typeof e;return!!("number"==r?$i(n)&&Ii(e,n.length):"string"==r&&e in n)&&Ki(n[e],t)}function mi(t,e){if(Hs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!lo(t))||ge.test(t)||!he.test(t)||null!=e&&t in Yo(e)}function Ai(t){var e=si(t),n=Te[e];if("function"!=typeof n||!(e in Be.prototype))return!1;if(t===n)return!0;var r=ns(n);return!!r&&t===r[0]}function Ci(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Vo)}function yi(t){return t==t&&!io(t)}function bi(t,e){return function(n){return null!=n&&n[t]===e&&(e!==Y||t in Yo(n))}}function wi(e,n,r){return n=Na(n===Y?e.length-1:n,0),function(){for(var i=arguments,o=-1,a=Na(i.length-n,0),s=So(a);++o<a;)s[o]=i[n+o];o=-1;for(var u=So(n+1);++o<n;)u[o]=i[o];return u[n]=r(s),t(e,this,u)}}function Ni(t,e){return e.length<2?t:fn(t,ar(e,0,-1))}function xi(t,e,n){var r=e+"";return ls(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ae,"{\n/* [wrapped with "+e+"] */\n")}(r,zi(function(t){var e=t.match(Ce);return e?e[1].split(ye):[]}(r),n)))}function Mi(t){var e=0,n=0;return function(){var r=Ma(),i=ht-(r-n);if(n=r,i>0){if(++e>=ct)return arguments[0]}else e=0;return t.apply(Y,arguments)}}function _i(t,e){var n=-1,r=t.length,i=r-1;for(e=e===Y?r:e;++n<e;){var o=nr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ji(t){if("string"==typeof t||lo(t))return t;var e=t+"";return"0"==e&&1/t==-dt?"-0":e}function ki(t){if(null!=t){try{return Jo.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function zi(t,e){return n(yt,function(n){var r="_."+n[0];e&n[1]&&!o(t,r)&&t.push(r)}),t.sort()}function Di(t){if(t instanceof Be)return t.clone();var e=new Le(t.__wrapped__,t.__chain__);return e.__actions__=zr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Zi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:go(n);return i<0&&(i=Na(r+i,0)),d(t,li(e,3),i)}function Gi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==Y&&(i=go(n),i=n<0?Na(r+i,0):xa(i,r-1)),d(t,li(e,3),i,!0)}function Ti(t){return null!=t&&t.length?sn(t,1):[]}function Si(t){return t&&t.length?t[0]:Y}function Li(t){var e=null==t?0:t.length;return e?t[e-1]:Y}function Bi(t,e){return t&&t.length&&e&&e.length?tr(t,e):t}function Oi(t){return null==t?t:ka.call(t)}function Ei(t){if(!t||!t.length)return[];var e=0;return t=i(t,function(t){if(qi(t))return e=Na(t.length,e),!0}),w(e,function(e){return s(t,A(e))})}function Yi(e,n){if(!e||!e.length)return[];var r=Ei(e);return null==n?r:s(r,function(e){return t(n,Y,e)})}function Pi(t){var e=Te(t);return e.__chain__=!0,e}function Wi(t,e){return e(t)}function Ri(t,e){return(Hs(t)?n:Fa)(t,li(e,3))}function Xi(t,e){return(Hs(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:Ja)(t,li(e,3))}function Ui(t,e){return(Hs(t)?s:Fn)(t,li(e,3))}function Vi(t,e,n){return e=n?Y:e,e=t&&null==e?t.length:e,qr(t,ot,Y,Y,Y,Y,e)}function Fi(t,e){var n;if("function"!=typeof e)throw new Ro(R);return t=go(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=Y),n}}function Ji(t,e,n){function r(e){var n=u,r=l;return u=l=Y,d=e,h=t.apply(r,n)}function i(t){var n=t-f;return f===Y||n>=e||n<0||I&&t-d>=c}function o(){var t=Bs();return i(t)?a(t):(g=us(o,function(t){var n=e-(t-f);return I?xa(n,c-(t-d)):n}(t)),Y)}function a(t){return g=Y,v&&u?r(t):(u=l=Y,h)}function s(){var t=Bs(),n=i(t);if(u=arguments,l=this,f=t,n){if(g===Y)return function(t){return d=t,g=us(o,e),p?r(t):h}(f);if(I)return g=us(o,e),r(f)}return g===Y&&(g=us(o,e)),h}var u,l,c,h,g,f,d=0,p=!1,I=!1,v=!0;if("function"!=typeof t)throw new Ro(R);return e=po(e)||0,io(n)&&(p=!!n.leading,c=(I="maxWait"in n)?Na(po(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),s.cancel=function(){g!==Y&&ts(g),d=0,u=f=l=g=Y},s.flush=function(){return g===Y?h:a(Bs())},s}function Hi(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ro(R);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Hi.Cache||Ye),n}function Qi(t){if("function"!=typeof t)throw new Ro(R);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ki(t,e){return t===e||t!=t&&e!=e}function $i(t){return null!=t&&ro(t.length)&&!eo(t)}function qi(t){return oo(t)&&$i(t)}function to(t){if(!oo(t))return!1;var e=pn(t);return e==jt||e==_t||"string"==typeof t.message&&"string"==typeof t.name&&!so(t)}function eo(t){if(!io(t))return!1;var e=pn(t);return e==kt||e==zt||e==Nt||e==Lt}function no(t){return"number"==typeof t&&t==go(t)}function ro(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=pt}function io(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function oo(t){return null!=t&&"object"==typeof t}function ao(t){return"number"==typeof t||oo(t)&&pn(t)==Zt}function so(t){if(!oo(t)||pn(t)!=Tt)return!1;var e=aa(t);if(null===e)return!0;var n=Ho.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Jo.call(n)==qo}function uo(t){return"string"==typeof t||!Hs(t)&&oo(t)&&pn(t)==Et}function lo(t){return"symbol"==typeof t||oo(t)&&pn(t)==Yt}function co(t){if(!t)return[];if($i(t))return uo(t)?O(t):zr(t);if(ha&&t[ha])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ha]());var e=os(t);return(e==Dt?Z:e==Ot?L:wo)(t)}function ho(t){return t?(t=po(t))===dt||t===-dt?(t<0?-1:1)*It:t==t?t:0:0===t?t:0}function go(t){var e=ho(t),n=e%1;return e==e?n?e-n:e:0}function fo(t){return t?$e(go(t),0,mt):0}function po(t){if("number"==typeof t)return t;if(lo(t))return vt;if(io(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=io(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ie,"");var n=_e.test(t);return n||ke.test(t)?wn(t.slice(2),n?2:8):Me.test(t)?vt:+t}function Io(t){return Dr(t,yo(t))}function vo(t){return null==t?"":gr(t)}function mo(t,e,n){var r=null==t?Y:fn(t,e);return r===Y?n:r}function Ao(t,e){return null!=t&&fi(t,e,Nn)}function Co(t){return $i(t)?Re(t):Xn(t)}function yo(t){return $i(t)?Re(t,!0):Un(t)}function bo(t,e){if(null==t)return{};var n=s(ai(t),function(t){return[t]});return e=li(e),qn(t,n,function(t,n){return e(t,n[0])})}function wo(t){return null==t?[]:x(t,Co(t))}function No(t){return ju(vo(t).toLowerCase())}function xo(t){return(t=vo(t))&&t.replace(De,En).replace(gn,"")}function Mo(t,e,n){return t=vo(t),(e=n?Y:e)===Y?D(t)?E(t):g(t):t.match(e)||[]}function _o(t){return function(){return t}}function jo(t){return t}function ko(t){return Rn("function"==typeof t?t:qe(t,F))}function zo(t,e,r){var i=Co(e),o=cn(e,i);null!=r||io(e)&&(o.length||!i.length)||(r=e,e=t,t=this,o=cn(e,Co(e)));var a=!(io(r)&&"chain"in r&&!r.chain),s=eo(t);return n(o,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=zr(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,u([this.value()],arguments))})}),t}function Do(){}function Zo(t){return mi(t)?A(ji(t)):function(t){return function(e){return fn(e,t)}}(t)}function Go(){return[]}function To(){return!1}var So=(be=null==be?Mn:Wn.defaults(Mn.Object(),be,Wn.pick(Mn,vn))).Array,Lo=be.Date,Bo=be.Error,Oo=be.Function,Eo=be.Math,Yo=be.Object,Po=be.RegExp,Wo=be.String,Ro=be.TypeError,Xo=So.prototype,Uo=Oo.prototype,Vo=Yo.prototype,Fo=be["__core-js_shared__"],Jo=Uo.toString,Ho=Vo.hasOwnProperty,Qo=0,Ko=function(){var t=/[^.]+$/.exec(Fo&&Fo.keys&&Fo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),$o=Vo.toString,qo=Jo.call(Yo),ta=Mn._,ea=Po("^"+Jo.call(Ho).replace(de,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),na=kn?be.Buffer:Y,ra=be.Symbol,ia=be.Uint8Array,oa=na?na.allocUnsafe:Y,aa=G(Yo.getPrototypeOf,Yo),sa=Yo.create,ua=Vo.propertyIsEnumerable,la=Xo.splice,ca=ra?ra.isConcatSpreadable:Y,ha=ra?ra.iterator:Y,ga=ra?ra.toStringTag:Y,fa=function(){try{var t=gi(Yo,"defineProperty");return t({},"",{}),t}catch(t){}}(),da=be.clearTimeout!==Mn.clearTimeout&&be.clearTimeout,pa=Lo&&Lo.now!==Mn.Date.now&&Lo.now,Ia=be.setTimeout!==Mn.setTimeout&&be.setTimeout,va=Eo.ceil,ma=Eo.floor,Aa=Yo.getOwnPropertySymbols,Ca=na?na.isBuffer:Y,ya=be.isFinite,ba=Xo.join,wa=G(Yo.keys,Yo),Na=Eo.max,xa=Eo.min,Ma=Lo.now,_a=be.parseInt,ja=Eo.random,ka=Xo.reverse,za=gi(be,"DataView"),Da=gi(be,"Map"),Za=gi(be,"Promise"),Ga=gi(be,"Set"),Ta=gi(be,"WeakMap"),Sa=gi(Yo,"create"),La=Ta&&new Ta,Ba={},Oa=ki(za),Ea=ki(Da),Ya=ki(Za),Pa=ki(Ga),Wa=ki(Ta),Ra=ra?ra.prototype:Y,Xa=Ra?Ra.valueOf:Y,Ua=Ra?Ra.toString:Y,Va=function(){function t(){}return function(e){if(!io(e))return{};if(sa)return sa(e);t.prototype=e;var n=new t;return t.prototype=Y,n}}();Te.templateSettings={escape:ue,evaluate:le,interpolate:ce,variable:"",imports:{_:Te}},Te.prototype=Se.prototype,Te.prototype.constructor=Te,Le.prototype=Va(Se.prototype),Le.prototype.constructor=Le,Be.prototype=Va(Se.prototype),Be.prototype.constructor=Be,Oe.prototype.clear=function(){this.__data__=Sa?Sa(null):{},this.size=0},Oe.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Oe.prototype.get=function(t){var e=this.__data__;if(Sa){var n=e[t];return n===X?Y:n}return Ho.call(e,t)?e[t]:Y},Oe.prototype.has=function(t){var e=this.__data__;return Sa?e[t]!==Y:Ho.call(e,t)},Oe.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Sa&&e===Y?X:e,this},Ee.prototype.clear=function(){this.__data__=[],this.size=0},Ee.prototype.delete=function(t){var e=this.__data__,n=Fe(e,t);return!(n<0||(n==e.length-1?e.pop():la.call(e,n,1),--this.size,0))},Ee.prototype.get=function(t){var e=this.__data__,n=Fe(e,t);return n<0?Y:e[n][1]},Ee.prototype.has=function(t){return Fe(this.__data__,t)>-1},Ee.prototype.set=function(t,e){var n=this.__data__,r=Fe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Ye.prototype.clear=function(){this.size=0,this.__data__={hash:new Oe,map:new(Da||Ee),string:new Oe}},Ye.prototype.delete=function(t){var e=ci(this,t).delete(t);return this.size-=e?1:0,e},Ye.prototype.get=function(t){return ci(this,t).get(t)},Ye.prototype.has=function(t){return ci(this,t).has(t)},Ye.prototype.set=function(t,e){var n=ci(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Pe.prototype.add=Pe.prototype.push=function(t){return this.__data__.set(t,X),this},Pe.prototype.has=function(t){return this.__data__.has(t)},We.prototype.clear=function(){this.__data__=new Ee,this.size=0},We.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},We.prototype.get=function(t){return this.__data__.get(t)},We.prototype.has=function(t){return this.__data__.has(t)},We.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ee){var r=n.__data__;if(!Da||r.length<P-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ye(r)}return n.set(t,e),this.size=n.size,this};var Fa=Tr(un),Ja=Tr(ln,!0),Ha=Sr(),Qa=Sr(!0),Ka=La?function(t,e){return La.set(t,e),t}:jo,$a=fa?function(t,e){return fa(t,"toString",{configurable:!0,enumerable:!1,value:_o(e),writable:!0})}:jo,qa=ir,ts=da||function(t){return Mn.clearTimeout(t)},es=Ga&&1/L(new Ga([,-0]))[1]==dt?function(t){return new Ga(t)}:Do,ns=La?function(t){return La.get(t)}:Do,rs=Aa?function(t){return null==t?[]:(t=Yo(t),i(Aa(t),function(e){return ua.call(t,e)}))}:Go,is=Aa?function(t){for(var e=[];t;)u(e,rs(t)),t=aa(t);return e}:Go,os=pn;(za&&os(new za(new ArrayBuffer(1)))!=Ut||Da&&os(new Da)!=Dt||Za&&os(Za.resolve())!=St||Ga&&os(new Ga)!=Ot||Ta&&os(new Ta)!=Wt)&&(os=function(t){var e=pn(t),n=e==Tt?t.constructor:Y,r=n?ki(n):"";if(r)switch(r){case Oa:return Ut;case Ea:return Dt;case Ya:return St;case Pa:return Ot;case Wa:return Wt}return e});var as=Fo?eo:To,ss=Mi(Ka),us=Ia||function(t,e){return Mn.setTimeout(t,e)},ls=Mi($a),cs=function(t){var e=Hi(t,function(t){return n.size===U&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(fe,function(t,n,r,i){e.push(r?i.replace(we,"$1"):n||t)}),e}),hs=ir(function(t,e){return qi(t)?nn(t,sn(e,1,qi,!0)):[]}),gs=ir(function(t,e){var n=Li(e);return qi(n)&&(n=Y),qi(t)?nn(t,sn(e,1,qi,!0),li(n,2)):[]}),fs=ir(function(t,e){var n=Li(e);return qi(n)&&(n=Y),qi(t)?nn(t,sn(e,1,qi,!0),Y,n):[]}),ds=ir(function(t){var e=s(t,Cr);return e.length&&e[0]===t[0]?xn(e):[]}),ps=ir(function(t){var e=Li(t),n=s(t,Cr);return e===Li(n)?e=Y:n.pop(),n.length&&n[0]===t[0]?xn(n,li(e,2)):[]}),Is=ir(function(t){var e=Li(t),n=s(t,Cr);return(e="function"==typeof e?e:Y)&&n.pop(),n.length&&n[0]===t[0]?xn(n,Y,e):[]}),vs=ir(Bi),ms=ii(function(t,e){var n=null==t?0:t.length,r=Ke(t,e);return er(t,s(e,function(t){return Ii(t,n)?+t:t}).sort(_r)),r}),As=ir(function(t){return fr(sn(t,1,qi,!0))}),Cs=ir(function(t){var e=Li(t);return qi(e)&&(e=Y),fr(sn(t,1,qi,!0),li(e,2))}),ys=ir(function(t){var e=Li(t);return e="function"==typeof e?e:Y,fr(sn(t,1,qi,!0),Y,e)}),bs=ir(function(t,e){return qi(t)?nn(t,e):[]}),ws=ir(function(t){return mr(i(t,qi))}),Ns=ir(function(t){var e=Li(t);return qi(e)&&(e=Y),mr(i(t,qi),li(e,2))}),xs=ir(function(t){var e=Li(t);return e="function"==typeof e?e:Y,mr(i(t,qi),Y,e)}),Ms=ir(Ei),_s=ir(function(t){var e=t.length,n=e>1?t[e-1]:Y;return Yi(t,n="function"==typeof n?(t.pop(),n):Y)}),js=ii(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Ke(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Be&&Ii(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Wi,args:[i],thisArg:Y}),new Le(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Y),t})):this.thru(i)}),ks=Zr(function(t,e,n){Ho.call(t,n)?++t[n]:Qe(t,n,1)}),zs=Yr(Zi),Ds=Yr(Gi),Zs=Zr(function(t,e,n){Ho.call(t,n)?t[n].push(e):Qe(t,n,[e])}),Gs=ir(function(e,n,r){var i=-1,o="function"==typeof n,a=$i(e)?So(e.length):[];return Fa(e,function(e){a[++i]=o?t(n,e,r):_n(e,n,r)}),a}),Ts=Zr(function(t,e,n){Qe(t,n,e)}),Ss=Zr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Ls=ir(function(t,e){if(null==t)return[];var n=e.length;return n>1&&vi(t,e[0],e[1])?e=[]:n>2&&vi(e[0],e[1],e[2])&&(e=[e[0]]),$n(t,sn(e,1),[])}),Bs=pa||function(){return Mn.Date.now()},Os=ir(function(t,e,n){var r=$;if(n.length){var i=T(n,ui(Os));r|=rt}return qr(t,r,e,n,i)}),Es=ir(function(t,e,n){var r=$|q;if(n.length){var i=T(n,ui(Es));r|=rt}return qr(e,r,t,n,i)}),Ys=ir(function(t,e){return en(t,1,e)}),Ps=ir(function(t,e,n){return en(t,po(e)||0,n)});Hi.Cache=Ye;var Ws=qa(function(e,n){var r=(n=1==n.length&&Hs(n[0])?s(n[0],N(li())):s(sn(n,1),N(li()))).length;return ir(function(i){for(var o=-1,a=xa(i.length,r);++o<a;)i[o]=n[o].call(this,i[o]);return t(e,this,i)})}),Rs=ir(function(t,e){return qr(t,rt,Y,e,T(e,ui(Rs)))}),Xs=ir(function(t,e){return qr(t,it,Y,e,T(e,ui(Xs)))}),Us=ii(function(t,e){return qr(t,at,Y,Y,Y,e)}),Vs=Hr(In),Fs=Hr(function(t,e){return t>=e}),Js=jn(function(){return arguments}())?jn:function(t){return oo(t)&&Ho.call(t,"callee")&&!ua.call(t,"callee")},Hs=So.isArray,Qs=Zn?N(Zn):function(t){return oo(t)&&pn(t)==Xt},Ks=Ca||To,$s=Gn?N(Gn):function(t){return oo(t)&&pn(t)==Mt},qs=Tn?N(Tn):function(t){return oo(t)&&os(t)==Dt},tu=Sn?N(Sn):function(t){return oo(t)&&pn(t)==Bt},eu=Ln?N(Ln):function(t){return oo(t)&&os(t)==Ot},nu=Bn?N(Bn):function(t){return oo(t)&&ro(t.length)&&!!An[pn(t)]},ru=Hr(Vn),iu=Hr(function(t,e){return t<=e}),ou=Gr(function(t,e){if(Ci(e)||$i(e))return Dr(e,Co(e),t),Y;for(var n in e)Ho.call(e,n)&&Ve(t,n,e[n])}),au=Gr(function(t,e){Dr(e,yo(e),t)}),su=Gr(function(t,e,n,r){Dr(e,yo(e),t,r)}),uu=Gr(function(t,e,n,r){Dr(e,Co(e),t,r)}),lu=ii(Ke),cu=ir(function(t,e){t=Yo(t);var n=-1,r=e.length,i=r>2?e[2]:Y;for(i&&vi(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=yo(o),s=-1,u=a.length;++s<u;){var l=a[s],c=t[l];(c===Y||Ki(c,Vo[l])&&!Ho.call(t,l))&&(t[l]=o[l])}return t}),hu=ir(function(e){return e.push(Y,ei),t(Iu,Y,e)}),gu=Rr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=$o.call(e)),t[e]=n},_o(jo)),fu=Rr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=$o.call(e)),Ho.call(t,e)?t[e].push(n):t[e]=[n]},li),du=ir(_n),pu=Gr(function(t,e,n){Qn(t,e,n)}),Iu=Gr(function(t,e,n,r){Qn(t,e,n,r)}),vu=ii(function(t,e){var n={};if(null==t)return n;var r=!1;e=s(e,function(e){return e=br(e,t),r||(r=e.length>1),e}),Dr(t,ai(t),n),r&&(n=qe(n,F|J|H,ni));for(var i=e.length;i--;)dr(n,e[i]);return n}),mu=ii(function(t,e){return null==t?{}:function(t,e){return qn(t,e,function(e,n){return Ao(t,n)})}(t,e)}),Au=$r(Co),Cu=$r(yo),yu=Br(function(t,e,n){return e=e.toLowerCase(),t+(n?No(e):e)}),bu=Br(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),wu=Br(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Nu=Lr("toLowerCase"),xu=Br(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Mu=Br(function(t,e,n){return t+(n?" ":"")+ju(e)}),_u=Br(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ju=Lr("toUpperCase"),ku=ir(function(e,n){try{return t(e,Y,n)}catch(t){return to(t)?t:new Bo(t)}}),zu=ii(function(t,e){return n(e,function(e){e=ji(e),Qe(t,e,Os(t[e],t))}),t}),Du=Pr(),Zu=Pr(!0),Gu=ir(function(t,e){return function(n){return _n(n,t,e)}}),Tu=ir(function(t,e){return function(n){return _n(t,n,e)}}),Su=Ur(s),Lu=Ur(r),Bu=Ur(h),Ou=Jr(),Eu=Jr(!0),Yu=Xr(function(t,e){return t+e},0),Pu=Kr("ceil"),Wu=Xr(function(t,e){return t/e},1),Ru=Kr("floor"),Xu=Xr(function(t,e){return t*e},1),Uu=Kr("round"),Vu=Xr(function(t,e){return t-e},0);return Te.after=function(t,e){if("function"!=typeof e)throw new Ro(R);return t=go(t),function(){if(--t<1)return e.apply(this,arguments)}},Te.ary=Vi,Te.assign=ou,Te.assignIn=au,Te.assignInWith=su,Te.assignWith=uu,Te.at=lu,Te.before=Fi,Te.bind=Os,Te.bindAll=zu,Te.bindKey=Es,Te.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hs(t)?t:[t]},Te.chain=Pi,Te.chunk=function(t,e,n){e=(n?vi(t,e,n):e===Y)?1:Na(go(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=So(va(r/e));i<r;)a[o++]=ar(t,i,i+=e);return a},Te.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Te.concat=function(){var t=arguments.length;if(!t)return[];for(var e=So(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return u(Hs(n)?zr(n):[n],sn(e,1))},Te.cond=function(e){var n=null==e?0:e.length,r=li();return e=n?s(e,function(t){if("function"!=typeof t[1])throw new Ro(R);return[r(t[0]),t[1]]}):[],ir(function(r){for(var i=-1;++i<n;){var o=e[i];if(t(o[0],this,r))return t(o[1],this,r)}})},Te.conforms=function(t){return function(t){var e=Co(t);return function(n){return tn(n,t,e)}}(qe(t,F))},Te.constant=_o,Te.countBy=ks,Te.create=function(t,e){var n=Va(t);return null==e?n:He(n,e)},Te.curry=function t(e,n,r){var i=qr(e,et,Y,Y,Y,Y,Y,n=r?Y:n);return i.placeholder=t.placeholder,i},Te.curryRight=function t(e,n,r){var i=qr(e,nt,Y,Y,Y,Y,Y,n=r?Y:n);return i.placeholder=t.placeholder,i},Te.debounce=Ji,Te.defaults=cu,Te.defaultsDeep=hu,Te.defer=Ys,Te.delay=Ps,Te.difference=hs,Te.differenceBy=gs,Te.differenceWith=fs,Te.drop=function(t,e,n){var r=null==t?0:t.length;return r?ar(t,(e=n||e===Y?1:go(e))<0?0:e,r):[]},Te.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ar(t,0,(e=r-(e=n||e===Y?1:go(e)))<0?0:e):[]},Te.dropRightWhile=function(t,e){return t&&t.length?Ir(t,li(e,3),!0,!0):[]},Te.dropWhile=function(t,e){return t&&t.length?Ir(t,li(e,3),!0):[]},Te.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&vi(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=go(n))<0&&(n=-n>i?0:i+n),(r=r===Y||r>i?i:go(r))<0&&(r+=i),r=n>r?0:fo(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Te.filter=function(t,e){return(Hs(t)?i:an)(t,li(e,3))},Te.flatMap=function(t,e){return sn(Ui(t,e),1)},Te.flatMapDeep=function(t,e){return sn(Ui(t,e),dt)},Te.flatMapDepth=function(t,e,n){return n=n===Y?1:go(n),sn(Ui(t,e),n)},Te.flatten=Ti,Te.flattenDeep=function(t){return null!=t&&t.length?sn(t,dt):[]},Te.flattenDepth=function(t,e){return null!=t&&t.length?sn(t,e=e===Y?1:go(e)):[]},Te.flip=function(t){return qr(t,st)},Te.flow=Du,Te.flowRight=Zu,Te.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Te.functions=function(t){return null==t?[]:cn(t,Co(t))},Te.functionsIn=function(t){return null==t?[]:cn(t,yo(t))},Te.groupBy=Zs,Te.initial=function(t){return null!=t&&t.length?ar(t,0,-1):[]},Te.intersection=ds,Te.intersectionBy=ps,Te.intersectionWith=Is,Te.invert=gu,Te.invertBy=fu,Te.invokeMap=Gs,Te.iteratee=ko,Te.keyBy=Ts,Te.keys=Co,Te.keysIn=yo,Te.map=Ui,Te.mapKeys=function(t,e){var n={};return e=li(e,3),un(t,function(t,r,i){Qe(n,e(t,r,i),t)}),n},Te.mapValues=function(t,e){var n={};return e=li(e,3),un(t,function(t,r,i){Qe(n,r,e(t,r,i))}),n},Te.matches=function(t){return Jn(qe(t,F))},Te.matchesProperty=function(t,e){return Hn(t,qe(e,F))},Te.memoize=Hi,Te.merge=pu,Te.mergeWith=Iu,Te.method=Gu,Te.methodOf=Tu,Te.mixin=zo,Te.negate=Qi,Te.nthArg=function(t){return t=go(t),ir(function(e){return Kn(e,t)})},Te.omit=vu,Te.omitBy=function(t,e){return bo(t,Qi(li(e)))},Te.once=function(t){return Fi(2,t)},Te.orderBy=function(t,e,n,r){return null==t?[]:(Hs(e)||(e=null==e?[]:[e]),Hs(n=r?Y:n)||(n=null==n?[]:[n]),$n(t,e,n))},Te.over=Su,Te.overArgs=Ws,Te.overEvery=Lu,Te.overSome=Bu,Te.partial=Rs,Te.partialRight=Xs,Te.partition=Ss,Te.pick=mu,Te.pickBy=bo,Te.property=Zo,Te.propertyOf=function(t){return function(e){return null==t?Y:fn(t,e)}},Te.pull=vs,Te.pullAll=Bi,Te.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?tr(t,e,li(n,2)):t},Te.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?tr(t,e,Y,n):t},Te.pullAt=ms,Te.range=Ou,Te.rangeRight=Eu,Te.rearg=Us,Te.reject=function(t,e){return(Hs(t)?i:an)(t,Qi(li(e,3)))},Te.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=li(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return er(t,i),n},Te.rest=function(t,e){if("function"!=typeof t)throw new Ro(R);return ir(t,e=e===Y?e:go(e))},Te.reverse=Oi,Te.sampleSize=function(t,e,n){return e=(n?vi(t,e,n):e===Y)?1:go(e),(Hs(t)?function(t,e){return _i(zr(t),$e(e,0,t.length))}:function(t,e){var n=wo(t);return _i(n,$e(e,0,n.length))})(t,e)},Te.set=function(t,e,n){return null==t?t:or(t,e,n)},Te.setWith=function(t,e,n,r){return r="function"==typeof r?r:Y,null==t?t:or(t,e,n,r)},Te.shuffle=function(t){return(Hs(t)?function(t){return _i(zr(t))}:function(t){return _i(wo(t))})(t)},Te.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&vi(t,e,n)?(e=0,n=r):(e=null==e?0:go(e),n=n===Y?r:go(n)),ar(t,e,n)):[]},Te.sortBy=Ls,Te.sortedUniq=function(t){return t&&t.length?cr(t):[]},Te.sortedUniqBy=function(t,e){return t&&t.length?cr(t,li(e,2)):[]},Te.split=function(t,e,n){return n&&"number"!=typeof n&&vi(t,e,n)&&(e=n=Y),(n=n===Y?mt:n>>>0)?(t=vo(t))&&("string"==typeof e||null!=e&&!tu(e))&&!(e=gr(e))&&z(t)?wr(O(t),0,n):t.split(e,n):[]},Te.spread=function(e,n){if("function"!=typeof e)throw new Ro(R);return n=null==n?0:Na(go(n),0),ir(function(r){var i=r[n],o=wr(r,0,n);return i&&u(o,i),t(e,this,o)})},Te.tail=function(t){var e=null==t?0:t.length;return e?ar(t,1,e):[]},Te.take=function(t,e,n){return t&&t.length?ar(t,0,(e=n||e===Y?1:go(e))<0?0:e):[]},Te.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ar(t,(e=r-(e=n||e===Y?1:go(e)))<0?0:e,r):[]},Te.takeRightWhile=function(t,e){return t&&t.length?Ir(t,li(e,3),!1,!0):[]},Te.takeWhile=function(t,e){return t&&t.length?Ir(t,li(e,3)):[]},Te.tap=function(t,e){return e(t),t},Te.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ro(R);return io(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ji(t,e,{leading:r,maxWait:e,trailing:i})},Te.thru=Wi,Te.toArray=co,Te.toPairs=Au,Te.toPairsIn=Cu,Te.toPath=function(t){return Hs(t)?s(t,ji):lo(t)?[t]:zr(cs(vo(t)))},Te.toPlainObject=Io,Te.transform=function(t,e,r){var i=Hs(t),o=i||Ks(t)||nu(t);if(e=li(e,4),null==r){var a=t&&t.constructor;r=o?i?new a:[]:io(t)&&eo(a)?Va(aa(t)):{}}return(o?n:un)(t,function(t,n,i){return e(r,t,n,i)}),r},Te.unary=function(t){return Vi(t,1)},Te.union=As,Te.unionBy=Cs,Te.unionWith=ys,Te.uniq=function(t){return t&&t.length?fr(t):[]},Te.uniqBy=function(t,e){return t&&t.length?fr(t,li(e,2)):[]},Te.uniqWith=function(t,e){return e="function"==typeof e?e:Y,t&&t.length?fr(t,Y,e):[]},Te.unset=function(t,e){return null==t||dr(t,e)},Te.unzip=Ei,Te.unzipWith=Yi,Te.update=function(t,e,n){return null==t?t:pr(t,e,yr(n))},Te.updateWith=function(t,e,n,r){return r="function"==typeof r?r:Y,null==t?t:pr(t,e,yr(n),r)},Te.values=wo,Te.valuesIn=function(t){return null==t?[]:x(t,yo(t))},Te.without=bs,Te.words=Mo,Te.wrap=function(t,e){return Rs(yr(e),t)},Te.xor=ws,Te.xorBy=Ns,Te.xorWith=xs,Te.zip=Ms,Te.zipObject=function(t,e){return Ar(t||[],e||[],Ve)},Te.zipObjectDeep=function(t,e){return Ar(t||[],e||[],or)},Te.zipWith=_s,Te.entries=Au,Te.entriesIn=Cu,Te.extend=au,Te.extendWith=su,zo(Te,Te),Te.add=Yu,Te.attempt=ku,Te.camelCase=yu,Te.capitalize=No,Te.ceil=Pu,Te.clamp=function(t,e,n){return n===Y&&(n=e,e=Y),n!==Y&&(n=(n=po(n))==n?n:0),e!==Y&&(e=(e=po(e))==e?e:0),$e(po(t),e,n)},Te.clone=function(t){return qe(t,H)},Te.cloneDeep=function(t){return qe(t,F|H)},Te.cloneDeepWith=function(t,e){return qe(t,F|H,e="function"==typeof e?e:Y)},Te.cloneWith=function(t,e){return qe(t,H,e="function"==typeof e?e:Y)},Te.conformsTo=function(t,e){return null==e||tn(t,e,Co(e))},Te.deburr=xo,Te.defaultTo=function(t,e){return null==t||t!=t?e:t},Te.divide=Wu,Te.endsWith=function(t,e,n){t=vo(t),e=gr(e);var r=t.length,i=n=n===Y?r:$e(go(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Te.eq=Ki,Te.escape=function(t){return(t=vo(t))&&se.test(t)?t.replace(oe,Yn):t},Te.escapeRegExp=function(t){return(t=vo(t))&&pe.test(t)?t.replace(de,"\\$&"):t},Te.every=function(t,e,n){var i=Hs(t)?r:rn;return n&&vi(t,e,n)&&(e=Y),i(t,li(e,3))},Te.find=zs,Te.findIndex=Zi,Te.findKey=function(t,e){return f(t,li(e,3),un)},Te.findLast=Ds,Te.findLastIndex=Gi,Te.findLastKey=function(t,e){return f(t,li(e,3),ln)},Te.floor=Ru,Te.forEach=Ri,Te.forEachRight=Xi,Te.forIn=function(t,e){return null==t?t:Ha(t,li(e,3),yo)},Te.forInRight=function(t,e){return null==t?t:Qa(t,li(e,3),yo)},Te.forOwn=function(t,e){return t&&un(t,li(e,3))},Te.forOwnRight=function(t,e){return t&&ln(t,li(e,3))},Te.get=mo,Te.gt=Vs,Te.gte=Fs,Te.has=function(t,e){return null!=t&&fi(t,e,yn)},Te.hasIn=Ao,Te.head=Si,Te.identity=jo,Te.includes=function(t,e,n,r){t=$i(t)?t:wo(t),n=n&&!r?go(n):0;var i=t.length;return n<0&&(n=Na(i+n,0)),uo(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&p(t,e,n)>-1},Te.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:go(n);return i<0&&(i=Na(r+i,0)),p(t,e,i)},Te.inRange=function(t,e,n){return e=ho(e),n===Y?(n=e,e=0):n=ho(n),function(t,e,n){return t>=xa(e,n)&&t<Na(e,n)}(t=po(t),e,n)},Te.invoke=du,Te.isArguments=Js,Te.isArray=Hs,Te.isArrayBuffer=Qs,Te.isArrayLike=$i,Te.isArrayLikeObject=qi,Te.isBoolean=function(t){return!0===t||!1===t||oo(t)&&pn(t)==xt},Te.isBuffer=Ks,Te.isDate=$s,Te.isElement=function(t){return oo(t)&&1===t.nodeType&&!so(t)},Te.isEmpty=function(t){if(null==t)return!0;if($i(t)&&(Hs(t)||"string"==typeof t||"function"==typeof t.splice||Ks(t)||nu(t)||Js(t)))return!t.length;var e=os(t);if(e==Dt||e==Ot)return!t.size;if(Ci(t))return!Xn(t).length;for(var n in t)if(Ho.call(t,n))return!1;return!0},Te.isEqual=function(t,e){return zn(t,e)},Te.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:Y)?n(t,e):Y;return r===Y?zn(t,e,Y,n):!!r},Te.isError=to,Te.isFinite=function(t){return"number"==typeof t&&ya(t)},Te.isFunction=eo,Te.isInteger=no,Te.isLength=ro,Te.isMap=qs,Te.isMatch=function(t,e){return t===e||Dn(t,e,hi(e))},Te.isMatchWith=function(t,e,n){return n="function"==typeof n?n:Y,Dn(t,e,hi(e),n)},Te.isNaN=function(t){return ao(t)&&t!=+t},Te.isNative=function(t){if(as(t))throw new Bo(W);return On(t)},Te.isNil=function(t){return null==t},Te.isNull=function(t){return null===t},Te.isNumber=ao,Te.isObject=io,Te.isObjectLike=oo,Te.isPlainObject=so,Te.isRegExp=tu,Te.isSafeInteger=function(t){return no(t)&&t>=-pt&&t<=pt},Te.isSet=eu,Te.isString=uo,Te.isSymbol=lo,Te.isTypedArray=nu,Te.isUndefined=function(t){return t===Y},Te.isWeakMap=function(t){return oo(t)&&os(t)==Wt},Te.isWeakSet=function(t){return oo(t)&&pn(t)==Rt},Te.join=function(t,e){return null==t?"":ba.call(t,e)},Te.kebabCase=bu,Te.last=Li,Te.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==Y&&(i=(i=go(n))<0?Na(r+i,0):xa(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):d(t,v,i,!0)},Te.lowerCase=wu,Te.lowerFirst=Nu,Te.lt=ru,Te.lte=iu,Te.max=function(t){return t&&t.length?on(t,jo,In):Y},Te.maxBy=function(t,e){return t&&t.length?on(t,li(e,2),In):Y},Te.mean=function(t){return m(t,jo)},Te.meanBy=function(t,e){return m(t,li(e,2))},Te.min=function(t){return t&&t.length?on(t,jo,Vn):Y},Te.minBy=function(t,e){return t&&t.length?on(t,li(e,2),Vn):Y},Te.stubArray=Go,Te.stubFalse=To,Te.stubObject=function(){return{}},Te.stubString=function(){return""},Te.stubTrue=function(){return!0},Te.multiply=Xu,Te.nth=function(t,e){return t&&t.length?Kn(t,go(e)):Y},Te.noConflict=function(){return Mn._===this&&(Mn._=ta),this},Te.noop=Do,Te.now=Bs,Te.pad=function(t,e,n){t=vo(t);var r=(e=go(e))?B(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Vr(ma(i),n)+t+Vr(va(i),n)},Te.padEnd=function(t,e,n){t=vo(t);var r=(e=go(e))?B(t):0;return e&&r<e?t+Vr(e-r,n):t},Te.padStart=function(t,e,n){t=vo(t);var r=(e=go(e))?B(t):0;return e&&r<e?Vr(e-r,n)+t:t},Te.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_a(vo(t).replace(ve,""),e||0)},Te.random=function(t,e,n){if(n&&"boolean"!=typeof n&&vi(t,e,n)&&(e=n=Y),n===Y&&("boolean"==typeof e?(n=e,e=Y):"boolean"==typeof t&&(n=t,t=Y)),t===Y&&e===Y?(t=0,e=1):(t=ho(t),e===Y?(e=t,t=0):e=ho(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ja();return xa(t+i*(e-t+bn("1e-"+((i+"").length-1))),e)}return nr(t,e)},Te.reduce=function(t,e,n){var r=Hs(t)?l:y,i=arguments.length<3;return r(t,li(e,4),n,i,Fa)},Te.reduceRight=function(t,e,n){var r=Hs(t)?c:y,i=arguments.length<3;return r(t,li(e,4),n,i,Ja)},Te.repeat=function(t,e,n){return e=(n?vi(t,e,n):e===Y)?1:go(e),rr(vo(t),e)},Te.replace=function(){var t=arguments,e=vo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Te.result=function(t,e,n){var r=-1,i=(e=br(e,t)).length;for(i||(i=1,t=Y);++r<i;){var o=null==t?Y:t[ji(e[r])];o===Y&&(r=i,o=n),t=eo(o)?o.call(t):o}return t},Te.round=Uu,Te.runInContext=C,Te.sample=function(t){return(Hs(t)?Xe:function(t){return Xe(wo(t))})(t)},Te.size=function(t){if(null==t)return 0;if($i(t))return uo(t)?B(t):t.length;var e=os(t);return e==Dt||e==Ot?t.size:Xn(t).length},Te.snakeCase=xu,Te.some=function(t,e,n){var r=Hs(t)?h:sr;return n&&vi(t,e,n)&&(e=Y),r(t,li(e,3))},Te.sortedIndex=function(t,e){return ur(t,e)},Te.sortedIndexBy=function(t,e,n){return lr(t,e,li(n,2))},Te.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ur(t,e);if(r<n&&Ki(t[r],e))return r}return-1},Te.sortedLastIndex=function(t,e){return ur(t,e,!0)},Te.sortedLastIndexBy=function(t,e,n){return lr(t,e,li(n,2),!0)},Te.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ur(t,e,!0)-1;if(Ki(t[n],e))return n}return-1},Te.startCase=Mu,Te.startsWith=function(t,e,n){return t=vo(t),n=null==n?0:$e(go(n),0,t.length),e=gr(e),t.slice(n,n+e.length)==e},Te.subtract=Vu,Te.sum=function(t){return t&&t.length?b(t,jo):0},Te.sumBy=function(t,e){return t&&t.length?b(t,li(e,2)):0},Te.template=function(t,e,n){var r=Te.templateSettings;n&&vi(t,e,n)&&(e=Y),t=vo(t),e=su({},e,r,ti);var i,o,a=su({},e.imports,r.imports,ti),s=Co(a),u=x(a,s),l=0,c=e.interpolate||Ze,h="__p += '",g=Po((e.escape||Ze).source+"|"+c.source+"|"+(c===ce?Ne:Ze).source+"|"+(e.evaluate||Ze).source+"|$","g"),f="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++mn+"]")+"\n";t.replace(g,function(e,n,r,a,s,u){return r||(r=a),h+=t.slice(l,u).replace(Ge,k),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var d=e.variable;d||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(ee,""):h).replace(ne,"$1").replace(re,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var p=ku(function(){return Oo(s,f+"return "+h).apply(Y,u)});if(p.source=h,to(p))throw p;return p},Te.times=function(t,e){if((t=go(t))<1||t>pt)return[];var n=mt,r=xa(t,mt);e=li(e),t-=mt;for(var i=w(r,e);++n<t;)e(n);return i},Te.toFinite=ho,Te.toInteger=go,Te.toLength=fo,Te.toLower=function(t){return vo(t).toLowerCase()},Te.toNumber=po,Te.toSafeInteger=function(t){return t?$e(go(t),-pt,pt):0===t?t:0},Te.toString=vo,Te.toUpper=function(t){return vo(t).toUpperCase()},Te.trim=function(t,e,n){if((t=vo(t))&&(n||e===Y))return t.replace(Ie,"");if(!t||!(e=gr(e)))return t;var r=O(t),i=O(e);return wr(r,_(r,i),j(r,i)+1).join("")},Te.trimEnd=function(t,e,n){if((t=vo(t))&&(n||e===Y))return t.replace(me,"");if(!t||!(e=gr(e)))return t;var r=O(t);return wr(r,0,j(r,O(e))+1).join("")},Te.trimStart=function(t,e,n){if((t=vo(t))&&(n||e===Y))return t.replace(ve,"");if(!t||!(e=gr(e)))return t;var r=O(t);return wr(r,_(r,O(e))).join("")},Te.truncate=function(t,e){var n=ut,r=lt;if(io(e)){var i="separator"in e?e.separator:i;n="length"in e?go(e.length):n,r="omission"in e?gr(e.omission):r}var o=(t=vo(t)).length;if(z(t)){var a=O(t);o=a.length}if(n>=o)return t;var s=n-B(r);if(s<1)return r;var u=a?wr(a,0,s).join(""):t.slice(0,s);if(i===Y)return u+r;if(a&&(s+=u.length-s),tu(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=Po(i.source,vo(xe.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,h===Y?s:h)}}else if(t.indexOf(gr(i),s)!=s){var g=u.lastIndexOf(i);g>-1&&(u=u.slice(0,g))}return u+r},Te.unescape=function(t){return(t=vo(t))&&ae.test(t)?t.replace(ie,Pn):t},Te.uniqueId=function(t){var e=++Qo;return vo(t)+e},Te.upperCase=_u,Te.upperFirst=ju,Te.each=Ri,Te.eachRight=Xi,Te.first=Si,zo(Te,function(){var t={};return un(Te,function(e,n){Ho.call(Te.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),Te.VERSION="4.17.5",n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Te[t].placeholder=Te}),n(["drop","take"],function(t,e){Be.prototype[t]=function(n){n=n===Y?1:Na(go(n),0);var r=this.__filtered__&&!e?new Be(this):this.clone();return r.__filtered__?r.__takeCount__=xa(n,r.__takeCount__):r.__views__.push({size:xa(n,mt),type:t+(r.__dir__<0?"Right":"")}),r},Be.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),n(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==gt||3==n;Be.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:li(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),n(["head","last"],function(t,e){var n="take"+(e?"Right":"");Be.prototype[t]=function(){return this[n](1).value()[0]}}),n(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Be.prototype[t]=function(){return this.__filtered__?new Be(this):this[n](1)}}),Be.prototype.compact=function(){return this.filter(jo)},Be.prototype.find=function(t){return this.filter(t).head()},Be.prototype.findLast=function(t){return this.reverse().find(t)},Be.prototype.invokeMap=ir(function(t,e){return"function"==typeof t?new Be(this):this.map(function(n){return _n(n,t,e)})}),Be.prototype.reject=function(t){return this.filter(Qi(li(t)))},Be.prototype.slice=function(t,e){t=go(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Be(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==Y&&(n=(e=go(e))<0?n.dropRight(-e):n.take(e-t)),n)},Be.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Be.prototype.toArray=function(){return this.take(mt)},un(Be.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Te[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Te.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof Be,l=a[0],c=s||Hs(e),h=function(t){var e=i.apply(Te,u([t],a));return r&&g?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var g=this.__chain__,f=!!this.__actions__.length,d=o&&!g,p=s&&!f;if(!o&&c){e=p?e:new Be(this);var I=t.apply(e,a);return I.__actions__.push({func:Wi,args:[h],thisArg:Y}),new Le(I,g)}return d&&p?t.apply(this,a):(I=this.thru(h),d?r?I.value()[0]:I.value():I)})}),n(["pop","push","shift","sort","splice","unshift"],function(t){var e=Xo[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Te.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Hs(i)?i:[],t)}return this[n](function(n){return e.apply(Hs(n)?n:[],t)})}}),un(Be.prototype,function(t,e){var n=Te[e];if(n){var r=n.name+"";(Ba[r]||(Ba[r]=[])).push({name:e,func:n})}}),Ba[Wr(Y,q).name]=[{name:"wrapper",func:Y}],Be.prototype.clone=function(){var t=new Be(this.__wrapped__);return t.__actions__=zr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=zr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=zr(this.__views__),t},Be.prototype.reverse=function(){if(this.__filtered__){var t=new Be(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Be.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=xa(e,t+a);break;case"takeRight":t=Na(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,g=0,f=xa(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return vr(t,this.__actions__);var d=[];t:for(;u--&&g<f;){for(var p=-1,I=t[l+=e];++p<h;){var v=c[p],m=v.iteratee,A=v.type,C=m(I);if(A==ft)I=C;else if(!C){if(A==gt)continue t;break t}}d[g++]=I}return d},Te.prototype.at=js,Te.prototype.chain=function(){return Pi(this)},Te.prototype.commit=function(){return new Le(this.value(),this.__chain__)},Te.prototype.next=function(){this.__values__===Y&&(this.__values__=co(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?Y:this.__values__[this.__index__++]}},Te.prototype.plant=function(t){for(var e,n=this;n instanceof Se;){var r=Di(n);r.__index__=0,r.__values__=Y,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Te.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Be){var e=t;return this.__actions__.length&&(e=new Be(this)),(e=e.reverse()).__actions__.push({func:Wi,args:[Oi],thisArg:Y}),new Le(e,this.__chain__)}return this.thru(Oi)},Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=function(){return vr(this.__wrapped__,this.__actions__)},Te.prototype.first=Te.prototype.head,ha&&(Te.prototype[ha]=function(){return this}),Te}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Mn._=Wn,define(function(){return Wn})):jn?((jn.exports=Wn)._=Wn,_n._=Wn):Mn._=Wn}.call(this),function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if("undefined"!=typeof exports){var n,r=require("underscore");try{n=require("jquery")}catch(t){}t(e,exports,r,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,n,r){var i=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,r){n.each(e,function(e,i){n[i]&&(t.prototype[i]=function(t,e,r){switch(t){case 1:return function(){return n[e](this[r])};case 2:return function(t){return n[e](this[r],t)};case 3:return function(t,i){return n[e](this[r],s(t,this),i)};case 4:return function(t,i,o){return n[e](this[r],s(t,this),i,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[r]),n[e].apply(n,t)}}}(e,i,r))})},s=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?u(t):n.isString(t)?function(e){return e.get(t)}:t},u=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},l=e.Events={},c=/\s+/,h=function(t,e,r,i,o){var a,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(a=n.keys(r);s<a.length;s++)e=h(t,e,a[s],r[a[s]],o)}else if(r&&c.test(r))for(a=r.split(c);s<a.length;s++)e=t(e,a[s],i,o);else e=t(e,r,i,o);return e};l.on=function(t,e,n){return g(this,t,e,n)};var g=function(t,e,n,r,i){(t._events=h(f,t._events||{},e,n,{context:r,ctx:t,listening:i}),i)&&((t._listeners||(t._listeners={}))[i.id]=i);return t};l.listenTo=function(t,e,r){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[i];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[i]={obj:t,objId:i,id:s,listeningTo:o,count:0}}return g(t,e,r,this,a),this};var f=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,a=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:o,ctx:o||a,listening:s})}return t};l.off=function(t,e,n){return this._events?(this._events=h(d,this._events,t,e,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(t,e,r){var i=this._listeningTo;if(!i)return this;for(var o=t?[t._listenId]:n.keys(i),a=0;a<o.length;a++){var s=i[o[a]];if(!s)break;s.obj.off(e,r,this)}return this};var d=function(t,e,r,i){if(t){var o,a=0,s=i.context,u=i.listeners;if(e||r||s){for(var l=e?[e]:n.keys(t);a<l.length;a++){var c=t[e=l[a]];if(!c)break;for(var h=[],g=0;g<c.length;g++){var f=c[g];r&&r!==f.callback&&r!==f.callback._callback||s&&s!==f.context?h.push(f):(o=f.listening)&&0==--o.count&&(delete u[o.id],delete o.listeningTo[o.objId])}h.length?t[e]=h:delete t[e]}return t}for(var d=n.keys(u);a<d.length;a++)delete u[(o=u[d[a]]).id],delete o.listeningTo[o.objId]}};l.once=function(t,e,r){var i=h(p,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==r&&(e=void 0),this.on(i,e,r)},l.listenToOnce=function(t,e,r){var i=h(p,{},e,r,n.bind(this.stopListening,this,t));return this.listenTo(t,i)};var p=function(t,e,r,i){if(r){var o=t[e]=n.once(function(){i(e,o),r.apply(this,arguments)});o._callback=r}return t};l.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;r<e;r++)n[r]=arguments[r+1];return h(I,this._events,t,void 0,n),this};var I=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&v(i,r),o&&v(o,[e].concat(r))}return t},v=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}};l.bind=l.on,l.unbind=l.off,n.extend(e,l);var m=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(m.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(null==t)return this;var i;if("object"==typeof t?(i=t,r=e):(i={})[t]=e,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,a=r.silent,s=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,h=this._previousAttributes;for(var g in i)e=i[g],n.isEqual(l[g],e)||s.push(g),n.isEqual(h[g],e)?delete c[g]:c[g]=e,o?delete l[g]:l[g]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=r);for(var f=0;f<s.length;f++)this.trigger("change:"+s[f],this,l[s[f]],r)}if(u)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,r={};for(var i in t){var o=t[i];n.isEqual(e[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;r&&r.call(t.context,e,n,t),e.trigger("sync",e,n,t)},B(this,t),this.sync("read",this,t)},save:function(t,e,r){var i;null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var a=this,s=r.success,u=this.attributes;r.success=function(t){a.attributes=u;var e=r.parse?a.parse(t,r):t;if(o&&(e=n.extend({},i,e)),e&&!a.set(e,r))return!1;s&&s.call(r.context,a,t,r),a.trigger("sync",a,t,r)},B(this,r),i&&o&&(this.attributes=n.extend({},u,i));var l=this.isNew()?"create":r.patch?"patch":"update";"patch"!==l||r.attrs||(r.attrs=i);var c=this.sync(l,this,r);return this.attributes=u,c},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){i&&o(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var a=!1;return this.isNew()?n.defer(t.success):(B(this,t),a=this.sync("delete",this,t)),i||o(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1)}});a(m,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var A=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},C={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1},b=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var r,i=Array(t.length-n),o=e.length;for(r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};n.extend(A.prototype,l,{model:m,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,y))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger("update",this,e)),r?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},C,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var r=!n.isArray(t);t=r?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,a,s=[],u=[],l=[],c=[],h={},g=e.add,f=e.merge,d=e.remove,p=!1,I=this.comparator&&null==i&&!1!==e.sort,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var m=this.get(o);if(m){if(f&&o!==m){var A=this._isModel(o)?o.attributes:o;e.parse&&(A=m.parse(A,e)),m.set(A,e),l.push(m),I&&!p&&(p=m.hasChanged(v))}h[m.cid]||(h[m.cid]=!0,s.push(m)),t[a]=m}else g&&(o=t[a]=this._prepareModel(o,e))&&(u.push(o),this._addReference(o,e),h[o.cid]=!0,s.push(o))}if(d){for(a=0;a<this.length;a++)h[(o=this.models[a]).cid]||c.push(o);c.length&&this._removeModels(c,e)}var y=!1,w=!I&&g&&d;if(s.length&&w?(y=this.length!==s.length||n.some(this.models,function(t,e){return t!==s[e]}),this.models.length=0,b(this.models,s,0),this.length=this.models.length):u.length&&(I&&(p=!0),b(this.models,u,null==i?this.length:i),this.length=this.models.length),p&&this.sort({silent:!0}),!e.silent){for(a=0;a<u.length;a++)null!=i&&(e.index=i+a),(o=u[a]).trigger("add",o,this,e);(p||y)&&this.trigger("sort",this,e),(u.length||c.length||l.length)&&(e.changes={added:u,removed:c,merged:l},this.trigger("update",this,e))}return r?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var r=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===r||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e.call(t.context,r,n,t),r.trigger("sync",r,n,t)},B(this,t),this.sync("read",this,t)},create:function(t,e){var r=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;r||this.add(t,e);var i=this,o=e.success;return e.success=function(t,e,n){r&&i.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?n.clone(e):{}).collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var a=this.modelId(i.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,i.trigger("remove",i,this,e)),n.push(i),this._removeReference(i,e)}}return n},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,r),"change"===t){var i=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});a(A,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var w=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments)},N=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(w.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var i=e.match(N);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,r,i){var o=M[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||L()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var u=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,u&&u.call(i.context,t,e,n)};var l=i.xhr=e.ajax(n.extend(a,i));return r.trigger("request",r,l,i),l};var M={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var _=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,z=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(_.prototype,l,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,function(n){var a=o._extractParameters(t,n);!1!==o.execute(i,a,r)&&(o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),e.history.trigger("route",o,r,a))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(j,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(z,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var Z=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},G=/^[#\/]|\s+$/g,T=/^\/+|\/+$/g,S=/#.*$/;Z.started=!1,n.extend(Z.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(G,"")},start:function(t){if(Z.started)throw new Error("Backbone.history has already been started");if(Z.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(T,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Z.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!Z.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+t;if(t=this.decodeFragment(t.replace(S,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;e.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new Z;m.extend=A.extend=_.extend=w.extend=Z.extend=function(t,e){var r,i=this;return r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e),r.prototype=n.create(i.prototype,t),r.prototype.constructor=r,r.__super__=i.prototype,r};var L=function(){throw new Error('A "url" property or function must be specified')},B=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger("error",t,r,e)}};return e}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.dagre=t()}}(function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(t,e,n){"use strict";var r=t("./lodash"),i=t("./greedy-fas");e.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function o(a){r.has(i,a)||(i[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),function(t){r.has(n,t.w)?e.push(t):o(t.w)}),delete n[a])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},{"./greedy-fas":8,"./lodash":10}],3:[function(t,e,n){var r=t("./lodash"),i=t("./util");function o(t,e,n,r,o,a){var s={width:0,height:0,rank:a,borderType:e},u=o[e][a-1],l=i.addDummyNode(t,"border",s,n);o[e][a]=l,t.setParent(l,r),u&&t.setEdge(u,l,{weight:1})}e.exports=function(t){r.forEach(t.children(),function e(n){var i=t.children(n),a=t.node(n);i.length&&r.forEach(i,e);if(r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)o(t,"borderLeft","_bl",n,a,s),o(t,"borderRight","_br",n,a,s)}})}},{"./lodash":10,"./util":29}],4:[function(t,e,n){"use strict";var r=t("./lodash");function i(t){r.forEach(t.nodes(),function(e){o(t.node(e))}),r.forEach(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function s(t){var e=t.x;t.x=t.y,t.y=e}e.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)})}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"x")&&s(n)})}(t),i(t))}}},{"./lodash":10}],5:[function(t,e,n){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function i(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}e.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return i(e),e},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&i(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},{}],6:[function(t,e,n){var r=t("./lodash"),i=t("./util"),o=t("./graphlib").Graph;e.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(t,e,n){var r;if("function"==typeof t)try{r=t("graphlib")}catch(t){}r||(r=window.graphlib),e.exports=r},{graphlib:31}],8:[function(t,e,n){var r=t("./lodash"),i=t("./graphlib").Graph,o=t("./data/list");e.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,a=0,s=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),s=Math.max(s,n.node(t.v).out+=i),a=Math.max(a,n.node(t.w).in+=i)});var l=r.range(s+a+3).map(function(){return new o}),c=a+1;return r.forEach(n.nodes(),function(t){u(l,c,n.node(t))}),{graph:n,buckets:l,zeroIdx:c}}(t,e||a),l=function(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)s(t,e,n,r);for(;r=o.dequeue();)s(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(s(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(l,function(e){return t.outEdges(e.v,e.w)}),!0)};var a=r.constant(1);function s(t,e,n,i,o){var a=o?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),s=t.node(r.v);o&&a.push({v:r.v,w:r.w}),s.out-=i,u(e,n,s)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,u(e,n,a)}),t.removeNode(i.v),a}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(t,e,n){"use strict";var r=t("./lodash"),i=t("./acyclic"),o=t("./normalize"),a=t("./rank"),s=t("./util").normalizeRanks,u=t("./parent-dummy-chains"),l=t("./util").removeEmptyRanks,c=t("./nesting-graph"),h=t("./add-border-segments"),g=t("./coordinate-system"),f=t("./order"),d=t("./position"),p=t("./util"),I=t("./graphlib").Graph;e.exports=function(t,e){var n=e&&e.debugTiming?p.time:p.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new I({multigraph:!0,compound:!0}),n=M(t.graph());return e.setGraph(r.merge({},m,x(n,v),r.pick(n,A))),r.forEach(t.nodes(),function(n){var i=M(t.node(n));e.setNode(n,r.defaults(x(i,C),y)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=M(t.edge(n));e.setEdge(n,r.merge({},w,x(i,b),r.pick(i,N)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){c.run(t)}),e("    rank",function(){a(p.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};p.addDummyNode(t,"edge-proxy",o,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){l(t)}),e("    nestingGraph.cleanup",function(){c.cleanup(t)}),e("    normalizeRanks",function(){s(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){o.run(t)}),e("    parentDummyChains",function(){u(t)}),e("    addBorderSegments",function(){h(t)}),e("    order",function(){f(t)}),e("    insertSelfEdges",function(){!function(t){var e=p.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,function(e){p.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){g.adjust(t)}),e("    position",function(){d(t)}),e("    positionSelfEdges",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),s=t.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(o.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){o.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){g.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;function l(t){var r=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}r.forEach(t.nodes(),function(e){l(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&l(n)}),e-=s,i-=u,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var o=t.edge(n);r.forEach(o.points,function(t){t.x-=e,t.y-=i}),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)}),a.width=n-e+s,a.height=o-i+u}(t)}),e("    assignNodeIntersects",function(){!function(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(p.intersectRect(o,n)),i.points.push(p.intersectRect(a,r))})}(t)}),e("    reversePoints",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){i.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var v=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},A=["acyclicer","ranker","rankdir","align"],C=["width","height"],y={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},N=["labelpos"];function x(t,e){return r.mapValues(r.pick(t,e),Number)}function M(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(t,e,n){var r;if("function"==typeof t)try{r=t("lodash")}catch(t){}r||(r=window._),e.exports=r},{lodash:51}],11:[function(t,e,n){var r=t("./lodash"),i=t("./util");e.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),function(n){!function n(i,o){var a=t.children(i);a&&a.length&&r.forEach(a,function(t){n(t,o+1)}),e[i]=o}(n,1)}),e}(t),o=r.max(r.values(n))-1,a=2*o+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=a});var s=function(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;r.forEach(t.children(),function(u){!function t(e,n,o,a,s,u,l){var c=e.children(l);if(!c.length)return void(l!==n&&e.setEdge(n,l,{weight:0,minlen:o}));var h=i.addBorderNode(e,"_bt"),g=i.addBorderNode(e,"_bb"),f=e.node(l);e.setParent(h,l);f.borderTop=h;e.setParent(g,l);f.borderBottom=g;r.forEach(c,function(r){t(e,n,o,a,s,u,r);var i=e.node(r),c=i.borderTop?i.borderTop:r,f=i.borderBottom?i.borderBottom:r,d=i.borderTop?a:2*a,p=c!==f?1:s-u[l]+1;e.setEdge(h,c,{weight:d,minlen:p,nestingEdge:!0}),e.setEdge(f,g,{weight:d,minlen:p,nestingEdge:!0})});e.parent(l)||e.setEdge(n,h,{weight:0,minlen:s+u[l]})}(t,e,a,s,o,n,u)}),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}}},{"./lodash":10,"./util":29}],12:[function(t,e,n){"use strict";var r=t("./lodash"),i=t("./util");e.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n,r,o,a=e.v,s=t.node(a).rank,u=e.w,l=t.node(u).rank,c=e.name,h=t.edge(e),g=h.labelRank;if(l===s+1)return;for(t.removeEdge(e),o=0,++s;s<l;++o,++s)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:s},n=i.addDummyNode(t,"edge",r,"_d"),s===g&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(a,n,{weight:h.weight},c),0===o&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,u,{weight:h.weight},c)}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}}},{"./lodash":10,"./util":29}],13:[function(t,e,n){var r=t("../lodash");e.exports=function(t,e,n){var i,o={};r.forEach(n,function(n){for(var r,a,s=t.parent(n);s;){if((r=t.parent(s))?(a=o[r],o[r]=s):(a=i,i=s),a&&a!==s)return void e.setEdge(a,s);s=r}})}},{"../lodash":10}],14:[function(t,e,n){var r=t("../lodash");e.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},{"../lodash":10}],15:[function(t,e,n){var r=t("../lodash"),i=t("../graphlib").Graph;e.exports=function(t,e,n){var o=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var s=t.node(i),u=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(i),a.setParent(i,u||o),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,o=a.edge(n,i),s=r.isUndefined(o)?0:o.weight;a.setEdge(n,i,{weight:t.edge(e).weight+s})}),r.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}},{"../graphlib":7,"../lodash":10}],16:[function(t,e,n){"use strict";var r=t("../lodash");function i(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),o=r.flatten(r.map(e,function(e){return r.chain(t.outEdges(e)).map(function(e){return{pos:i[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=r.map(new Array(s),function(){return 0}),l=0;return r.forEach(o.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;l+=t.weight*n})),l}e.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},{"../lodash":10}],17:[function(t,e,n){"use strict";var r=t("../lodash"),i=t("./init-order"),o=t("./cross-count"),a=t("./sort-subgraph"),s=t("./build-layer-graph"),u=t("./add-subgraph-constraints"),l=t("../graphlib").Graph,c=t("../util");function h(t,e,n){return r.map(e,function(e){return s(t,e,n)})}function g(t,e){var n=new l;r.forEach(t,function(t){var i=t.graph().root,o=a(t,i,n,e);r.forEach(o.vs,function(e,n){t.node(e).order=n}),u(t,n,o.vs)})}function f(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}e.exports=function(t){var e=c.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),a=h(t,r.range(e-1,-1,-1),"outEdges"),s=i(t);f(t,s);for(var u,l=Number.POSITIVE_INFINITY,d=0,p=0;p<4;++d,++p){g(d%2?n:a,d%4>=2),s=c.buildLayerMatrix(t);var I=o(t,s);I<l&&(p=0,u=r.cloneDeep(s),l=I)}f(t,u)}},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(t,e,n){"use strict";var r=t("../lodash");e.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),o=r.map(r.range(i+1),function(){return[]});var a=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(a,function n(i){if(!r.has(e,i)){e[i]=!0;var a=t.node(i);o[a.rank].push(i),r.forEach(t.successors(i),n)}}),o}},{"../lodash":10}],19:[function(t,e,n){"use strict";var r=t("../lodash");e.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,i,o,a;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,o=0,a=0,(n=t).weight&&(o+=n.barycenter*n.weight,a+=n.weight),i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/a,n.weight=a,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.chain(e).filter(function(t){return!t.merged}).map(function(t){return r.pick(t,["vs","i","barycenter","weight"])}).value()}(r.filter(n,function(t){return!t.indegree}))}},{"../lodash":10}],20:[function(t,e,n){var r=t("../lodash"),i=t("./barycenter"),o=t("./resolve-conflicts"),a=t("./sort");e.exports=function t(e,n,s,u){var l=e.children(n),c=e.node(n),h=c?c.borderLeft:void 0,g=c?c.borderRight:void 0,f={};h&&(l=r.filter(l,function(t){return t!==h&&t!==g}));var d=i(e,l);r.forEach(d,function(n){if(e.children(n.v).length){var i=t(e,n.v,s,u);f[n.v]=i,r.has(i,"barycenter")&&(o=n,a=i,r.isUndefined(o.barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a});var p=o(d,s);!function(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(p,f);var I=a(p,u);if(h&&(I.vs=r.flatten([h,I.vs,g],!0),e.predecessors(h).length)){var v=e.node(e.predecessors(h)[0]),m=e.node(e.predecessors(g)[0]);r.has(I,"barycenter")||(I.barycenter=0,I.weight=0),I.barycenter=(I.barycenter*I.weight+v.order+m.order)/(I.weight+2),I.weight+=2}return I}},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(t,e,n){var r=t("../lodash"),i=t("../util");function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}e.exports=function(t,e){var n=i.partition(t,function(t){return r.has(t,"barycenter")}),a=n.lhs,s=r.sortBy(n.rhs,function(t){return-t.i}),u=[],l=0,c=0,h=0;a.sort((g=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:g?e.i-t.i:t.i-e.i})),h=o(u,s,h),r.forEach(a,function(t){h+=t.vs.length,u.push(t.vs),l+=t.barycenter*t.weight,c+=t.weight,h=o(u,s,h)});var g;var f={vs:r.flatten(u,!0)};c&&(f.barycenter=l/c,f.weight=c);return f}},{"../lodash":10,"../util":29}],22:[function(t,e,n){var r=t("./lodash");e.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(o){var a=n;r.forEach(t.children(o),i),e[o]={low:a,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||l>e[i].lim));o=i,i=r;for(;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,u=0,l=a[u],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(l=a[u])!==s&&t.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&t.node(l=a[u+1]).minRank<=r.rank;)u++;l=a[u]}t.setParent(n,l),n=t.successors(n)[0]}})}},{"./lodash":10}],23:[function(t,e,n){"use strict";var r=t("../lodash"),i=t("../graphlib").Graph,o=t("../util");function a(t,e){var n={};return r.reduce(e,function(e,i){var o=0,a=0,s=e.length,l=r.last(i);return r.forEach(i,function(e,c){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),g=h?t.node(h).order:s;(h||e===l)&&(r.forEach(i.slice(a,c+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),a=i.order;!(a<o||g<a)||i.dummy&&t.node(e).dummy||u(n,r,e)})}),a=c+1,o=g)}),i}),n}function s(t,e){var n={};function i(e,i,o,a,s){var l;r.forEach(r.range(i,o),function(i){l=e[i],t.node(l).dummy&&r.forEach(t.predecessors(l),function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>s)&&u(n,e,l)})})}return r.reduce(e,function(e,n){var o,a=-1,s=0;return r.forEach(n,function(r,u){if("border"===t.node(r).dummy){var l=t.predecessors(r);l.length&&(o=t.node(l[0]).order,i(n,s,u,a,o),s=u,a=o)}i(n,s,n.length,o,e.length)}),n}),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function l(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function c(t,e,n,i){var o={},a={},s={};return r.forEach(e,function(t){r.forEach(t,function(t,e){o[t]=t,a[t]=t,s[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var u=i(t);if(u.length)for(var c=((u=r.sortBy(u,function(t){return s[t]})).length-1)/2,h=Math.floor(c),g=Math.ceil(c);h<=g;++h){var f=u[h];a[t]===t&&e<s[f]&&!l(n,t,f)&&(a[f]=t,a[t]=o[t]=o[f],e=s[f])}})}),{root:o,align:a}}function h(t,e,n,o,a){var s={},u=function(t,e,n,o){var a=new i,s=t.graph(),u=function(t,e,n){return function(i,o,a){var s,u=i.node(o),l=i.node(a),c=0;if(c+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=-u.width/2;break;case"r":s=u.width/2}if(s&&(c+=n?s:-s),s=0,c+=(u.dummy?e:t)/2,c+=(l.dummy?e:t)/2,c+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=n?s:-s),s=0,c}}(s.nodesep,s.edgesep,o);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(a.setNode(r),i){var o=n[i],s=a.edge(o,r);a.setEdge(o,r,Math.max(u(t,e,i),s||0))}i=e})}),a}(t,e,n,a),l={};r.forEach(u.nodes(),function t(e){r.has(l,e)||(l[e]=!0,s[e]=r.reduce(u.inEdges(e),function(e,n){return t(n.v),Math.max(e,s[n.v]+u.edge(n))},0))});var c=a?"borderLeft":"borderRight";return r.forEach(u.nodes(),function e(n){if(2!==l[n]){l[n]++;var i=t.node(n),o=r.reduce(u.outEdges(n),function(t,n){return e(n.w),Math.min(t,s[n.w]-u.edge(n))},Number.POSITIVE_INFINITY);o!==Number.POSITIVE_INFINITY&&i.borderType!==c&&(s[n]=Math.max(s[n],o))}}),r.forEach(o,function(t){s[t]=s[n[t]]}),s}function g(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)}),n-i})}function f(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(a){var s,u=n+a,l=t[u];if(l!==e){var c=r.values(l);(s="l"===a?i-r.min(c):o-r.max(c))&&(t[u]=r.mapValues(l,function(t){return t+s}))}})})}function d(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2})}e.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(a(t,n),s(t,n)),u={};r.forEach(["u","d"],function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var a=r.bind("u"===o?t.predecessors:t.successors,t),s=c(t,e,i,a),l=h(t,e,s.root,s.align,"r"===n);"r"===n&&(l=r.mapValues(l,function(t){return-t})),u[o+n]=l})});var l=g(t,u);return f(u,l),d(u,t.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:u,hasConflict:l,verticalAlignment:c,horizontalCompaction:h,alignCoordinates:f,findSmallestWidthAlignment:g,balance:d}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(t,e,n){"use strict";var r=t("../lodash"),i=t("../util"),o=t("./bk").positionX;e.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=o+i/2}),o+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),function(e,n){t.node(n).x=e})}},{"../lodash":10,"../util":29,"./bk":23}],25:[function(t,e,n){"use strict";var r=t("../lodash"),i=t("../graphlib").Graph,o=t("./util").slack;function a(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var a=r.v,s=i===a?r.w:a;t.hasNode(s)||o(e,r)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))})}),t.nodeCount()}function s(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)})}function u(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}e.exports=function(t){var e,n,r=new i({directed:!1}),l=t.nodes()[0],c=t.nodeCount();r.setNode(l,{});for(;a(r,t)<c;)e=s(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),u(r,t,n);return r}},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(t,e,n){"use strict";var r=t("./util").longestPath,i=t("./feasible-tree"),o=t("./network-simplex");e.exports=function(t){switch(t.graph().ranker){case"network-simplex":s(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":a(t);break;default:s(t)}};var a=r;function s(t){o(t)}},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(t,e,n){"use strict";var r=t("../lodash"),i=t("./feasible-tree"),o=t("./util").slack,a=t("./util").longestPath,s=t("../graphlib").alg.preorder,u=t("../graphlib").alg.postorder,l=t("../util").simplify;function c(t){t=l(t),a(t);var e,n=i(t);for(f(n),h(n,t);e=d(n);)I(n,t,e,p(n,t,e))}function h(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=g(t,e,n)}(t,e,n)})}function g(t,e,n){var i=t.node(n).parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,r.forEach(e.nodeEdges(n),function(r){var a,u,l=r.v===n,c=l?r.w:r.v;if(c!==i){var h=l===o,g=e.edge(r).weight;if(s+=h?g:-g,a=n,u=c,t.hasEdge(a,u)){var f=t.edge(n,c).cutvalue;s+=h?-f:f}}}),s}function f(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,i,o,a){var s=i,u=e.node(o);n[o]=!0;r.forEach(e.neighbors(o),function(a){r.has(n,a)||(i=t(e,n,i,a,o))});u.low=s;u.lim=i++;a?u.parent=a:delete u.parent;return i}(t,{},1,e)}function d(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function p(t,e,n){var i=n.v,a=n.w;e.hasEdge(i,a)||(i=n.w,a=n.v);var s=t.node(i),u=t.node(a),l=s,c=!1;s.lim>u.lim&&(l=u,c=!0);var h=r.filter(e.edges(),function(e){return c===v(t,t.node(e.v),l)&&c!==v(t,t.node(e.w),l)});return r.minBy(h,function(t){return o(e,t)})}function I(t,e,n,i){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),f(t),h(t,e),function(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=s(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function v(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}e.exports=c,c.initLowLimValues=f,c.initCutValues=h,c.calcCutValue=g,c.leaveEdge=d,c.enterEdge=p,c.exchangeEdges=I},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(t,e,n){"use strict";var r=t("../lodash");e.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var a=r.minBy(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));a!==Number.POSITIVE_INFINITY&&null!=a||(a=0);return o.rank=a})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},{"../lodash":10}],29:[function(t,e,n){"use strict";var r=t("./lodash"),i=t("./graphlib").Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function a(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}e.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=t.width/2,l=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),n=l*a/s,r=l):(a<0&&(u=-u),n=u,r=u*s/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)}),e},normalizeRanks:function(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})},removeEmptyRanks:function(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%o!=0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return o(t,"border",i,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},{"./graphlib":7,"./lodash":10}],30:[function(t,e,n){e.exports="0.8.1"},{}],31:[function(t,e,n){var r=t("./lib");e.exports={Graph:r.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:r.version}},{"./lib":47,"./lib/alg":38,"./lib/json":48}],32:[function(t,e,n){var r=t("../lodash");e.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),function(t){e=[],o(t),e.length&&i.push(e)}),i}},{"../lodash":49}],33:[function(t,e,n){var r=t("../lodash");e.exports=function(t,e,n){r.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],a={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,i,o,a,s){r.has(o,n)||(o[n]=!0,i||s.push(n),r.each(a(n),function(n){t(e,n,i,o,a,s)}),i&&s.push(n))}(t,e,"post"===n,a,i,o)}),o}},{"../lodash":49}],34:[function(t,e,n){var r=t("./dijkstra"),i=t("../lodash");e.exports=function(t,e,n){return i.transform(t.nodes(),function(i,o){i[o]=r(t,o,e,n)},{})}},{"../lodash":49,"./dijkstra":35}],35:[function(t,e,n){var r=t("../lodash"),i=t("../data/priority-queue");e.exports=function(t,e,n,r){return function(t,e,n,r){var o,a,s={},u=new i,l=function(t){var e=t.v!==o?t.v:t.w,r=s[e],i=n(t),l=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);l<r.distance&&(r.distance=l,r.predecessor=o,u.decrease(e,l))};t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});for(;u.size()>0&&(o=u.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(l);return s}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},{"../data/priority-queue":45,"../lodash":49}],36:[function(t,e,n){var r=t("../lodash"),i=t("./tarjan");e.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},{"../lodash":49,"./tarjan":43}],37:[function(t,e,n){var r=t("../lodash");e.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},{"../lodash":49}],38:[function(t,e,n){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":32,"./dijkstra":35,"./dijkstra-all":34,"./find-cycles":36,"./floyd-warshall":37,"./is-acyclic":39,"./postorder":40,"./preorder":41,"./prim":42,"./tarjan":43,"./topsort":44}],39:[function(t,e,n){var r=t("./topsort");e.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},{"./topsort":44}],40:[function(t,e,n){var r=t("./dfs");e.exports=function(t,e){return r(t,e,"post")}},{"./dfs":33}],41:[function(t,e,n){var r=t("./dfs");e.exports=function(t,e){return r(t,e,"pre")}},{"./dfs":33}],42:[function(t,e,n){var r=t("../lodash"),i=t("../graph"),o=t("../data/priority-queue");e.exports=function(t,e){var n,a=new i,s={},u=new o;function l(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var o=e(t);o<i&&(s[r]=n,u.decrease(r,o))}}if(0===t.nodeCount())return a;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),a.setNode(t)}),u.decrease(t.nodes()[0],0);var c=!1;for(;u.size()>0;){if(n=u.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(n).forEach(l)}return a}},{"../data/priority-queue":45,"../graph":46,"../lodash":49}],43:[function(t,e,n){var r=t("../lodash");e.exports=function(t){var e=0,n=[],i={},o=[];return t.nodes().forEach(function(a){r.has(i,a)||function a(s){var u=i[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(a(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))}),u.lowlink===u.index){var l,c=[];do{l=n.pop(),i[l].onStack=!1,c.push(l)}while(s!==l);o.push(c)}}(a)}),o}},{"../lodash":49}],44:[function(t,e,n){var r=t("../lodash");function i(t){var e={},n={},i=[];if(r.each(t.sinks(),function a(s){if(r.has(n,s))throw new o;r.has(e,s)||(n[s]=!0,e[s]=!0,r.each(t.predecessors(s),a),delete n[s],i.push(s))}),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}e.exports=i,i.CycleException=o},{"../lodash":49}],45:[function(t,e,n){var r=t("../lodash");function i(){this._arr=[],this._keyIndices={}}e.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},{"../lodash":49}],46:[function(t,e,n){"use strict";var r=t("./lodash");e.exports=s;var i="\0",o="\0",a="";function s(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function u(t,e){t[e]?t[e]++:t[e]=1}function l(t,e){--t[e]||delete t[e]}function c(t,e,n,o){var s=""+e,u=""+n;if(!t&&s>u){var l=s;s=u,u=l}return s+a+u+a+(r.isUndefined(o)?i:o)}function h(t,e){return c(t,e.v,e.w,e.name)}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(t){return this._label=t,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return r.keys(this._nodes)},s.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},s.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},s.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},s.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=o,this._children[t]={},this._children[o][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},s.prototype.node=function(t){return this._nodes[t]},s.prototype.hasNode=function(t){return r.has(this._nodes,t)},s.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},s.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=o;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},s.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},s.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==o)return e}},s.prototype.children=function(t){if(r.isUndefined(t)&&(t=o),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===o)return this.nodes();if(this.hasNode(t))return[]}},s.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},s.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},s.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},s.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},s.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,function t(r){var o=n.parent(r);return void 0===o||e.hasNode(o)?(i[r]=o,o):o in i?i[o]:t(o)}(t))}),e},s.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return r.values(this._edgeObjs)},s.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},s.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var s=c(this._isDirected,t,e,n);if(r.has(this._edgeLabels,s))return o&&(this._edgeLabels[s]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=o?i:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};r&&(s.name=r);return s}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[s]=l,u(this._preds[e],t),u(this._sucs[t],e),this._in[e][s]=l,this._out[t][s]=l,this._edgeCount++,this},s.prototype.edge=function(t,e,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,t,e,n);return this._edgeLabels[r]},s.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},s.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],l(this._preds[e],t),l(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},s.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},s.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},s.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},{"./lodash":49}],47:[function(t,e,n){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":46,"./version":50}],48:[function(t,e,n){var r=t("./lodash"),i=t("./graph");e.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}(t),edges:function(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},{"./graph":46,"./lodash":49}],49:[function(t,e,n){e.exports=t(10)},{"/mnt/extra/projects/dagre/lib/lodash.js":10,lodash:51}],50:[function(t,e,n){e.exports="2.1.5"},{}],51:[function(t,e,n){(function(t){(function(){var r,i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="__lodash_hash_undefined__",u=500,l="__lodash_placeholder__",c=1,h=2,g=4,f=1,d=2,p=1,I=2,v=4,m=8,A=16,C=32,y=64,b=128,w=256,N=512,x=30,M="...",_=800,j=16,k=1,z=2,D=1/0,Z=9007199254740991,G=1.7976931348623157e308,T=NaN,S=4294967295,L=S-1,B=S>>>1,O=[["ary",b],["bind",p],["bindKey",I],["curry",m],["curryRight",A],["flip",N],["partial",C],["partialRight",y],["rearg",w]],E="[object Arguments]",Y="[object Array]",P="[object AsyncFunction]",W="[object Boolean]",R="[object Date]",X="[object DOMException]",U="[object Error]",V="[object Function]",F="[object GeneratorFunction]",J="[object Map]",H="[object Number]",Q="[object Null]",K="[object Object]",$="[object Proxy]",q="[object RegExp]",tt="[object Set]",et="[object String]",nt="[object Symbol]",rt="[object Undefined]",it="[object WeakMap]",ot="[object WeakSet]",at="[object ArrayBuffer]",st="[object DataView]",ut="[object Float32Array]",lt="[object Float64Array]",ct="[object Int8Array]",ht="[object Int16Array]",gt="[object Int32Array]",ft="[object Uint8Array]",dt="[object Uint8ClampedArray]",pt="[object Uint16Array]",It="[object Uint32Array]",vt=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,At=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ct=/&(?:amp|lt|gt|quot|#39);/g,yt=/[&<>"']/g,bt=RegExp(Ct.source),wt=RegExp(yt.source),Nt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/,kt=/^\./,zt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Zt=RegExp(Dt.source),Gt=/^\s+|\s+$/g,Tt=/^\s+/,St=/\s+$/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ot=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/\\(\\)?/g,Pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wt=/\w*$/,Rt=/^[-+]0x[0-9a-f]+$/i,Xt=/^0b[01]+$/i,Ut=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,Ft=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ht=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",$t="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qt="[\\ud800-\\udfff]",te="["+$t+"]",ee="["+Kt+"]",ne="\\d+",re="[\\u2700-\\u27bf]",ie="[a-z\\xdf-\\xf6\\xf8-\\xff]",oe="[^\\ud800-\\udfff"+$t+ne+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ae="\\ud83c[\\udffb-\\udfff]",se="[^\\ud800-\\udfff]",ue="(?:\\ud83c[\\udde6-\\uddff]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",ce="[A-Z\\xc0-\\xd6\\xd8-\\xde]",he="(?:"+ie+"|"+oe+")",ge="(?:"+ce+"|"+oe+")",fe="(?:"+ee+"|"+ae+")"+"?",de="[\\ufe0e\\ufe0f]?"+fe+("(?:\\u200d(?:"+[se,ue,le].join("|")+")[\\ufe0e\\ufe0f]?"+fe+")*"),pe="(?:"+[re,ue,le].join("|")+")"+de,Ie="(?:"+[se+ee+"?",ee,ue,le,qt].join("|")+")",ve=RegExp("['’]","g"),me=RegExp(ee,"g"),Ae=RegExp(ae+"(?="+ae+")|"+Ie+de,"g"),Ce=RegExp([ce+"?"+ie+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[te,ce,"$"].join("|")+")",ge+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[te,ce+he,"$"].join("|")+")",ce+"?"+he+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",ne,pe].join("|"),"g"),ye=RegExp("[\\u200d\\ud800-\\udfff"+Kt+"\\ufe0e\\ufe0f]"),be=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,we=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ne=-1,xe={};xe[ut]=xe[lt]=xe[ct]=xe[ht]=xe[gt]=xe[ft]=xe[dt]=xe[pt]=xe[It]=!0,xe[E]=xe[Y]=xe[at]=xe[W]=xe[st]=xe[R]=xe[U]=xe[V]=xe[J]=xe[H]=xe[K]=xe[q]=xe[tt]=xe[et]=xe[it]=!1;var Me={};Me[E]=Me[Y]=Me[at]=Me[st]=Me[W]=Me[R]=Me[ut]=Me[lt]=Me[ct]=Me[ht]=Me[gt]=Me[J]=Me[H]=Me[K]=Me[q]=Me[tt]=Me[et]=Me[nt]=Me[ft]=Me[dt]=Me[pt]=Me[It]=!0,Me[U]=Me[V]=Me[it]=!1;var _e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},je=parseFloat,ke=parseInt,ze="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Ze=ze||De||Function("return this")(),Ge="object"==typeof n&&n&&!n.nodeType&&n,Te=Ge&&"object"==typeof e&&e&&!e.nodeType&&e,Se=Te&&Te.exports===Ge,Le=Se&&ze.process,Be=function(){try{return Le&&Le.binding&&Le.binding("util")}catch(t){}}(),Oe=Be&&Be.isArrayBuffer,Ee=Be&&Be.isDate,Ye=Be&&Be.isMap,Pe=Be&&Be.isRegExp,We=Be&&Be.isSet,Re=Be&&Be.isTypedArray;function Xe(t,e){return t.set(e[0],e[1]),t}function Ue(t,e){return t.add(e),t}function Ve(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Fe(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function He(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Qe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ke(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function $e(t,e){return!!(null==t?0:t.length)&&ln(t,e,0)>-1}function qe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function tn(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function en(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function nn(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function rn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function on(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var an=fn("length");function sn(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function un(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function ln(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):un(t,hn,n)}function cn(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function hn(t){return t!=t}function gn(t,e){var n=null==t?0:t.length;return n?In(t,e)/n:T}function fn(t){return function(e){return null==e?r:e[t]}}function dn(t){return function(e){return null==t?r:t[e]}}function pn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function In(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function vn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function mn(t){return function(e){return t(e)}}function An(t,e){return tn(e,function(e){return t[e]})}function Cn(t,e){return t.has(e)}function yn(t,e){for(var n=-1,r=t.length;++n<r&&ln(e,t[n],0)>-1;);return n}function bn(t,e){for(var n=t.length;n--&&ln(e,t[n],0)>-1;);return n}var wn=dn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Nn=dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xn(t){return"\\"+_e[t]}function Mn(t){return ye.test(t)}function _n(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function jn(t,e){return function(n){return t(e(n))}}function kn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==l||(t[n]=l,o[i++]=n)}return o}function zn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Dn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Zn(t){return Mn(t)?function(t){var e=Ae.lastIndex=0;for(;Ae.test(t);)++e;return e}(t):an(t)}function Gn(t){return Mn(t)?function(t){return t.match(Ae)||[]}(t):function(t){return t.split("")}(t)}var Tn=dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Sn=function t(e){var n,Kt=(e=null==e?Ze:Sn.defaults(Ze.Object(),e,Sn.pick(Ze,we))).Array,$t=e.Date,qt=e.Error,te=e.Function,ee=e.Math,ne=e.Object,re=e.RegExp,ie=e.String,oe=e.TypeError,ae=Kt.prototype,se=te.prototype,ue=ne.prototype,le=e["__core-js_shared__"],ce=se.toString,he=ue.hasOwnProperty,ge=0,fe=(n=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",de=ue.toString,pe=ce.call(ne),Ie=Ze._,Ae=re("^"+ce.call(he).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=Se?e.Buffer:r,_e=e.Symbol,ze=e.Uint8Array,De=ye?ye.allocUnsafe:r,Ge=jn(ne.getPrototypeOf,ne),Te=ne.create,Le=ue.propertyIsEnumerable,Be=ae.splice,an=_e?_e.isConcatSpreadable:r,dn=_e?_e.iterator:r,Ln=_e?_e.toStringTag:r,Bn=function(){try{var t=Wo(ne,"defineProperty");return t({},"",{}),t}catch(t){}}(),On=e.clearTimeout!==Ze.clearTimeout&&e.clearTimeout,En=$t&&$t.now!==Ze.Date.now&&$t.now,Yn=e.setTimeout!==Ze.setTimeout&&e.setTimeout,Pn=ee.ceil,Wn=ee.floor,Rn=ne.getOwnPropertySymbols,Xn=ye?ye.isBuffer:r,Un=e.isFinite,Vn=ae.join,Fn=jn(ne.keys,ne),Jn=ee.max,Hn=ee.min,Qn=$t.now,Kn=e.parseInt,$n=ee.random,qn=ae.reverse,tr=Wo(e,"DataView"),er=Wo(e,"Map"),nr=Wo(e,"Promise"),rr=Wo(e,"Set"),ir=Wo(e,"WeakMap"),or=Wo(ne,"create"),ar=ir&&new ir,sr={},ur=fa(tr),lr=fa(er),cr=fa(nr),hr=fa(rr),gr=fa(ir),fr=_e?_e.prototype:r,dr=fr?fr.valueOf:r,pr=fr?fr.toString:r;function Ir(t){if(zs(t)&&!As(t)&&!(t instanceof Cr)){if(t instanceof Ar)return t;if(he.call(t,"__wrapped__"))return da(t)}return new Ar(t)}var vr=function(){function t(){}return function(e){if(!ks(e))return{};if(Te)return Te(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function mr(){}function Ar(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Cr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=S,this.__views__=[]}function yr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wr;++e<n;)this.add(t[e])}function xr(t){var e=this.__data__=new br(t);this.size=e.size}function Mr(t,e){var n=As(t),r=!n&&ms(t),i=!n&&!r&&ws(t),o=!n&&!r&&!i&&Os(t),a=n||r||i||o,s=a?vn(t.length,ie):[],u=s.length;for(var l in t)!e&&!he.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ho(l,u))||s.push(l);return s}function _r(t){var e=t.length;return e?t[Ni(0,e-1)]:r}function jr(t,e){return ca(oo(t),Br(e,0,t.length))}function kr(t){return ca(oo(t))}function zr(t,e,n){(n===r||ps(t[e],n))&&(n!==r||e in t)||Sr(t,e,n)}function Dr(t,e,n){var i=t[e];he.call(t,e)&&ps(i,n)&&(n!==r||e in t)||Sr(t,e,n)}function Zr(t,e){for(var n=t.length;n--;)if(ps(t[n][0],e))return n;return-1}function Gr(t,e,n,r){return Wr(t,function(t,i,o){e(r,t,n(t),o)}),r}function Tr(t,e){return t&&ao(e,au(e),t)}function Sr(t,e,n){"__proto__"==e&&Bn?Bn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Lr(t,e){for(var n=-1,i=e.length,o=Kt(i),a=null==t;++n<i;)o[n]=a?r:eu(t,e[n]);return o}function Br(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function Or(t,e,n,i,o,a){var s,u=e&c,l=e&h,f=e&g;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!ks(t))return t;var d=As(t);if(d){if(s=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&he.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return oo(t,s)}else{var p=Uo(t),I=p==V||p==F;if(ws(t))return qi(t,u);if(p==K||p==E||I&&!o){if(s=l||I?{}:Fo(t),!u)return l?function(t,e){return ao(t,Xo(t),e)}(t,function(t,e){return t&&ao(e,su(e),t)}(s,t)):function(t,e){return ao(t,Ro(t),e)}(t,Tr(s,t))}else{if(!Me[p])return o?t:{};s=function(t,e,n,r){var i,o,a,s=t.constructor;switch(e){case at:return to(t);case W:case R:return new s(+t);case st:return function(t,e){var n=e?to(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case ut:case lt:case ct:case ht:case gt:case ft:case dt:case pt:case It:return eo(t,r);case J:return function(t,e,n){return nn(e?n(_n(t),c):_n(t),Xe,new t.constructor)}(t,r,n);case H:case et:return new s(t);case q:return(a=new(o=t).constructor(o.source,Wt.exec(o))).lastIndex=o.lastIndex,a;case tt:return function(t,e,n){return nn(e?n(zn(t),c):zn(t),Ue,new t.constructor)}(t,r,n);case nt:return i=t,dr?ne(dr.call(i)):{}}}(t,p,Or,u)}}a||(a=new xr);var v=a.get(t);if(v)return v;a.set(t,s);var m=d?r:(f?l?So:To:l?su:au)(t);return Je(m||t,function(r,i){m&&(r=t[i=r]),Dr(s,i,Or(r,e,n,i,t,a))}),s}function Er(t,e,n){var i=n.length;if(null==t)return!i;for(t=ne(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function Yr(t,e,n){if("function"!=typeof t)throw new oe(a);return aa(function(){t.apply(r,n)},e)}function Pr(t,e,n,r){var o=-1,a=$e,s=!0,u=t.length,l=[],c=e.length;if(!u)return l;n&&(e=tn(e,mn(n))),r?(a=qe,s=!1):e.length>=i&&(a=Cn,s=!1,e=new Nr(e));t:for(;++o<u;){var h=t[o],g=null==n?h:n(h);if(h=r||0!==h?h:0,s&&g==g){for(var f=c;f--;)if(e[f]===g)continue t;l.push(h)}else a(e,g,r)||l.push(h)}return l}Ir.templateSettings={escape:Nt,evaluate:xt,interpolate:Mt,variable:"",imports:{_:Ir}},Ir.prototype=mr.prototype,Ir.prototype.constructor=Ir,Ar.prototype=vr(mr.prototype),Ar.prototype.constructor=Ar,Cr.prototype=vr(mr.prototype),Cr.prototype.constructor=Cr,yr.prototype.clear=function(){this.__data__=or?or(null):{},this.size=0},yr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yr.prototype.get=function(t){var e=this.__data__;if(or){var n=e[t];return n===s?r:n}return he.call(e,t)?e[t]:r},yr.prototype.has=function(t){var e=this.__data__;return or?e[t]!==r:he.call(e,t)},yr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=or&&e===r?s:e,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=Zr(e,t);return!(n<0||(n==e.length-1?e.pop():Be.call(e,n,1),--this.size,0))},br.prototype.get=function(t){var e=this.__data__,n=Zr(e,t);return n<0?r:e[n][1]},br.prototype.has=function(t){return Zr(this.__data__,t)>-1},br.prototype.set=function(t,e){var n=this.__data__,r=Zr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new yr,map:new(er||br),string:new yr}},wr.prototype.delete=function(t){var e=Yo(this,t).delete(t);return this.size-=e?1:0,e},wr.prototype.get=function(t){return Yo(this,t).get(t)},wr.prototype.has=function(t){return Yo(this,t).has(t)},wr.prototype.set=function(t,e){var n=Yo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Nr.prototype.add=Nr.prototype.push=function(t){return this.__data__.set(t,s),this},Nr.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.clear=function(){this.__data__=new br,this.size=0},xr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xr.prototype.get=function(t){return this.__data__.get(t)},xr.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!er||r.length<i-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(t,e),this.size=n.size,this};var Wr=lo(Qr),Rr=lo(Kr,!0);function Xr(t,e){var n=!0;return Wr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ur(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(u===r?s==s&&!Bs(s):n(s,u)))var u=s,l=a}return l}function Vr(t,e){var n=[];return Wr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Fr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Jo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Fr(s,e-1,n,r,i):en(i,s):r||(i[i.length]=s)}return i}var Jr=co(),Hr=co(!0);function Qr(t,e){return t&&Jr(t,e,au)}function Kr(t,e){return t&&Hr(t,e,au)}function $r(t,e){return Ke(e,function(e){return Ms(t[e])})}function qr(t,e){for(var n=0,i=(e=Hi(e,t)).length;null!=t&&n<i;)t=t[ga(e[n++])];return n&&n==i?t:r}function ti(t,e,n){var r=e(t);return As(t)?r:en(r,n(t))}function ei(t){return null==t?t===r?rt:Q:Ln&&Ln in ne(t)?function(t){var e=he.call(t,Ln),n=t[Ln];try{t[Ln]=r;var i=!0}catch(t){}var o=de.call(t);return i&&(e?t[Ln]=n:delete t[Ln]),o}(t):function(t){return de.call(t)}(t)}function ni(t,e){return t>e}function ri(t,e){return null!=t&&he.call(t,e)}function ii(t,e){return null!=t&&e in ne(t)}function oi(t,e,n){for(var i=n?qe:$e,o=t[0].length,a=t.length,s=a,u=Kt(a),l=1/0,c=[];s--;){var h=t[s];s&&e&&(h=tn(h,mn(e))),l=Hn(h.length,l),u[s]=!n&&(e||o>=120&&h.length>=120)?new Nr(s&&h):r}h=t[0];var g=-1,f=u[0];t:for(;++g<o&&c.length<l;){var d=h[g],p=e?e(d):d;if(d=n||0!==d?d:0,!(f?Cn(f,p):i(c,p,n))){for(s=a;--s;){var I=u[s];if(!(I?Cn(I,p):i(t[s],p,n)))continue t}f&&f.push(p),c.push(d)}}return c}function ai(t,e,n){var i=null==(t=ia(t,e=Hi(e,t)))?t:t[ga(xa(e))];return null==i?r:Ve(i,t,n)}function si(t){return zs(t)&&ei(t)==E}function ui(t,e,n,i,o){return t===e||(null==t||null==e||!zs(t)&&!zs(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=As(t),u=As(e),l=s?Y:Uo(t),c=u?Y:Uo(e),h=(l=l==E?K:l)==K,g=(c=c==E?K:c)==K,p=l==c;if(p&&ws(t)){if(!ws(e))return!1;s=!0,h=!1}if(p&&!h)return a||(a=new xr),s||Os(t)?Zo(t,e,n,i,o,a):function(t,e,n,r,i,o,a){switch(n){case st:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case at:return!(t.byteLength!=e.byteLength||!o(new ze(t),new ze(e)));case W:case R:case H:return ps(+t,+e);case U:return t.name==e.name&&t.message==e.message;case q:case et:return t==e+"";case J:var s=_n;case tt:var u=r&f;if(s||(s=zn),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=d,a.set(t,e);var c=Zo(s(t),s(e),r,i,o,a);return a.delete(t),c;case nt:if(dr)return dr.call(t)==dr.call(e)}return!1}(t,e,l,n,i,o,a);if(!(n&f)){var I=h&&he.call(t,"__wrapped__"),v=g&&he.call(e,"__wrapped__");if(I||v){var m=I?t.value():t,A=v?e.value():e;return a||(a=new xr),o(m,A,n,i,a)}}return!!p&&(a||(a=new xr),function(t,e,n,i,o,a){var s=n&f,u=To(t),l=u.length,c=To(e).length;if(l!=c&&!s)return!1;for(var h=l;h--;){var g=u[h];if(!(s?g in e:he.call(e,g)))return!1}var d=a.get(t);if(d&&a.get(e))return d==e;var p=!0;a.set(t,e),a.set(e,t);for(var I=s;++h<l;){g=u[h];var v=t[g],m=e[g];if(i)var A=s?i(m,v,g,e,t,a):i(v,m,g,t,e,a);if(!(A===r?v===m||o(v,m,n,i,a):A)){p=!1;break}I||(I="constructor"==g)}if(p&&!I){var C=t.constructor,y=e.constructor;C!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof C&&C instanceof C&&"function"==typeof y&&y instanceof y)&&(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,i,o,a))}(t,e,n,i,ui,o))}function li(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=ne(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var l=(u=n[o])[0],c=t[l],h=u[1];if(s&&u[2]){if(c===r&&!(l in t))return!1}else{var g=new xr;if(i)var p=i(c,h,l,t,e,g);if(!(p===r?ui(h,c,f|d,i,g):p))return!1}}return!0}function ci(t){return!(!ks(t)||fe&&fe in t)&&(Ms(t)?Ae:Ut).test(fa(t))}function hi(t){return"function"==typeof t?t:null==t?Zu:"object"==typeof t?As(t)?vi(t[0],t[1]):Ii(t):Pu(t)}function gi(t){if(!ta(t))return Fn(t);var e=[];for(var n in ne(t))he.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fi(t){if(!ks(t))return function(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}(t);var e=ta(t),n=[];for(var r in t)("constructor"!=r||!e&&he.call(t,r))&&n.push(r);return n}function di(t,e){return t<e}function pi(t,e){var n=-1,r=ys(t)?Kt(t.length):[];return Wr(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Ii(t){var e=Po(t);return 1==e.length&&e[0][2]?na(e[0][0],e[0][1]):function(n){return n===t||li(n,t,e)}}function vi(t,e){return Ko(t)&&ea(e)?na(ga(t),e):function(n){var i=eu(n,t);return i===r&&i===e?nu(n,t):ui(e,i,f|d)}}function mi(t,e,n,i,o){t!==e&&Jr(e,function(a,s){if(ks(a))o||(o=new xr),function(t,e,n,i,o,a,s){var u=t[n],l=e[n],c=s.get(l);if(c)zr(t,n,c);else{var h=a?a(u,l,n+"",t,e,s):r,g=h===r;if(g){var f=As(l),d=!f&&ws(l),p=!f&&!d&&Os(l);h=l,f||d||p?As(u)?h=u:bs(u)?h=oo(u):d?(g=!1,h=qi(l,!0)):p?(g=!1,h=eo(l,!0)):h=[]:Gs(l)||ms(l)?(h=u,ms(u)?h=Vs(u):(!ks(u)||i&&Ms(u))&&(h=Fo(l))):g=!1}g&&(s.set(l,h),o(h,l,i,a,s),s.delete(l)),zr(t,n,h)}}(t,e,s,n,mi,i,o);else{var u=i?i(t[s],a,s+"",t,e,o):r;u===r&&(u=a),zr(t,s,u)}},su)}function Ai(t,e){var n=t.length;if(n)return Ho(e+=e<0?n:0,n)?t[e]:r}function Ci(t,e,n){var r=-1;return e=tn(e.length?e:[Zu],mn(Eo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(pi(t,function(t,n,i){return{criteria:tn(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=no(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function yi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=qr(t,a);n(s,a)&&ki(o,Hi(a,t),s)}return o}function bi(t,e,n,r){var i=r?cn:ln,o=-1,a=e.length,s=t;for(t===e&&(e=oo(e)),n&&(s=tn(t,mn(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Be.call(s,u,1),Be.call(t,u,1);return t}function wi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Ho(i)?Be.call(t,i,1):Pi(t,i)}}return t}function Ni(t,e){return t+Wn($n()*(e-t+1))}function xi(t,e){var n="";if(!t||e<1||e>Z)return n;do{e%2&&(n+=t),(e=Wn(e/2))&&(t+=t)}while(e);return n}function Mi(t,e){return sa(ra(t,e,Zu),t+"")}function _i(t){return _r(pu(t))}function ji(t,e){var n=pu(t);return ca(n,Br(e,0,n.length))}function ki(t,e,n,i){if(!ks(t))return t;for(var o=-1,a=(e=Hi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var l=ga(e[o]),c=n;if(o!=s){var h=u[l];(c=i?i(h,l,u):r)===r&&(c=ks(h)?h:Ho(e[o+1])?[]:{})}Dr(u,l,c),u=u[l]}return t}var zi=ar?function(t,e){return ar.set(t,e),t}:Zu,Di=Bn?function(t,e){return Bn(t,"toString",{configurable:!0,enumerable:!1,value:ku(e),writable:!0})}:Zu;function Zi(t){return ca(pu(t))}function Gi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Kt(i);++r<i;)o[r]=t[r+e];return o}function Ti(t,e){var n;return Wr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Si(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=B){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Bs(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Li(t,e,Zu,n)}function Li(t,e,n,i){e=n(e);for(var o=0,a=null==t?0:t.length,s=e!=e,u=null===e,l=Bs(e),c=e===r;o<a;){var h=Wn((o+a)/2),g=n(t[h]),f=g!==r,d=null===g,p=g==g,I=Bs(g);if(s)var v=i||p;else v=c?p&&(i||f):u?p&&f&&(i||!d):l?p&&f&&!d&&(i||!I):!d&&!I&&(i?g<=e:g<e);v?o=h+1:a=h}return Hn(a,L)}function Bi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!ps(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Oi(t){return"number"==typeof t?t:Bs(t)?T:+t}function Ei(t){if("string"==typeof t)return t;if(As(t))return tn(t,Ei)+"";if(Bs(t))return pr?pr.call(t):"";var e=t+"";return"0"==e&&1/t==-D?"-0":e}function Yi(t,e,n){var r=-1,o=$e,a=t.length,s=!0,u=[],l=u;if(n)s=!1,o=qe;else if(a>=i){var c=e?null:Mo(t);if(c)return zn(c);s=!1,o=Cn,l=new Nr}else l=e?[]:u;t:for(;++r<a;){var h=t[r],g=e?e(h):h;if(h=n||0!==h?h:0,s&&g==g){for(var f=l.length;f--;)if(l[f]===g)continue t;e&&l.push(g),u.push(h)}else o(l,g,n)||(l!==u&&l.push(g),u.push(h))}return u}function Pi(t,e){return null==(t=ia(t,e=Hi(e,t)))||delete t[ga(xa(e))]}function Wi(t,e,n,r){return ki(t,e,n(qr(t,e)),r)}function Ri(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Gi(t,r?0:o,r?o+1:i):Gi(t,r?o+1:0,r?i:o)}function Xi(t,e){var n=t;return n instanceof Cr&&(n=n.value()),nn(e,function(t,e){return e.func.apply(e.thisArg,en([t],e.args))},n)}function Ui(t,e,n){var r=t.length;if(r<2)return r?Yi(t[0]):[];for(var i=-1,o=Kt(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Pr(o[i]||a,t[s],e,n));return Yi(Fr(o,1),e,n)}function Vi(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var u=i<a?e[i]:r;n(s,t[i],u)}return s}function Fi(t){return bs(t)?t:[]}function Ji(t){return"function"==typeof t?t:Zu}function Hi(t,e){return As(t)?t:Ko(t,e)?[t]:ha(Fs(t))}var Qi=Mi;function Ki(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Gi(t,e,n)}var $i=On||function(t){return Ze.clearTimeout(t)};function qi(t,e){if(e)return t.slice();var n=t.length,r=De?De(n):new t.constructor(n);return t.copy(r),r}function to(t){var e=new t.constructor(t.byteLength);return new ze(e).set(new ze(t)),e}function eo(t,e){var n=e?to(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function no(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=Bs(t),s=e!==r,u=null===e,l=e==e,c=Bs(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function ro(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=Jn(o-a,0),c=Kt(u+l),h=!r;++s<u;)c[s]=e[s];for(;++i<a;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function io(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=Jn(o-s,0),h=Kt(c+l),g=!r;++i<c;)h[i]=t[i];for(var f=i;++u<l;)h[f+u]=e[u];for(;++a<s;)(g||i<o)&&(h[f+n[a]]=t[i++]);return h}function oo(t,e){var n=-1,r=t.length;for(e||(e=Kt(r));++n<r;)e[n]=t[n];return e}function ao(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=i?i(n[u],t[u],u,n,t):r;l===r&&(l=t[u]),o?Sr(n,u,l):Dr(n,u,l)}return n}function so(t,e){return function(n,r){var i=As(n)?Fe:Gr,o=e?e():{};return i(n,t,Eo(r,2),o)}}function uo(t){return Mi(function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&Qo(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=ne(e);++i<o;){var u=n[i];u&&t(e,u,i,a)}return e})}function lo(t,e){return function(n,r){if(null==n)return n;if(!ys(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=ne(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function co(t){return function(e,n,r){for(var i=-1,o=ne(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function ho(t){return function(e){var n=Mn(e=Fs(e))?Gn(e):r,i=n?n[0]:e.charAt(0),o=n?Ki(n,1).join(""):e.slice(1);return i[t]()+o}}function go(t){return function(e){return nn(Mu(mu(e).replace(ve,"")),t,"")}}function fo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vr(t.prototype),r=t.apply(n,e);return ks(r)?r:n}}function po(t){return function(e,n,i){var o=ne(e);if(!ys(e)){var a=Eo(n,3);e=au(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function Io(t){return Go(function(e){var n=e.length,i=n,o=Ar.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new oe(a);if(o&&!u&&"wrapper"==Bo(s))var u=new Ar([],!0)}for(i=u?i:n;++i<n;){var l=Bo(s=e[i]),c="wrapper"==l?Lo(s):r;u=c&&$o(c[0])&&c[1]==(b|m|C|w)&&!c[4].length&&1==c[9]?u[Bo(c[0])].apply(u,c[3]):1==s.length&&$o(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&As(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function vo(t,e,n,i,o,a,s,u,l,c){var h=e&b,g=e&p,f=e&I,d=e&(m|A),v=e&N,C=f?r:fo(t);return function p(){for(var I=arguments.length,m=Kt(I),A=I;A--;)m[A]=arguments[A];if(d)var y=Oo(p),b=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(m,y);if(i&&(m=ro(m,i,o,d)),a&&(m=io(m,a,s,d)),I-=b,d&&I<c){var w=kn(m,y);return No(t,e,vo,p.placeholder,n,m,w,u,l,c-I)}var N=g?n:this,x=f?N[t]:t;return I=m.length,u?m=function(t,e){for(var n=t.length,i=Hn(e.length,n),o=oo(t);i--;){var a=e[i];t[i]=Ho(a,n)?o[a]:r}return t}(m,u):v&&I>1&&m.reverse(),h&&l<I&&(m.length=l),this&&this!==Ze&&this instanceof p&&(x=C||fo(x)),x.apply(N,m)}}function mo(t,e){return function(n,r){return function(t,e,n,r){return Qr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function Ao(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=Ei(n),i=Ei(i)):(n=Oi(n),i=Oi(i)),o=t(n,i)}return o}}function Co(t){return Go(function(e){return e=tn(e,mn(Eo())),Mi(function(n){var r=this;return t(e,function(t){return Ve(t,r,n)})})})}function yo(t,e){var n=(e=e===r?" ":Ei(e)).length;if(n<2)return n?xi(e,t):e;var i=xi(e,Pn(t/Zn(e)));return Mn(e)?Ki(Gn(i),0,t).join(""):i.slice(0,t)}function bo(t){return function(e,n,i){return i&&"number"!=typeof i&&Qo(e,n,i)&&(n=i=r),e=Ws(e),n===r?(n=e,e=0):n=Ws(n),function(t,e,n,r){for(var i=-1,o=Jn(Pn((e-t)/(n||1)),0),a=Kt(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,i=i===r?e<n?1:-1:Ws(i),t)}}function wo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Us(e),n=Us(n)),t(e,n)}}function No(t,e,n,i,o,a,s,u,l,c){var h=e&m;e|=h?C:y,(e&=~(h?y:C))&v||(e&=~(p|I));var g=[t,e,o,h?a:r,h?s:r,h?r:a,h?r:s,u,l,c],f=n.apply(r,g);return $o(t)&&oa(f,g),f.placeholder=i,ua(f,t,e)}function xo(t){var e=ee[t];return function(t,n){if(t=Us(t),n=null==n?0:Hn(Rs(n),292)){var r=(Fs(t)+"e").split("e");return+((r=(Fs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Mo=rr&&1/zn(new rr([,-0]))[1]==D?function(t){return new rr(t)}:Bu;function _o(t){return function(e){var n=Uo(e);return n==J?_n(e):n==tt?Dn(e):function(t,e){return tn(e,function(e){return[e,t[e]]})}(e,t(e))}}function jo(t,e,n,i,o,s,u,c){var h=e&I;if(!h&&"function"!=typeof t)throw new oe(a);var g=i?i.length:0;if(g||(e&=~(C|y),i=o=r),u=u===r?u:Jn(Rs(u),0),c=c===r?c:Rs(c),g-=o?o.length:0,e&y){var f=i,d=o;i=o=r}var N=h?r:Lo(t),x=[t,e,n,i,o,f,d,s,u,c];if(N&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(p|I|b),a=r==b&&n==m||r==b&&n==w&&t[7].length<=e[8]||r==(b|w)&&e[7].length<=e[8]&&n==m;if(!o&&!a)return t;r&p&&(t[2]=e[2],i|=n&p?0:v);var s=e[3];if(s){var u=t[3];t[3]=u?ro(u,s,e[4]):s,t[4]=u?kn(t[3],l):e[4]}(s=e[5])&&(u=t[5],t[5]=u?io(u,s,e[6]):s,t[6]=u?kn(t[5],l):e[6]),(s=e[7])&&(t[7]=s),r&b&&(t[8]=null==t[8]?e[8]:Hn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(x,N),t=x[0],e=x[1],n=x[2],i=x[3],o=x[4],!(c=x[9]=x[9]===r?h?0:t.length:Jn(x[9]-g,0))&&e&(m|A)&&(e&=~(m|A)),e&&e!=p)M=e==m||e==A?function(t,e,n){var i=fo(t);return function o(){for(var a=arguments.length,s=Kt(a),u=a,l=Oo(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:kn(s,l);return(a-=c.length)<n?No(t,e,vo,o.placeholder,r,s,c,r,r,n-a):Ve(this&&this!==Ze&&this instanceof o?i:t,this,s)}}(t,e,c):e!=C&&e!=(p|C)||o.length?vo.apply(r,x):function(t,e,n,r){var i=e&p,o=fo(t);return function e(){for(var a=-1,s=arguments.length,u=-1,l=r.length,c=Kt(l+s),h=this&&this!==Ze&&this instanceof e?o:t;++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++a];return Ve(h,i?n:this,c)}}(t,e,n,i);else var M=function(t,e,n){var r=e&p,i=fo(t);return function e(){return(this&&this!==Ze&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return ua((N?zi:oa)(M,x),t,e)}function ko(t,e,n,i){return t===r||ps(t,ue[n])&&!he.call(i,n)?e:t}function zo(t,e,n,i,o,a){return ks(t)&&ks(e)&&(a.set(e,t),mi(t,e,r,zo,a),a.delete(e)),t}function Do(t){return Gs(t)?r:t}function Zo(t,e,n,i,o,a){var s=n&f,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var h=-1,g=!0,p=n&d?new Nr:r;for(a.set(t,e),a.set(e,t);++h<u;){var I=t[h],v=e[h];if(i)var m=s?i(v,I,h,e,t,a):i(I,v,h,t,e,a);if(m!==r){if(m)continue;g=!1;break}if(p){if(!on(e,function(t,e){if(!Cn(p,e)&&(I===t||o(I,t,n,i,a)))return p.push(e)})){g=!1;break}}else if(I!==v&&!o(I,v,n,i,a)){g=!1;break}}return a.delete(t),a.delete(e),g}function Go(t){return sa(ra(t,r,Ca),t+"")}function To(t){return ti(t,au,Ro)}function So(t){return ti(t,su,Xo)}var Lo=ar?function(t){return ar.get(t)}:Bu;function Bo(t){for(var e=t.name+"",n=sr[e],r=he.call(sr,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Oo(t){return(he.call(Ir,"placeholder")?Ir:t).placeholder}function Eo(){var t=Ir.iteratee||Gu;return t=t===Gu?hi:t,arguments.length?t(arguments[0],arguments[1]):t}function Yo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Po(t){for(var e=au(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ea(i)]}return e}function Wo(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return ci(n)?n:r}var Ro=Rn?function(t){return null==t?[]:(t=ne(t),Ke(Rn(t),function(e){return Le.call(t,e)}))}:Xu,Xo=Rn?function(t){for(var e=[];t;)en(e,Ro(t)),t=Ge(t);return e}:Xu,Uo=ei;function Vo(t,e,n){for(var r=-1,i=(e=Hi(e,t)).length,o=!1;++r<i;){var a=ga(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&js(i)&&Ho(a,i)&&(As(t)||ms(t))}function Fo(t){return"function"!=typeof t.constructor||ta(t)?{}:vr(Ge(t))}function Jo(t){return As(t)||ms(t)||!!(an&&t&&t[an])}function Ho(t,e){return!!(e=null==e?Z:e)&&("number"==typeof t||Ft.test(t))&&t>-1&&t%1==0&&t<e}function Qo(t,e,n){if(!ks(n))return!1;var r=typeof e;return!!("number"==r?ys(n)&&Ho(e,n.length):"string"==r&&e in n)&&ps(n[e],t)}function Ko(t,e){if(As(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Bs(t))||jt.test(t)||!_t.test(t)||null!=e&&t in ne(e)}function $o(t){var e=Bo(t),n=Ir[e];if("function"!=typeof n||!(e in Cr.prototype))return!1;if(t===n)return!0;var r=Lo(n);return!!r&&t===r[0]}(tr&&Uo(new tr(new ArrayBuffer(1)))!=st||er&&Uo(new er)!=J||nr&&"[object Promise]"!=Uo(nr.resolve())||rr&&Uo(new rr)!=tt||ir&&Uo(new ir)!=it)&&(Uo=function(t){var e=ei(t),n=e==K?t.constructor:r,i=n?fa(n):"";if(i)switch(i){case ur:return st;case lr:return J;case cr:return"[object Promise]";case hr:return tt;case gr:return it}return e});var qo=le?Ms:Uu;function ta(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ue)}function ea(t){return t==t&&!ks(t)}function na(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in ne(n))}}function ra(t,e,n){return e=Jn(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Jn(r.length-e,0),a=Kt(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Kt(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Ve(t,this,s)}}function ia(t,e){return e.length<2?t:qr(t,Gi(e,0,-1))}var oa=la(zi),aa=Yn||function(t,e){return Ze.setTimeout(t,e)},sa=la(Di);function ua(t,e,n){var r=e+"";return sa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Je(O,function(n){var r="_."+n[0];e&n[1]&&!$e(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Bt);return e?e[1].split(Ot):[]}(r),n)))}function la(t){var e=0,n=0;return function(){var i=Qn(),o=j-(i-n);if(n=i,o>0){if(++e>=_)return arguments[0]}else e=0;return t.apply(r,arguments)}}function ca(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=Ni(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var ha=function(t){var e=ls(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return kt.test(t)&&e.push(""),t.replace(zt,function(t,n,r,i){e.push(r?i.replace(Yt,"$1"):n||t)}),e});function ga(t){if("string"==typeof t||Bs(t))return t;var e=t+"";return"0"==e&&1/t==-D?"-0":e}function fa(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function da(t){if(t instanceof Cr)return t.clone();var e=new Ar(t.__wrapped__,t.__chain__);return e.__actions__=oo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var pa=Mi(function(t,e){return bs(t)?Pr(t,Fr(e,1,bs,!0)):[]}),Ia=Mi(function(t,e){var n=xa(e);return bs(n)&&(n=r),bs(t)?Pr(t,Fr(e,1,bs,!0),Eo(n,2)):[]}),va=Mi(function(t,e){var n=xa(e);return bs(n)&&(n=r),bs(t)?Pr(t,Fr(e,1,bs,!0),r,n):[]});function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Rs(n);return i<0&&(i=Jn(r+i,0)),un(t,Eo(e,3),i)}function Aa(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Rs(n),o=n<0?Jn(i+o,0):Hn(o,i-1)),un(t,Eo(e,3),o,!0)}function Ca(t){return null!=t&&t.length?Fr(t,1):[]}function ya(t){return t&&t.length?t[0]:r}var ba=Mi(function(t){var e=tn(t,Fi);return e.length&&e[0]===t[0]?oi(e):[]}),wa=Mi(function(t){var e=xa(t),n=tn(t,Fi);return e===xa(n)?e=r:n.pop(),n.length&&n[0]===t[0]?oi(n,Eo(e,2)):[]}),Na=Mi(function(t){var e=xa(t),n=tn(t,Fi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?oi(n,r,e):[]});function xa(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Ma=Mi(_a);function _a(t,e){return t&&t.length&&e&&e.length?bi(t,e):t}var ja=Go(function(t,e){var n=null==t?0:t.length,r=Lr(t,e);return wi(t,tn(e,function(t){return Ho(t,n)?+t:t}).sort(no)),r});function ka(t){return null==t?t:qn.call(t)}var za=Mi(function(t){return Yi(Fr(t,1,bs,!0))}),Da=Mi(function(t){var e=xa(t);return bs(e)&&(e=r),Yi(Fr(t,1,bs,!0),Eo(e,2))}),Za=Mi(function(t){var e=xa(t);return e="function"==typeof e?e:r,Yi(Fr(t,1,bs,!0),r,e)});function Ga(t){if(!t||!t.length)return[];var e=0;return t=Ke(t,function(t){if(bs(t))return e=Jn(t.length,e),!0}),vn(e,function(e){return tn(t,fn(e))})}function Ta(t,e){if(!t||!t.length)return[];var n=Ga(t);return null==e?n:tn(n,function(t){return Ve(e,r,t)})}var Sa=Mi(function(t,e){return bs(t)?Pr(t,e):[]}),La=Mi(function(t){return Ui(Ke(t,bs))}),Ba=Mi(function(t){var e=xa(t);return bs(e)&&(e=r),Ui(Ke(t,bs),Eo(e,2))}),Oa=Mi(function(t){var e=xa(t);return e="function"==typeof e?e:r,Ui(Ke(t,bs),r,e)}),Ea=Mi(Ga);var Ya=Mi(function(t){var e=t.length,n=e>1?t[e-1]:r;return Ta(t,n="function"==typeof n?(t.pop(),n):r)});function Pa(t){var e=Ir(t);return e.__chain__=!0,e}function Wa(t,e){return e(t)}var Ra=Go(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return Lr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Cr&&Ho(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Wa,args:[o],thisArg:r}),new Ar(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(o)});var Xa=so(function(t,e,n){he.call(t,n)?++t[n]:Sr(t,n,1)});var Ua=po(ma),Va=po(Aa);function Fa(t,e){return(As(t)?Je:Wr)(t,Eo(e,3))}function Ja(t,e){return(As(t)?He:Rr)(t,Eo(e,3))}var Ha=so(function(t,e,n){he.call(t,n)?t[n].push(e):Sr(t,n,[e])});var Qa=Mi(function(t,e,n){var r=-1,i="function"==typeof e,o=ys(t)?Kt(t.length):[];return Wr(t,function(t){o[++r]=i?Ve(e,t,n):ai(t,e,n)}),o}),Ka=so(function(t,e,n){Sr(t,n,e)});function $a(t,e){return(As(t)?tn:pi)(t,Eo(e,3))}var qa=so(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var ts=Mi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Qo(t,e[0],e[1])?e=[]:n>2&&Qo(e[0],e[1],e[2])&&(e=[e[0]]),Ci(t,Fr(e,1),[])}),es=En||function(){return Ze.Date.now()};function ns(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,jo(t,b,r,r,r,r,e)}function rs(t,e){var n;if("function"!=typeof e)throw new oe(a);return t=Rs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var is=Mi(function(t,e,n){var r=p;if(n.length){var i=kn(n,Oo(is));r|=C}return jo(t,r,e,n,i)}),os=Mi(function(t,e,n){var r=p|I;if(n.length){var i=kn(n,Oo(os));r|=C}return jo(e,r,t,n,i)});function as(t,e,n){var i,o,s,u,l,c,h=0,g=!1,f=!1,d=!0;if("function"!=typeof t)throw new oe(a);function p(e){var n=i,a=o;return i=o=r,h=e,u=t.apply(a,n)}function I(t){var n=t-c;return c===r||n>=e||n<0||f&&t-h>=s}function v(){var t=es();if(I(t))return m(t);l=aa(v,function(t){var n=e-(t-c);return f?Hn(n,s-(t-h)):n}(t))}function m(t){return l=r,d&&i?p(t):(i=o=r,u)}function A(){var t=es(),n=I(t);if(i=arguments,o=this,c=t,n){if(l===r)return function(t){return h=t,l=aa(v,e),g?p(t):u}(c);if(f)return l=aa(v,e),p(c)}return l===r&&(l=aa(v,e)),u}return e=Us(e)||0,ks(n)&&(g=!!n.leading,s=(f="maxWait"in n)?Jn(Us(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),A.cancel=function(){l!==r&&$i(l),h=0,i=c=o=l=r},A.flush=function(){return l===r?u:m(es())},A}var ss=Mi(function(t,e){return Yr(t,1,e)}),us=Mi(function(t,e,n){return Yr(t,Us(e)||0,n)});function ls(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ls.Cache||wr),n}function cs(t){if("function"!=typeof t)throw new oe(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ls.Cache=wr;var hs=Qi(function(t,e){var n=(e=1==e.length&&As(e[0])?tn(e[0],mn(Eo())):tn(Fr(e,1),mn(Eo()))).length;return Mi(function(r){for(var i=-1,o=Hn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ve(t,this,r)})}),gs=Mi(function(t,e){var n=kn(e,Oo(gs));return jo(t,C,r,e,n)}),fs=Mi(function(t,e){var n=kn(e,Oo(fs));return jo(t,y,r,e,n)}),ds=Go(function(t,e){return jo(t,w,r,r,r,e)});function ps(t,e){return t===e||t!=t&&e!=e}var Is=wo(ni),vs=wo(function(t,e){return t>=e}),ms=si(function(){return arguments}())?si:function(t){return zs(t)&&he.call(t,"callee")&&!Le.call(t,"callee")},As=Kt.isArray,Cs=Oe?mn(Oe):function(t){return zs(t)&&ei(t)==at};function ys(t){return null!=t&&js(t.length)&&!Ms(t)}function bs(t){return zs(t)&&ys(t)}var ws=Xn||Uu,Ns=Ee?mn(Ee):function(t){return zs(t)&&ei(t)==R};function xs(t){if(!zs(t))return!1;var e=ei(t);return e==U||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Gs(t)}function Ms(t){if(!ks(t))return!1;var e=ei(t);return e==V||e==F||e==P||e==$}function _s(t){return"number"==typeof t&&t==Rs(t)}function js(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Z}function ks(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zs(t){return null!=t&&"object"==typeof t}var Ds=Ye?mn(Ye):function(t){return zs(t)&&Uo(t)==J};function Zs(t){return"number"==typeof t||zs(t)&&ei(t)==H}function Gs(t){if(!zs(t)||ei(t)!=K)return!1;var e=Ge(t);if(null===e)return!0;var n=he.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==pe}var Ts=Pe?mn(Pe):function(t){return zs(t)&&ei(t)==q};var Ss=We?mn(We):function(t){return zs(t)&&Uo(t)==tt};function Ls(t){return"string"==typeof t||!As(t)&&zs(t)&&ei(t)==et}function Bs(t){return"symbol"==typeof t||zs(t)&&ei(t)==nt}var Os=Re?mn(Re):function(t){return zs(t)&&js(t.length)&&!!xe[ei(t)]};var Es=wo(di),Ys=wo(function(t,e){return t<=e});function Ps(t){if(!t)return[];if(ys(t))return Ls(t)?Gn(t):oo(t);if(dn&&t[dn])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[dn]());var e=Uo(t);return(e==J?_n:e==tt?zn:pu)(t)}function Ws(t){return t?(t=Us(t))===D||t===-D?(t<0?-1:1)*G:t==t?t:0:0===t?t:0}function Rs(t){var e=Ws(t),n=e%1;return e==e?n?e-n:e:0}function Xs(t){return t?Br(Rs(t),0,S):0}function Us(t){if("number"==typeof t)return t;if(Bs(t))return T;if(ks(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ks(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Gt,"");var n=Xt.test(t);return n||Vt.test(t)?ke(t.slice(2),n?2:8):Rt.test(t)?T:+t}function Vs(t){return ao(t,su(t))}function Fs(t){return null==t?"":Ei(t)}var Js=uo(function(t,e){if(ta(e)||ys(e))ao(e,au(e),t);else for(var n in e)he.call(e,n)&&Dr(t,n,e[n])}),Hs=uo(function(t,e){ao(e,su(e),t)}),Qs=uo(function(t,e,n,r){ao(e,su(e),t,r)}),Ks=uo(function(t,e,n,r){ao(e,au(e),t,r)}),$s=Go(Lr);var qs=Mi(function(t){return t.push(r,ko),Ve(Qs,r,t)}),tu=Mi(function(t){return t.push(r,zo),Ve(lu,r,t)});function eu(t,e,n){var i=null==t?r:qr(t,e);return i===r?n:i}function nu(t,e){return null!=t&&Vo(t,e,ii)}var ru=mo(function(t,e,n){t[e]=n},ku(Zu)),iu=mo(function(t,e,n){he.call(t,e)?t[e].push(n):t[e]=[n]},Eo),ou=Mi(ai);function au(t){return ys(t)?Mr(t):gi(t)}function su(t){return ys(t)?Mr(t,!0):fi(t)}var uu=uo(function(t,e,n){mi(t,e,n)}),lu=uo(function(t,e,n,r){mi(t,e,n,r)}),cu=Go(function(t,e){var n={};if(null==t)return n;var r=!1;e=tn(e,function(e){return e=Hi(e,t),r||(r=e.length>1),e}),ao(t,So(t),n),r&&(n=Or(n,c|h|g,Do));for(var i=e.length;i--;)Pi(n,e[i]);return n});var hu=Go(function(t,e){return null==t?{}:function(t,e){return yi(t,e,function(e,n){return nu(t,n)})}(t,e)});function gu(t,e){if(null==t)return{};var n=tn(So(t),function(t){return[t]});return e=Eo(e),yi(t,n,function(t,n){return e(t,n[0])})}var fu=_o(au),du=_o(su);function pu(t){return null==t?[]:An(t,au(t))}var Iu=go(function(t,e,n){return e=e.toLowerCase(),t+(n?vu(e):e)});function vu(t){return xu(Fs(t).toLowerCase())}function mu(t){return(t=Fs(t))&&t.replace(Jt,wn).replace(me,"")}var Au=go(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Cu=go(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),yu=ho("toLowerCase");var bu=go(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var wu=go(function(t,e,n){return t+(n?" ":"")+xu(e)});var Nu=go(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),xu=ho("toUpperCase");function Mu(t,e,n){return t=Fs(t),(e=n?r:e)===r?function(t){return be.test(t)}(t)?function(t){return t.match(Ce)||[]}(t):function(t){return t.match(Et)||[]}(t):t.match(e)||[]}var _u=Mi(function(t,e){try{return Ve(t,r,e)}catch(t){return xs(t)?t:new qt(t)}}),ju=Go(function(t,e){return Je(e,function(e){e=ga(e),Sr(t,e,is(t[e],t))}),t});function ku(t){return function(){return t}}var zu=Io(),Du=Io(!0);function Zu(t){return t}function Gu(t){return hi("function"==typeof t?t:Or(t,c))}var Tu=Mi(function(t,e){return function(n){return ai(n,t,e)}}),Su=Mi(function(t,e){return function(n){return ai(t,n,e)}});function Lu(t,e,n){var r=au(e),i=$r(e,r);null!=n||ks(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=$r(e,au(e)));var o=!(ks(n)&&"chain"in n&&!n.chain),a=Ms(t);return Je(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=oo(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,en([this.value()],arguments))})}),t}function Bu(){}var Ou=Co(tn),Eu=Co(Qe),Yu=Co(on);function Pu(t){return Ko(t)?fn(ga(t)):function(t){return function(e){return qr(e,t)}}(t)}var Wu=bo(),Ru=bo(!0);function Xu(){return[]}function Uu(){return!1}var Vu=Ao(function(t,e){return t+e},0),Fu=xo("ceil"),Ju=Ao(function(t,e){return t/e},1),Hu=xo("floor");var Qu,Ku=Ao(function(t,e){return t*e},1),$u=xo("round"),qu=Ao(function(t,e){return t-e},0);return Ir.after=function(t,e){if("function"!=typeof e)throw new oe(a);return t=Rs(t),function(){if(--t<1)return e.apply(this,arguments)}},Ir.ary=ns,Ir.assign=Js,Ir.assignIn=Hs,Ir.assignInWith=Qs,Ir.assignWith=Ks,Ir.at=$s,Ir.before=rs,Ir.bind=is,Ir.bindAll=ju,Ir.bindKey=os,Ir.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return As(t)?t:[t]},Ir.chain=Pa,Ir.chunk=function(t,e,n){e=(n?Qo(t,e,n):e===r)?1:Jn(Rs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,a=0,s=Kt(Pn(i/e));o<i;)s[a++]=Gi(t,o,o+=e);return s},Ir.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Ir.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Kt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return en(As(n)?oo(n):[n],Fr(e,1))},Ir.cond=function(t){var e=null==t?0:t.length,n=Eo();return t=e?tn(t,function(t){if("function"!=typeof t[1])throw new oe(a);return[n(t[0]),t[1]]}):[],Mi(function(n){for(var r=-1;++r<e;){var i=t[r];if(Ve(i[0],this,n))return Ve(i[1],this,n)}})},Ir.conforms=function(t){return function(t){var e=au(t);return function(n){return Er(n,t,e)}}(Or(t,c))},Ir.constant=ku,Ir.countBy=Xa,Ir.create=function(t,e){var n=vr(t);return null==e?n:Tr(n,e)},Ir.curry=function t(e,n,i){var o=jo(e,m,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Ir.curryRight=function t(e,n,i){var o=jo(e,A,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Ir.debounce=as,Ir.defaults=qs,Ir.defaultsDeep=tu,Ir.defer=ss,Ir.delay=us,Ir.difference=pa,Ir.differenceBy=Ia,Ir.differenceWith=va,Ir.drop=function(t,e,n){var i=null==t?0:t.length;return i?Gi(t,(e=n||e===r?1:Rs(e))<0?0:e,i):[]},Ir.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Gi(t,0,(e=i-(e=n||e===r?1:Rs(e)))<0?0:e):[]},Ir.dropRightWhile=function(t,e){return t&&t.length?Ri(t,Eo(e,3),!0,!0):[]},Ir.dropWhile=function(t,e){return t&&t.length?Ri(t,Eo(e,3),!0):[]},Ir.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Qo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=Rs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:Rs(i))<0&&(i+=o),i=n>i?0:Xs(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Ir.filter=function(t,e){return(As(t)?Ke:Vr)(t,Eo(e,3))},Ir.flatMap=function(t,e){return Fr($a(t,e),1)},Ir.flatMapDeep=function(t,e){return Fr($a(t,e),D)},Ir.flatMapDepth=function(t,e,n){return n=n===r?1:Rs(n),Fr($a(t,e),n)},Ir.flatten=Ca,Ir.flattenDeep=function(t){return null!=t&&t.length?Fr(t,D):[]},Ir.flattenDepth=function(t,e){return null!=t&&t.length?Fr(t,e=e===r?1:Rs(e)):[]},Ir.flip=function(t){return jo(t,N)},Ir.flow=zu,Ir.flowRight=Du,Ir.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Ir.functions=function(t){return null==t?[]:$r(t,au(t))},Ir.functionsIn=function(t){return null==t?[]:$r(t,su(t))},Ir.groupBy=Ha,Ir.initial=function(t){return null!=t&&t.length?Gi(t,0,-1):[]},Ir.intersection=ba,Ir.intersectionBy=wa,Ir.intersectionWith=Na,Ir.invert=ru,Ir.invertBy=iu,Ir.invokeMap=Qa,Ir.iteratee=Gu,Ir.keyBy=Ka,Ir.keys=au,Ir.keysIn=su,Ir.map=$a,Ir.mapKeys=function(t,e){var n={};return e=Eo(e,3),Qr(t,function(t,r,i){Sr(n,e(t,r,i),t)}),n},Ir.mapValues=function(t,e){var n={};return e=Eo(e,3),Qr(t,function(t,r,i){Sr(n,r,e(t,r,i))}),n},Ir.matches=function(t){return Ii(Or(t,c))},Ir.matchesProperty=function(t,e){return vi(t,Or(e,c))},Ir.memoize=ls,Ir.merge=uu,Ir.mergeWith=lu,Ir.method=Tu,Ir.methodOf=Su,Ir.mixin=Lu,Ir.negate=cs,Ir.nthArg=function(t){return t=Rs(t),Mi(function(e){return Ai(e,t)})},Ir.omit=cu,Ir.omitBy=function(t,e){return gu(t,cs(Eo(e)))},Ir.once=function(t){return rs(2,t)},Ir.orderBy=function(t,e,n,i){return null==t?[]:(As(e)||(e=null==e?[]:[e]),As(n=i?r:n)||(n=null==n?[]:[n]),Ci(t,e,n))},Ir.over=Ou,Ir.overArgs=hs,Ir.overEvery=Eu,Ir.overSome=Yu,Ir.partial=gs,Ir.partialRight=fs,Ir.partition=qa,Ir.pick=hu,Ir.pickBy=gu,Ir.property=Pu,Ir.propertyOf=function(t){return function(e){return null==t?r:qr(t,e)}},Ir.pull=Ma,Ir.pullAll=_a,Ir.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,Eo(n,2)):t},Ir.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,r,n):t},Ir.pullAt=ja,Ir.range=Wu,Ir.rangeRight=Ru,Ir.rearg=ds,Ir.reject=function(t,e){return(As(t)?Ke:Vr)(t,cs(Eo(e,3)))},Ir.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Eo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return wi(t,i),n},Ir.rest=function(t,e){if("function"!=typeof t)throw new oe(a);return Mi(t,e=e===r?e:Rs(e))},Ir.reverse=ka,Ir.sampleSize=function(t,e,n){return e=(n?Qo(t,e,n):e===r)?1:Rs(e),(As(t)?jr:ji)(t,e)},Ir.set=function(t,e,n){return null==t?t:ki(t,e,n)},Ir.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ki(t,e,n,i)},Ir.shuffle=function(t){return(As(t)?kr:Zi)(t)},Ir.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Qo(t,e,n)?(e=0,n=i):(e=null==e?0:Rs(e),n=n===r?i:Rs(n)),Gi(t,e,n)):[]},Ir.sortBy=ts,Ir.sortedUniq=function(t){return t&&t.length?Bi(t):[]},Ir.sortedUniqBy=function(t,e){return t&&t.length?Bi(t,Eo(e,2)):[]},Ir.split=function(t,e,n){return n&&"number"!=typeof n&&Qo(t,e,n)&&(e=n=r),(n=n===r?S:n>>>0)?(t=Fs(t))&&("string"==typeof e||null!=e&&!Ts(e))&&!(e=Ei(e))&&Mn(t)?Ki(Gn(t),0,n):t.split(e,n):[]},Ir.spread=function(t,e){if("function"!=typeof t)throw new oe(a);return e=null==e?0:Jn(Rs(e),0),Mi(function(n){var r=n[e],i=Ki(n,0,e);return r&&en(i,r),Ve(t,this,i)})},Ir.tail=function(t){var e=null==t?0:t.length;return e?Gi(t,1,e):[]},Ir.take=function(t,e,n){return t&&t.length?Gi(t,0,(e=n||e===r?1:Rs(e))<0?0:e):[]},Ir.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Gi(t,(e=i-(e=n||e===r?1:Rs(e)))<0?0:e,i):[]},Ir.takeRightWhile=function(t,e){return t&&t.length?Ri(t,Eo(e,3),!1,!0):[]},Ir.takeWhile=function(t,e){return t&&t.length?Ri(t,Eo(e,3)):[]},Ir.tap=function(t,e){return e(t),t},Ir.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new oe(a);return ks(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),as(t,e,{leading:r,maxWait:e,trailing:i})},Ir.thru=Wa,Ir.toArray=Ps,Ir.toPairs=fu,Ir.toPairsIn=du,Ir.toPath=function(t){return As(t)?tn(t,ga):Bs(t)?[t]:oo(ha(Fs(t)))},Ir.toPlainObject=Vs,Ir.transform=function(t,e,n){var r=As(t),i=r||ws(t)||Os(t);if(e=Eo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ks(t)&&Ms(o)?vr(Ge(t)):{}}return(i?Je:Qr)(t,function(t,r,i){return e(n,t,r,i)}),n},Ir.unary=function(t){return ns(t,1)},Ir.union=za,Ir.unionBy=Da,Ir.unionWith=Za,Ir.uniq=function(t){return t&&t.length?Yi(t):[]},Ir.uniqBy=function(t,e){return t&&t.length?Yi(t,Eo(e,2)):[]},Ir.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Yi(t,r,e):[]},Ir.unset=function(t,e){return null==t||Pi(t,e)},Ir.unzip=Ga,Ir.unzipWith=Ta,Ir.update=function(t,e,n){return null==t?t:Wi(t,e,Ji(n))},Ir.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Wi(t,e,Ji(n),i)},Ir.values=pu,Ir.valuesIn=function(t){return null==t?[]:An(t,su(t))},Ir.without=Sa,Ir.words=Mu,Ir.wrap=function(t,e){return gs(Ji(e),t)},Ir.xor=La,Ir.xorBy=Ba,Ir.xorWith=Oa,Ir.zip=Ea,Ir.zipObject=function(t,e){return Vi(t||[],e||[],Dr)},Ir.zipObjectDeep=function(t,e){return Vi(t||[],e||[],ki)},Ir.zipWith=Ya,Ir.entries=fu,Ir.entriesIn=du,Ir.extend=Hs,Ir.extendWith=Qs,Lu(Ir,Ir),Ir.add=Vu,Ir.attempt=_u,Ir.camelCase=Iu,Ir.capitalize=vu,Ir.ceil=Fu,Ir.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Us(n))==n?n:0),e!==r&&(e=(e=Us(e))==e?e:0),Br(Us(t),e,n)},Ir.clone=function(t){return Or(t,g)},Ir.cloneDeep=function(t){return Or(t,c|g)},Ir.cloneDeepWith=function(t,e){return Or(t,c|g,e="function"==typeof e?e:r)},Ir.cloneWith=function(t,e){return Or(t,g,e="function"==typeof e?e:r)},Ir.conformsTo=function(t,e){return null==e||Er(t,e,au(e))},Ir.deburr=mu,Ir.defaultTo=function(t,e){return null==t||t!=t?e:t},Ir.divide=Ju,Ir.endsWith=function(t,e,n){t=Fs(t),e=Ei(e);var i=t.length,o=n=n===r?i:Br(Rs(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Ir.eq=ps,Ir.escape=function(t){return(t=Fs(t))&&wt.test(t)?t.replace(yt,Nn):t},Ir.escapeRegExp=function(t){return(t=Fs(t))&&Zt.test(t)?t.replace(Dt,"\\$&"):t},Ir.every=function(t,e,n){var i=As(t)?Qe:Xr;return n&&Qo(t,e,n)&&(e=r),i(t,Eo(e,3))},Ir.find=Ua,Ir.findIndex=ma,Ir.findKey=function(t,e){return sn(t,Eo(e,3),Qr)},Ir.findLast=Va,Ir.findLastIndex=Aa,Ir.findLastKey=function(t,e){return sn(t,Eo(e,3),Kr)},Ir.floor=Hu,Ir.forEach=Fa,Ir.forEachRight=Ja,Ir.forIn=function(t,e){return null==t?t:Jr(t,Eo(e,3),su)},Ir.forInRight=function(t,e){return null==t?t:Hr(t,Eo(e,3),su)},Ir.forOwn=function(t,e){return t&&Qr(t,Eo(e,3))},Ir.forOwnRight=function(t,e){return t&&Kr(t,Eo(e,3))},Ir.get=eu,Ir.gt=Is,Ir.gte=vs,Ir.has=function(t,e){return null!=t&&Vo(t,e,ri)},Ir.hasIn=nu,Ir.head=ya,Ir.identity=Zu,Ir.includes=function(t,e,n,r){t=ys(t)?t:pu(t),n=n&&!r?Rs(n):0;var i=t.length;return n<0&&(n=Jn(i+n,0)),Ls(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ln(t,e,n)>-1},Ir.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Rs(n);return i<0&&(i=Jn(r+i,0)),ln(t,e,i)},Ir.inRange=function(t,e,n){return e=Ws(e),n===r?(n=e,e=0):n=Ws(n),function(t,e,n){return t>=Hn(e,n)&&t<Jn(e,n)}(t=Us(t),e,n)},Ir.invoke=ou,Ir.isArguments=ms,Ir.isArray=As,Ir.isArrayBuffer=Cs,Ir.isArrayLike=ys,Ir.isArrayLikeObject=bs,Ir.isBoolean=function(t){return!0===t||!1===t||zs(t)&&ei(t)==W},Ir.isBuffer=ws,Ir.isDate=Ns,Ir.isElement=function(t){return zs(t)&&1===t.nodeType&&!Gs(t)},Ir.isEmpty=function(t){if(null==t)return!0;if(ys(t)&&(As(t)||"string"==typeof t||"function"==typeof t.splice||ws(t)||Os(t)||ms(t)))return!t.length;var e=Uo(t);if(e==J||e==tt)return!t.size;if(ta(t))return!gi(t).length;for(var n in t)if(he.call(t,n))return!1;return!0},Ir.isEqual=function(t,e){return ui(t,e)},Ir.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?ui(t,e,r,n):!!i},Ir.isError=xs,Ir.isFinite=function(t){return"number"==typeof t&&Un(t)},Ir.isFunction=Ms,Ir.isInteger=_s,Ir.isLength=js,Ir.isMap=Ds,Ir.isMatch=function(t,e){return t===e||li(t,e,Po(e))},Ir.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,li(t,e,Po(e),n)},Ir.isNaN=function(t){return Zs(t)&&t!=+t},Ir.isNative=function(t){if(qo(t))throw new qt(o);return ci(t)},Ir.isNil=function(t){return null==t},Ir.isNull=function(t){return null===t},Ir.isNumber=Zs,Ir.isObject=ks,Ir.isObjectLike=zs,Ir.isPlainObject=Gs,Ir.isRegExp=Ts,Ir.isSafeInteger=function(t){return _s(t)&&t>=-Z&&t<=Z},Ir.isSet=Ss,Ir.isString=Ls,Ir.isSymbol=Bs,Ir.isTypedArray=Os,Ir.isUndefined=function(t){return t===r},Ir.isWeakMap=function(t){return zs(t)&&Uo(t)==it},Ir.isWeakSet=function(t){return zs(t)&&ei(t)==ot},Ir.join=function(t,e){return null==t?"":Vn.call(t,e)},Ir.kebabCase=Au,Ir.last=xa,Ir.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=Rs(n))<0?Jn(i+o,0):Hn(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):un(t,hn,o,!0)},Ir.lowerCase=Cu,Ir.lowerFirst=yu,Ir.lt=Es,Ir.lte=Ys,Ir.max=function(t){return t&&t.length?Ur(t,Zu,ni):r},Ir.maxBy=function(t,e){return t&&t.length?Ur(t,Eo(e,2),ni):r},Ir.mean=function(t){return gn(t,Zu)},Ir.meanBy=function(t,e){return gn(t,Eo(e,2))},Ir.min=function(t){return t&&t.length?Ur(t,Zu,di):r},Ir.minBy=function(t,e){return t&&t.length?Ur(t,Eo(e,2),di):r},Ir.stubArray=Xu,Ir.stubFalse=Uu,Ir.stubObject=function(){return{}},Ir.stubString=function(){return""},Ir.stubTrue=function(){return!0},Ir.multiply=Ku,Ir.nth=function(t,e){return t&&t.length?Ai(t,Rs(e)):r},Ir.noConflict=function(){return Ze._===this&&(Ze._=Ie),this},Ir.noop=Bu,Ir.now=es,Ir.pad=function(t,e,n){t=Fs(t);var r=(e=Rs(e))?Zn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return yo(Wn(i),n)+t+yo(Pn(i),n)},Ir.padEnd=function(t,e,n){t=Fs(t);var r=(e=Rs(e))?Zn(t):0;return e&&r<e?t+yo(e-r,n):t},Ir.padStart=function(t,e,n){t=Fs(t);var r=(e=Rs(e))?Zn(t):0;return e&&r<e?yo(e-r,n)+t:t},Ir.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Kn(Fs(t).replace(Tt,""),e||0)},Ir.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Qo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=Ws(t),e===r?(e=t,t=0):e=Ws(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=$n();return Hn(t+o*(e-t+je("1e-"+((o+"").length-1))),e)}return Ni(t,e)},Ir.reduce=function(t,e,n){var r=As(t)?nn:pn,i=arguments.length<3;return r(t,Eo(e,4),n,i,Wr)},Ir.reduceRight=function(t,e,n){var r=As(t)?rn:pn,i=arguments.length<3;return r(t,Eo(e,4),n,i,Rr)},Ir.repeat=function(t,e,n){return e=(n?Qo(t,e,n):e===r)?1:Rs(e),xi(Fs(t),e)},Ir.replace=function(){var t=arguments,e=Fs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Ir.result=function(t,e,n){var i=-1,o=(e=Hi(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[ga(e[i])];a===r&&(i=o,a=n),t=Ms(a)?a.call(t):a}return t},Ir.round=$u,Ir.runInContext=t,Ir.sample=function(t){return(As(t)?_r:_i)(t)},Ir.size=function(t){if(null==t)return 0;if(ys(t))return Ls(t)?Zn(t):t.length;var e=Uo(t);return e==J||e==tt?t.size:gi(t).length},Ir.snakeCase=bu,Ir.some=function(t,e,n){var i=As(t)?on:Ti;return n&&Qo(t,e,n)&&(e=r),i(t,Eo(e,3))},Ir.sortedIndex=function(t,e){return Si(t,e)},Ir.sortedIndexBy=function(t,e,n){return Li(t,e,Eo(n,2))},Ir.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Si(t,e);if(r<n&&ps(t[r],e))return r}return-1},Ir.sortedLastIndex=function(t,e){return Si(t,e,!0)},Ir.sortedLastIndexBy=function(t,e,n){return Li(t,e,Eo(n,2),!0)},Ir.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Si(t,e,!0)-1;if(ps(t[n],e))return n}return-1},Ir.startCase=wu,Ir.startsWith=function(t,e,n){return t=Fs(t),n=null==n?0:Br(Rs(n),0,t.length),e=Ei(e),t.slice(n,n+e.length)==e},Ir.subtract=qu,Ir.sum=function(t){return t&&t.length?In(t,Zu):0},Ir.sumBy=function(t,e){return t&&t.length?In(t,Eo(e,2)):0},Ir.template=function(t,e,n){var i=Ir.templateSettings;n&&Qo(t,e,n)&&(e=r),t=Fs(t),e=Qs({},e,i,ko);var o,a,s=Qs({},e.imports,i.imports,ko),u=au(s),l=An(s,u),c=0,h=e.interpolate||Ht,g="__p += '",f=re((e.escape||Ht).source+"|"+h.source+"|"+(h===Mt?Pt:Ht).source+"|"+(e.evaluate||Ht).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ne+"]")+"\n";t.replace(f,function(e,n,r,i,s,u){return r||(r=i),g+=t.slice(c,u).replace(Qt,xn),n&&(o=!0,g+="' +\n__e("+n+") +\n'"),s&&(a=!0,g+="';\n"+s+";\n__p += '"),r&&(g+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),g+="';\n";var p=e.variable;p||(g="with (obj) {\n"+g+"\n}\n"),g=(a?g.replace(vt,""):g).replace(mt,"$1").replace(At,"$1;"),g="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+g+"return __p\n}";var I=_u(function(){return te(u,d+"return "+g).apply(r,l)});if(I.source=g,xs(I))throw I;return I},Ir.times=function(t,e){if((t=Rs(t))<1||t>Z)return[];var n=S,r=Hn(t,S);e=Eo(e),t-=S;for(var i=vn(r,e);++n<t;)e(n);return i},Ir.toFinite=Ws,Ir.toInteger=Rs,Ir.toLength=Xs,Ir.toLower=function(t){return Fs(t).toLowerCase()},Ir.toNumber=Us,Ir.toSafeInteger=function(t){return t?Br(Rs(t),-Z,Z):0===t?t:0},Ir.toString=Fs,Ir.toUpper=function(t){return Fs(t).toUpperCase()},Ir.trim=function(t,e,n){if((t=Fs(t))&&(n||e===r))return t.replace(Gt,"");if(!t||!(e=Ei(e)))return t;var i=Gn(t),o=Gn(e);return Ki(i,yn(i,o),bn(i,o)+1).join("")},Ir.trimEnd=function(t,e,n){if((t=Fs(t))&&(n||e===r))return t.replace(St,"");if(!t||!(e=Ei(e)))return t;var i=Gn(t);return Ki(i,0,bn(i,Gn(e))+1).join("")},Ir.trimStart=function(t,e,n){if((t=Fs(t))&&(n||e===r))return t.replace(Tt,"");if(!t||!(e=Ei(e)))return t;var i=Gn(t);return Ki(i,yn(i,Gn(e))).join("")},Ir.truncate=function(t,e){var n=x,i=M;if(ks(e)){var o="separator"in e?e.separator:o;n="length"in e?Rs(e.length):n,i="omission"in e?Ei(e.omission):i}var a=(t=Fs(t)).length;if(Mn(t)){var s=Gn(t);a=s.length}if(n>=a)return t;var u=n-Zn(i);if(u<1)return i;var l=s?Ki(s,0,u).join(""):t.slice(0,u);if(o===r)return l+i;if(s&&(u+=l.length-u),Ts(o)){if(t.slice(u).search(o)){var c,h=l;for(o.global||(o=re(o.source,Fs(Wt.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var g=c.index;l=l.slice(0,g===r?u:g)}}else if(t.indexOf(Ei(o),u)!=u){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+i},Ir.unescape=function(t){return(t=Fs(t))&&bt.test(t)?t.replace(Ct,Tn):t},Ir.uniqueId=function(t){var e=++ge;return Fs(t)+e},Ir.upperCase=Nu,Ir.upperFirst=xu,Ir.each=Fa,Ir.eachRight=Ja,Ir.first=ya,Lu(Ir,(Qu={},Qr(Ir,function(t,e){he.call(Ir.prototype,e)||(Qu[e]=t)}),Qu),{chain:!1}),Ir.VERSION="4.17.4",Je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Ir[t].placeholder=Ir}),Je(["drop","take"],function(t,e){Cr.prototype[t]=function(n){n=n===r?1:Jn(Rs(n),0);var i=this.__filtered__&&!e?new Cr(this):this.clone();return i.__filtered__?i.__takeCount__=Hn(n,i.__takeCount__):i.__views__.push({size:Hn(n,S),type:t+(i.__dir__<0?"Right":"")}),i},Cr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Je(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==k||3==n;Cr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Eo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Je(["head","last"],function(t,e){var n="take"+(e?"Right":"");Cr.prototype[t]=function(){return this[n](1).value()[0]}}),Je(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Cr.prototype[t]=function(){return this.__filtered__?new Cr(this):this[n](1)}}),Cr.prototype.compact=function(){return this.filter(Zu)},Cr.prototype.find=function(t){return this.filter(t).head()},Cr.prototype.findLast=function(t){return this.reverse().find(t)},Cr.prototype.invokeMap=Mi(function(t,e){return"function"==typeof t?new Cr(this):this.map(function(n){return ai(n,t,e)})}),Cr.prototype.reject=function(t){return this.filter(cs(Eo(t)))},Cr.prototype.slice=function(t,e){t=Rs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Cr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=Rs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Cr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Cr.prototype.toArray=function(){return this.take(S)},Qr(Cr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Ir[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Ir.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,u=e instanceof Cr,l=s[0],c=u||As(e),h=function(t){var e=o.apply(Ir,en([t],s));return i&&g?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var g=this.__chain__,f=!!this.__actions__.length,d=a&&!g,p=u&&!f;if(!a&&c){e=p?e:new Cr(this);var I=t.apply(e,s);return I.__actions__.push({func:Wa,args:[h],thisArg:r}),new Ar(I,g)}return d&&p?t.apply(this,s):(I=this.thru(h),d?i?I.value()[0]:I.value():I)})}),Je(["pop","push","shift","sort","splice","unshift"],function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Ir.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(As(i)?i:[],t)}return this[n](function(n){return e.apply(As(n)?n:[],t)})}}),Qr(Cr.prototype,function(t,e){var n=Ir[e];if(n){var r=n.name+"";(sr[r]||(sr[r]=[])).push({name:e,func:n})}}),sr[vo(r,I).name]=[{name:"wrapper",func:r}],Cr.prototype.clone=function(){var t=new Cr(this.__wrapped__);return t.__actions__=oo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=oo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=oo(this.__views__),t},Cr.prototype.reverse=function(){if(this.__filtered__){var t=new Cr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Cr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=As(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Hn(e,t+a);break;case"takeRight":t=Jn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,g=0,f=Hn(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return Xi(t,this.__actions__);var d=[];t:for(;u--&&g<f;){for(var p=-1,I=t[l+=e];++p<h;){var v=c[p],m=v.iteratee,A=v.type,C=m(I);if(A==z)I=C;else if(!C){if(A==k)continue t;break t}}d[g++]=I}return d},Ir.prototype.at=Ra,Ir.prototype.chain=function(){return Pa(this)},Ir.prototype.commit=function(){return new Ar(this.value(),this.__chain__)},Ir.prototype.next=function(){this.__values__===r&&(this.__values__=Ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Ir.prototype.plant=function(t){for(var e,n=this;n instanceof mr;){var i=da(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Ir.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Cr){var e=t;return this.__actions__.length&&(e=new Cr(this)),(e=e.reverse()).__actions__.push({func:Wa,args:[ka],thisArg:r}),new Ar(e,this.__chain__)}return this.thru(ka)},Ir.prototype.toJSON=Ir.prototype.valueOf=Ir.prototype.value=function(){return Xi(this.__wrapped__,this.__actions__)},Ir.prototype.first=Ir.prototype.head,dn&&(Ir.prototype[dn]=function(){return this}),Ir}();Te?((Te.exports=Sn)._=Sn,Ge._=Sn):Ze._=Sn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),

function(t,e){if("function"==typeof define&&define.amd)define(["backbone","lodash","jquery"],function(n,r,i){return n.$=i,e(t,n,r,i)});else if("undefined"!=typeof exports){var n=require("backbone"),r=require("lodash"),i=n.$=require("jquery");module.exports=e(t,n,r,i)}else{n=t.Backbone,r=t._,i=n.$=t.jQuery||t.$;t.joint=e(t,n,r,i),t.g=t.joint.g,t.V=t.Vectorizer=t.joint.V}}(this,function(t,e,n,r){var i,o,a,s;!function(){var t="undefined"!=typeof exports?exports:this,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){this.message=t}n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var r,i,o=String(t),a=0,s=e,u="";o.charAt(0|a)||(s="=",a%1);u+=s.charAt(63&r>>8-a%1*8)){if((i=o.charCodeAt(a+=.75))>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return u}),t.atob||(t.atob=function(t){var r=String(t).replace(/=+$/,"");if(r.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,a=0,s=0,u="";o=r.charAt(s++);~o&&(i=a%4?64*i+o:o,a++%4)?u+=String.fromCharCode(255&i>>(-2*a&6)):0)o=e.indexOf(o);return u})}(),function(){function t(t,e){return this.slice(t,e)}function e(t,e){arguments.length<2&&(e=0);for(var n=0,r=t.length;n<r;++n,++e)this[e]=255&t[n]}function n(n){var r;if("number"==typeof n){r=new Array(n);for(var i=0;i<n;++i)r[i]=0}else r=n.slice(0);return r.subarray=t,r.buffer=r,r.byteLength=r.length,r.set=e,"object"==typeof n&&n.buffer&&(r.buffer=n.buffer),r}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=n,window.Uint32Array=n,window.Int32Array=n)}(),"undefined"!=typeof XMLHttpRequest&&("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}})),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var i,o,a=0|e,s=Math.max(a>=0?a:r-Math.abs(a),0);for(;s<r;){if((i=n[s])===(o=t)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;s++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}}),Array.from||(Array.from=(i=Object.prototype.toString,o=function(t){return"function"==typeof t||"[object Function]"===i.call(t)},a=Math.pow(2,53)-1,s=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),a)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!o(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var i,a=s(e.length),u=o(this)?Object(new this(a)):new Array(a),l=0;l<a;)i=e[l],u[l]=r?void 0===n?r(i,l):r.call(n,i,l):i,l+=1;return u.length=a,u})),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1}}),String.prototype.includes||(String.prototype.includes=function(t,e){"use strict";return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isNaN=Number.isNaN||function(t){return t!=t};var u,l=function(){var t={},e=Math,n=e.abs,r=e.cos,i=e.sin,o=e.sqrt,a=e.min,s=e.max,u=e.atan2,l=e.round,c=e.floor,h=e.PI,g=e.random,f=e.pow;t.bezier={curveThroughPoints:function(t){for(var e=this.getCurveControlPoints(t),n=["M",t[0].x,t[0].y],r=0;r<e[0].length;r++)n.push("C",e[0][r].x,e[0][r].y,e[1][r].x,e[1][r].y,t[r+1].x,t[r+1].y);return n},getCurveControlPoints:function(t){var e,n=[],r=[],i=t.length-1;if(1==i)return n[0]=I((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=I(2*n[0].x-t[0].x,2*n[0].y-t[0].y),[n,r];var o=[];for(e=1;e<i-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[i-1]=(8*t[i-1].x+t[i].x)/2;var a=this.getFirstControlPoints(o);for(e=1;e<i-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[i-1]=(8*t[i-1].y+t[i].y)/2;var s=this.getFirstControlPoints(o);for(e=0;e<i;e++)n.push(I(a[e],s[e])),e<i-1?r.push(I(2*t[e+1].x-a[e+1],2*t[e+1].y-s[e+1])):r.push(I((t[i].x+a[i-1])/2,(t[i].y+s[i-1])/2));return[n,r]},getCurveDivider:function(t,e,n,r){return function(i){var o=p(t,e).pointAt(i),a=p(e,n).pointAt(i),s=p(n,r).pointAt(i),u=p(o,a).pointAt(i),l=p(a,s).pointAt(i),c=p(u,l).pointAt(i);return[{p0:t,p1:o,p2:u,p3:c},{p0:c,p1:l,p2:s,p3:r}]}},getFirstControlPoints:function(t){var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,r){var i=arguments;function o(t,e){var n=i[t],r=i[e];return function(i){return(t%3?3:1)*(e%3?3:1)*(i.x*(n.y-r.y)+i.y*(r.x-n.x)+n.x*r.y-n.y*r.x)}}return function(n){var r=3*o(2,3)(e),i=o(1,3)(t)/r,a=-o(2,3)(t)/r,s=i*o(3,1)(n)+a*(o(3,0)(n)+o(2,1)(n))+o(2,0)(n),u=i*o(3,0)(n)+a*o(2,0)(n)+o(1,0)(n);return u/(u-s)}}};var d=t.Ellipse=function(t,e,n){return this instanceof d?t instanceof d?new d(I(t),t.a,t.b):(t=I(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new d(t,e,n)};t.Ellipse.fromRect=function(t){return t=v(t),d(t.center(),t.width/2,t.height/2)},t.Ellipse.prototype={bbox:function(){return v(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},clone:function(){return d(this)},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,o=this.x,a=this.y;return(e-o)*(e-o)/(r*r)+(n-a)*(n-a)/(i*i)},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},containsPoint:function(t){return this.normalizedDistance(t)<=1},center:function(){return I(this.x,this.y)},tangentTheta:function(e){var n,r,i=e.x,o=e.y,a=this.a,s=this.b,u=this.bbox().center(),l=u.x,c=u.y,h=i>u.x+a/2,g=i<u.x-a/2;return h||g?r=a*a/(i-l)-a*a*(o-c)*((n=i>u.x?o-30:o+30)-c)/(s*s*(i-l))+l:n=s*s/(o-c)-s*s*(i-l)*((r=o>u.y?i+30:i-30)-l)/(a*a*(o-c))+c,t.point(r,n).theta(e)},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},intersectionWithLineFromCenterToPoint:function(t,e){t=I(t),e&&t.rotate(I(this.x,this.y),e);var n,r=t.x-this.x,i=t.y-this.y;if(0===r)return n=this.bbox().pointNearestToPoint(t),e?n.rotate(I(this.x,this.y),-e):n;var a=i/r,s=a*a,u=this.a*this.a,l=this.b*this.b,c=o(1/(1/u+s/l)),h=a*(c=r<0?-c:c);return n=I(this.x+c,this.y+h),e?n.rotate(I(this.x,this.y),-e):n},toString:function(){return I(this.x,this.y).toString()+" "+this.a+" "+this.b}};var p=t.Line=function(t,e){return this instanceof p?t instanceof p?p(t.start,t.end):(this.start=I(t),void(this.end=I(e))):new p(t,e)};t.Line.prototype={bearing:function(){var t=b(this.start.y),e=b(this.end.y),n=this.start.x,o=this.end.x,a=b(o-n),s=i(a)*r(e),l=r(t)*i(e)-i(t)*r(e)*r(a),c=y(u(s,l))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45)]},clone:function(){return p(this.start,this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t){if(t instanceof p){var e=I(this.end.x-this.start.x,this.end.y-this.start.y),n=I(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=I(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,a=i.x*e.y-i.y*e.x;if(0===r||o*r<0||a*r<0)return null;if(r>0){if(o>r||a>r)return null}else if(o<r||a<r)return null;return I(this.start.x+o*e.x/r,this.start.y+o*e.y/r)}if(t instanceof v){var s,u,l=t,c=[l.topLine(),l.rightLine(),l.bottomLine(),l.leftLine()],h=[],g=[];for(u=0;u<c.length;u++)null!==(s=this.intersect(c[u]))&&g.indexOf(s.toString())<0&&(h.push(s),g.push(s.toString()));return h.length>0?h:null}return null},length:function(){return o(this.squaredLength())},midpoint:function(){return I((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},pointAt:function(t){var e=(1-t)*this.start.x+t*this.end.x,n=(1-t)*this.start.y+t*this.end.y;return I(e,n)},pointOffset:function(t){return((this.end.x-this.start.x)*(t.y-this.start.y)-(this.end.y-this.start.y)*(t.x-this.start.x))/2},vector:function(){return I(this.end.x-this.start.x,this.end.y-this.start.y)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointNormalizedLength:function(t){var e=this.vector().dot(p(this.start,t).vector());return Math.min(1,Math.max(0,e/this.squaredLength()))},squaredLength:function(){var t=this.start.x,e=this.start.y;return(t-=this.end.x)*t+(e-=this.end.y)*e},toString:function(){return this.start.toString()+" "+this.end.toString()}},t.Line.prototype.intersection=t.Line.prototype.intersect;var I=t.Point=function(t,e){if(!(this instanceof I))return new I(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseInt(n[0],10),e=parseInt(n[1],10)}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};t.Point.fromPolar=function(t,e,o){o=o&&I(o)||I(0,0);var a=n(t*r(e)),s=n(t*i(e)),u=A(y(e));return u<90?s=-s:u<180?(a=-a,s=-s):u<270&&(a=-a),I(o.x+a,o.y+s)},t.Point.random=function(t,e,n,r){return I(c(g()*(e-t+1)+t),c(g()*(r-n+1)+n))},t.Point.prototype={adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=a(s(this.x,t.x),t.x+t.width),this.y=a(s(this.y,t.y),t.y+t.height),this)},bearing:function(t){return p(this,t).bearing()},changeInAngle:function(t,e,n){return I(this).offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return I(this)},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),I(this.x-(t||0),this.y-(e||0))},distance:function(t){return p(this,t).length()},squaredDistance:function(t){return p(this,t).squaredLength()},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},magnitude:function(){return o(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return n(t.x-this.x)+n(t.y-this.y)},move:function(t,e){var n=b(I(t).theta(this));return this.offset(r(n)*e,-i(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return I(t).move(this,this.distance(t))},rotate:function(t,e){e=(e+360)%360,this.toPolar(t),this.y+=b(e);var n=I.fromPolar(this.x,this.y,t);return this.x=n.x,this.y=n.y,this},round:function(t){var e=f(10,t||0);return this.x=l(this.x*e)/e,this.y=l(this.y*e)/e,this},scale:function(t,e,n){return n=n&&I(n)||I(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=C(this.x,t),this.y=C(this.y,e||t),this},theta:function(t){var e=-((t=I(t)).y-this.y),n=t.x-this.x,r=u(e,n);return r<0&&(r=2*h+r),180*r/h},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},vectorAngle:function(t){return I(0,0).angleBetween(this,t)},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&I(t)||I(0,0);var e=this.x,n=this.y;return this.x=o((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=b(t.theta(I(e,n))),this},toString:function(){return this.x+"@"+this.y},update:function(t,e){return this.x=t||0,this.y=e||0,this},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN}};var v=t.Rect=function(t,e,n,r){if(!(this instanceof v))return new v(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===r?0:r};t.Rect.fromEllipse=function(t){return t=d(t),v(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},t.Rect.prototype={bbox:function(t){var e=b(t||0),o=n(i(e)),a=n(r(e)),s=this.width*a+this.height*o,u=this.width*o+this.height*a;return v(this.x+(this.width-s)/2,this.y+(this.height-u)/2,s,u)},bottomLeft:function(){return I(this.x,this.y+this.height)},bottomLine:function(){return p(this.bottomLeft(),this.corner())},bottomMiddle:function(){return I(this.x+this.width/2,this.y+this.height)},center:function(){return I(this.x+this.width/2,this.y+this.height/2)},clone:function(){return v(this)},containsPoint:function(t){return(t=I(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=v(this).normalize(),n=v(t).normalize(),r=e.width,i=e.height,o=n.width,a=n.height;if(!(r&&i&&o&&a))return!1;var s=e.x,u=e.y,l=n.x,c=n.y;return o+=l,r+=s,a+=c,i+=u,s<=l&&o<=r&&u<=c&&a<=i},corner:function(){return I(this.x+this.width,this.y+this.height)},equals:function(t){var e=v(this).normalize(),n=v(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var o=Math.max(e.x,r.x),a=Math.max(e.y,r.y);return v(o,a,Math.min(n.x,i.x)-o,Math.min(n.y,i.y)-a)},intersectionWithLineFromCenterToPoint:function(t,e){t=I(t);var n,r=I(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(r,e);for(var i=[p(this.origin(),this.topRight()),p(this.topRight(),this.corner()),p(this.corner(),this.bottomLeft()),p(this.bottomLeft(),this.origin())],o=p(r,t),a=i.length-1;a>=0;--a){var s=i[a].intersection(o);if(null!==s){n=s;break}}return n&&e&&n.rotate(r,-e),n},leftLine:function(){return p(this.origin(),this.bottomLeft())},leftMiddle:function(){return I(this.x,this.y+this.height/2)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},offset:function(t,e){return I.prototype.offset.call(this,t,e)},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},origin:function(){return I(this.x,this.y)},pointNearestToPoint:function(t){if(t=I(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return I(this.x+this.width,t.y);case"left":return I(this.x,t.y);case"bottom":return I(t.x,this.y+this.height);case"top":return I(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return p(this.topRight(),this.corner())},rightMiddle:function(){return I(this.x+this.width,this.y+this.height/2)},round:function(t){var e=f(10,t||0);return this.x=l(this.x*e)/e,this.y=l(this.y*e)/e,this.width=l(this.width*e)/e,this.height=l(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},maxRectScaleToFit:function(e,n){var r,i,o,a,s,u,l,c;e=t.Rect(e),n||(n=e.center());var h=n.x,g=n.y;r=i=o=a=s=u=l=c=1/0;var f=e.origin();f.x<h&&(r=(this.x-h)/(f.x-h)),f.y<g&&(s=(this.y-g)/(f.y-g));var d=e.corner();d.x>h&&(i=(this.x+this.width-h)/(d.x-h)),d.y>g&&(u=(this.y+this.height-g)/(d.y-g));var p=e.topRight();p.x>h&&(o=(this.x+this.width-h)/(p.x-h)),p.y<g&&(l=(this.y-g)/(p.y-g));var I=e.bottomLeft();return I.x<h&&(a=(this.x-h)/(I.x-h)),I.y>g&&(c=(this.y+this.height-g)/(I.y-g)),{sx:Math.min(r,i,o,a),sy:Math.min(s,u,l,c)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return Math.min(n.sx,n.sy)},sideNearestToPoint:function(t){var e=(t=I(t)).x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=this.y+this.height-t.y,o=e,a="left";return n<o&&(o=n,a="right"),r<o&&(o=r,a="top"),i<o&&(o=i,a="bottom"),a},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},topLine:function(){return p(this.origin(),this.topRight())},topMiddle:function(){return I(this.x+this.width/2,this.y)},topRight:function(){return I(this.x+this.width,this.y)},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){t=v(t);var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner(),o=Math.min(e.x,r.x),a=Math.min(e.y,r.y),s=Math.max(n.x,i.x),u=Math.max(n.y,i.y);return v(o,a,s-o,u-a)}};var m=t.Polyline=function(t){if(!(this instanceof m))return new m(t);this.points=Array.isArray(t)?t.map(I):[]};m.prototype={pointAtLength:function(t){for(var e=this.points,n=0,r=0,i=e.length-1;r<i;r++){var o=e[r],a=e[r+1],s=o.distance(a);if(t<=(n+=s))return p(a,o).pointAt(s?(n-t)/s:0)}return null},length:function(){for(var t=this.points,e=0,n=0,r=t.length-1;n<r;n++)e+=t[n].distance(t[n+1]);return e},closestPoint:function(t){return this.pointAtLength(this.closestPointLength(t))},closestPointLength:function(t){for(var e,n=this.points,r=1/0,i=0,o=0,a=n.length-1;o<a;o++){var s=p(n[o],n[o+1]),u=s.length(),l=s.closestPointNormalizedLength(t),c=s.pointAt(l).squaredDistance(t);c<r&&(r=c,e=i+l*u),i+=u}return e},toString:function(){return this.points+""},convexHull:function(){var t,e,n,r=this.points;for(e=r.length,t=0;t<e;t++)void 0===n?n=r[t]:r[t].y<n.y?n=r[t]:r[t].y===n.y&&r[t].x>n.x&&(n=r[t]);var i=[];for(e=r.length,t=0;t<e;t++){var o=n.theta(r[t]);0===o&&(o=360);var a=[r[t],t,o];i.push(a)}if(i.sort(function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n}),i.length>2){var s=i[i.length-1];i.unshift(s)}for(var u,l,c,h,g,f,d,p={},I=[];0!==i.length;)if(l=(u=i.pop())[0],!p.hasOwnProperty(u[0]+"@@"+u[1]))for(var v=!1;!v;)if(I.length<2)I.push(u),v=!0;else{h=(c=I.pop())[0];var A=(f=(g=I.pop())[0]).cross(h,l);if(A<0)I.push(g),I.push(c),I.push(u),v=!0;else if(0===A){var C=h.angleBetween(f,l);Math.abs(C-180)<1e-10?(p[c[0]+"@@"+c[1]]=h,I.push(g)):h.equals(l)||f.equals(h)?(p[c[0]+"@@"+c[1]]=h,I.push(g)):Math.abs((C+1)%360-1)<1e-10&&(I.push(g),i.push(c))}else p[c[0]+"@@"+c[1]]=h,I.push(g)}I.length>2&&I.pop();var y=-1;for(e=I.length,t=0;t<e;t++){var b=I[t][1];(void 0===d||b<d)&&(d=b,y=t)}var w=[];if(y>0){var N=I.slice(y),x=I.slice(0,y);w=N.concat(x)}else w=I;var M=[];for(e=w.length,t=0;t<e;t++)M.push(w[t][0]);return m(M)}},t.scale={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}};var A=t.normalizeAngle=function(t){return t%360+(t<0?360:0)},C=t.snapToGrid=function(t,e){return e*Math.round(t/e)},y=t.toDeg=function(t){return 180*t/h%360},b=t.toRad=function(t,e){return(t=(e=e||!1)?t:t%360)*h/180};return t.ellipse=t.Ellipse,t.line=t.Line,t.point=t.Point,t.rect=t.Rect,t}();u=function(){"use strict";if(!("object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))))return function(){throw new Error("SVG is required to use Vectorizer.")};var t={xmlns:"http://www.w3.org/2000/svg",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink"},e=function(n,r,i){if(!(this instanceof e))return e.apply(Object.create(e.prototype),arguments);if(n){if(e.isV(n)&&(n=n.node),r=r||{},e.isString(n)){if("svg"===n.toLowerCase())n=e.createSvgDocument();else if("<"===n[0]){var o=e.createSvgDocument(n);if(o.childNodes.length>1){var a,s,u=[];for(a=0,s=o.childNodes.length;a<s;a++){var l=o.childNodes[a];u.push(new e(document.importNode(l,!0)))}return u}n=document.importNode(o.firstChild,!0)}else n=document.createElementNS(t.xmlns,n);e.ensureId(n)}return this.node=n,this.setAttributes(r),i&&this.append(i),this}};e.prototype.getTransformToElement=function(t){return(t=e.toNode(t)).getScreenCTM().inverse().multiply(this.node.getScreenCTM())},e.prototype.transform=function(t,n){var r=this.node;if(e.isUndefined(t))return e.transformStringToMatrix(this.attr("transform"));if(n&&n.absolute)return this.attr("transform",e.matrixToTransformString(t));var i=e.createSVGTransform(t);return r.transform.baseVal.appendItem(i),this},e.prototype.translate=function(t,n,r){r=r||{},n=n||0;var i=this.attr("transform")||"",o=e.parseTransformString(i);if(i=o.value,e.isUndefined(t))return o.translate;i=i.replace(/translate\([^\)]*\)/g,"").trim();var a="translate("+(r.absolute?t:o.translate.tx+t)+","+(r.absolute?n:o.translate.ty+n)+")";return this.attr("transform",(a+" "+i).trim()),this},e.prototype.rotate=function(t,n,r,i){i=i||{};var o=this.attr("transform")||"",a=e.parseTransformString(o);if(o=a.value,e.isUndefined(t))return a.rotate;o=o.replace(/rotate\([^\)]*\)/g,"").trim(),t%=360;var s="rotate("+(i.absolute?t:a.rotate.angle+t)+(void 0!==n&&void 0!==r?","+n+","+r:"")+")";return this.attr("transform",(o+" "+s).trim()),this},e.prototype.scale=function(t,n){n=e.isUndefined(n)?t:n;var r=this.attr("transform")||"",i=e.parseTransformString(r);if(r=i.value,e.isUndefined(t))return i.scale;r=r.replace(/scale\([^\)]*\)/g,"").trim();var o="scale("+t+","+n+")";return this.attr("transform",(r+" "+o).trim()),this},e.prototype.bbox=function(t,n){var r,i=this.node,o=i.ownerSVGElement;if(!o)return l.Rect(0,0,0,0);try{r=i.getBBox()}catch(t){r={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(t)return l.Rect(r);var a=this.getTransformToElement(n||o);return e.transformRect(r,a)},e.prototype.getBBox=function(t){var n,r={},i=this.node;if(!i.ownerSVGElement)return l.Rect(0,0,0,0);if(t&&(t.target&&(r.target=e.toNode(t.target)),t.recursive&&(r.recursive=t.recursive)),r.recursive){var o=this.children(),a=o.length;if(0===a)return this.getBBox({target:r.target,recursive:!1});r.target||(r.target=this);for(var s=0;s<a;s++){var u,c=o[s];u=0===c.children().length?c.getBBox({target:r.target,recursive:!1}):c.getBBox({target:r.target,recursive:!0}),n=n?n.union(u):u}return n}try{n=i.getBBox()}catch(t){n={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(r.target){var h=this.getTransformToElement(r.target);return e.transformRect(n,h)}return l.Rect(n)},e.prototype.text=function(t,n){t=e.sanitizeText(t);var r,i=(n=n||{}).eol,o=t.split("\n");t?this.removeAttr("display"):this.attr("display","none"),this.attr("xml:space","preserve"),this.node.textContent="";var a=this.node;if(n.textPath){var s=this.find("defs");0===s.length&&(s=e("defs"),this.append(s));var u=Object(n.textPath)===n.textPath?n.textPath.d:n.textPath;if(u){var l=e("path",{d:u});s.append(l)}var c=e("textPath");!n.textPath["xlink:href"]&&l&&c.attr("xlink:href","#"+l.node.id),Object(n.textPath)===n.textPath&&c.attr(n.textPath),this.append(c),a=c.node}var h=0,g=(void 0!==n.x?n.x:this.attr("x"))||0,f=n.lineHeight||"1em";"auto"===n.lineHeight&&(f="1.5em");for(var d=0,p=0;p<o.length;p++){var I={class:"v-line"};0===p?I.dy="0em":(I.dy=f,I.x=g);var v=e("tspan",I),m=o.length-1,A=o[p];if(A){var C=0;if(n.annotations){for(var y=e.annotateString(o[p],e.isArray(n.annotations)?n.annotations:[n.annotations],{offset:-h,includeAnnotationIndices:n.includeAnnotationIndices}),b=y.length-1,w=0;w<y.length;w++){var N=y[w];if(e.isObject(N)){var x=parseFloat(N.attrs["font-size"]);x&&x>C&&(C=x),r=e("tspan",N.attrs),n.includeAnnotationIndices&&r.attr("annotations",N.annotations),N.attrs.class&&r.addClass(N.attrs.class),i&&w===b&&p!==m&&(N.t+=i),r.node.textContent=N.t}else i&&w===b&&p!==m&&(N+=i),r=document.createTextNode(N||" ");v.append(r)}"auto"===n.lineHeight&&C&&0!==p&&v.attr("dy",1.2*C+"px")}else i&&p!==m&&(A+=i),v.node.textContent=A;0===p&&(d=C)}else v.addClass("v-empty-line"),v.node.style.fillOpacity=0,v.node.style.strokeOpacity=0,v.node.textContent="-";e(a).append(v),h+=A.length+1}return null===this.attr("y")&&this.attr("y",d||"0.8em"),this},e.prototype.removeAttr=function(t){var n=e.qualifyAttr(t),r=this.node;return n.ns?r.hasAttributeNS(n.ns,n.local)&&r.removeAttributeNS(n.ns,n.local):r.hasAttribute(t)&&r.removeAttribute(t),this},e.prototype.attr=function(t,n){if(e.isUndefined(t)){for(var r=this.node.attributes,i={},o=0;o<r.length;o++)i[r[o].name]=r[o].value;return i}if(e.isString(t)&&e.isUndefined(n))return this.node.getAttribute(t);if("object"==typeof t)for(var a in t)t.hasOwnProperty(a)&&this.setAttribute(a,t[a]);else this.setAttribute(t,n);return this},e.prototype.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},e.prototype.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},e.prototype.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},e.prototype.append=function(t){e.isArray(t)||(t=[t]);for(var n=0,r=t.length;n<r;n++)this.node.appendChild(e.toNode(t[n]));return this},e.prototype.prepend=function(t){var n=this.node.firstChild;return n?e(n).before(t):this.append(t)},e.prototype.before=function(t){var n=this.node,r=n.parentNode;if(r){e.isArray(t)||(t=[t]);for(var i=0,o=t.length;i<o;i++)r.insertBefore(e.toNode(t[i]),n)}return this},e.prototype.appendTo=function(t){return e.toNode(t).appendChild(this.node),this},e.prototype.svg=function(){return this.node instanceof window.SVGSVGElement?this:e(this.node.ownerSVGElement)},e.prototype.defs=function(){var t=this.svg().node.getElementsByTagName("defs");return t&&t.length?e(t[0]):void 0},e.prototype.clone=function(){var t=e(this.node.cloneNode(!0));return t.node.id=e.uniqueId(),t},e.prototype.findOne=function(t){var n=this.node.querySelector(t);return n?e(n):void 0},e.prototype.find=function(t){var n=[],r=this.node.querySelectorAll(t);if(r)for(var i=0;i<r.length;i++)n.push(e(r[i]));return n},e.prototype.children=function(){for(var t=this.node.childNodes,n=[],r=0;r<t.length;r++){1===t[r].nodeType&&n.push(e(t[r]))}return n},e.prototype.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},e.prototype.findParentByClass=function(t,n){for(var r=this.node.ownerSVGElement,i=this.node.parentNode;i&&i!==n&&i!==r;){var o=e(i);if(o.hasClass(t))return o;i=i.parentNode}return null},e.prototype.contains=function(t){var n=this.node,r=e.toNode(t),i=r&&r.parentNode;return n===i||!!(i&&1===i.nodeType&&16&n.compareDocumentPosition(i))},e.prototype.toLocalPoint=function(t,e){var n=this.svg().node,r=n.createSVGPoint();r.x=t,r.y=e;try{var i=r.matrixTransform(n.getScreenCTM().inverse()),o=this.getTransformToElement(n).inverse()}catch(t){return r}return i.matrixTransform(o)},e.prototype.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},e.prototype.translateAndAutoOrient=function(t,n,r){var i=this.scale();this.attr("transform",""),this.scale(i.sx,i.sy);var o=this.svg().node,a=this.getBBox({target:r||o}),s=o.createSVGTransform();s.setTranslate(-a.x-a.width/2,-a.y-a.height/2);var u=o.createSVGTransform(),c=l.point(t).changeInAngle(t.x-n.x,t.y-n.y,n);u.setRotate(c,0,0);var h=o.createSVGTransform(),g=l.point(t).move(n,a.width/2);h.setTranslate(t.x+(t.x-g.x),t.y+(t.y-g.y));var f=this.getTransformToElement(r||o),d=o.createSVGTransform();d.setMatrix(h.matrix.multiply(u.matrix.multiply(s.matrix.multiply(f))));var p=e.decomposeMatrix(d.matrix);return this.translate(p.translateX,p.translateY),this.rotate(p.rotation),this},e.prototype.animateAlongPath=function(t,n){n=e.toNode(n);var r=e.ensureId(n),i=e("animateMotion",t),o=e("mpath",{"xlink:href":"#"+r});i.append(o),this.append(i);try{i.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var a=i.node;a.animators=[];var s=a.getAttribute("id");s&&(id2anim[s]=a);for(var u=getTargets(a),l=0,c=u.length;l<c;l++){var h=u[l],g=new Animator(a,h,l);animators.push(g),a.animators[l]=g,g.register()}}}return this},e.prototype.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},e.prototype.addClass=function(t){if(!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},e.prototype.removeClass=function(t){if(this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},e.prototype.toggleClass=function(t,n){return(e.isUndefined(n)?this.hasClass(t):!n)?this.removeClass(t):this.addClass(t),this},e.prototype.sample=function(t){t=t||1;for(var e,n=this.node,r=n.getTotalLength(),i=[],o=0;o<r;)e=n.getPointAtLength(o),i.push({x:e.x,y:e.y,distance:o}),o+=t;return i},e.prototype.convertToPath=function(){var t=e("path");t.attr(this.attr());var n=this.convertToPathData();return n&&t.attr("d",n),t},e.prototype.convertToPathData=function(){var t=this.node.tagName.toUpperCase();switch(t){case"PATH":return this.attr("d");case"LINE":return e.convertLineToPathData(this.node);case"POLYGON":return e.convertPolygonToPathData(this.node);case"POLYLINE":return e.convertPolylineToPathData(this.node);case"ELLIPSE":return e.convertEllipseToPathData(this.node);case"CIRCLE":return e.convertCircleToPathData(this.node);case"RECT":return e.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},e.prototype.findIntersection=function(t,n){var r=this.svg().node;n=n||r;var i=this.getBBox({target:n}),o=i.center();if(i.intersectionWithLineFromCenterToPoint(t)){var a,s=this.node.localName.toUpperCase();if("RECT"===s){var u=l.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),c=this.getTransformToElement(n),h=e.decomposeMatrix(c),g=r.createSVGTransform();g.setRotate(-h.rotation,o.x,o.y);var f=e.transformRect(u,g.matrix.multiply(c));a=l.rect(f).intersectionWithLineFromCenterToPoint(t,h.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var d,p,I,v,m,A=("PATH"===s?this:this.convertToPath()).sample(),C=1/0,y=[];for(d=0;d<A.length;d++)p=A[d],I=(I=e.createSVGPoint(p.x,p.y)).matrixTransform(this.getTransformToElement(n)),(m=(p=l.point(I)).distance(o)+(v=1.1*p.distance(t)))<C?(C=m,y=[{sample:p,refDistance:v}]):m<C+1&&y.push({sample:p,refDistance:v});y.sort(function(t,e){return t.refDistance-e.refDistance}),y[0]&&(a=y[0].sample)}return a}},e.prototype.setAttribute=function(t,n){var r=this.node;if(null===n)return this.removeAttr(t),this;var i=e.qualifyAttr(t);return i.ns?r.setAttributeNS(i.ns,t,n):"id"===t?r.id=n:r.setAttribute(t,n),this},e.createSvgDocument=function(n){var r='<svg xmlns="'+t.xmlns+'" xmlns:xlink="'+t.xlink+'" version="1.1">'+(n||"")+"</svg>";return e.parseXML(r,{async:!1}).documentElement},e.idCounter=0,e.uniqueId=function(){return"v-"+ ++e.idCounter},e.toNode=function(t){return e.isV(t)?t.node:t.nodeName&&t||t[0]},e.ensureId=function(t){return(t=e.toNode(t)).id||(t.id=e.uniqueId())},e.sanitizeText=function(t){return(t||"").replace(/ /g," ")},e.isUndefined=function(t){return void 0===t},e.isString=function(t){return"string"==typeof t},e.isObject=function(t){return t&&"object"==typeof t},e.isArray=Array.isArray,e.parseXML=function(t,n){var r;n=n||{};try{var i=new DOMParser;e.isUndefined(n.async)||(i.async=n.async),r=i.parseFromString(t,"text/xml")}catch(t){r=void 0}if(!r||r.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return r},e.qualifyAttr=function(e){if(-1!==e.indexOf(":")){var n=e.split(":");return{ns:t[n[0]],local:n[1]}}return{ns:null,local:e}},e.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,e.transformSeparatorRegex=/[ ,]+/,e.transformationListRegex=/^(\w+)\((.*)\)/,e.transformStringToMatrix=function(t){var n=e.createSVGMatrix(),r=t&&t.match(e.transformRegex);if(!r)return n;for(var i=0,o=r.length;i<o;i++){var a=r[i].match(e.transformationListRegex);if(a){var s,u,l,c,h,g=e.createSVGMatrix(),f=a[2].split(e.transformSeparatorRegex);switch(a[1].toLowerCase()){case"scale":s=parseFloat(f[0]),u=void 0===f[1]?s:parseFloat(f[1]),g=g.scaleNonUniform(s,u);break;case"translate":l=parseFloat(f[0]),c=parseFloat(f[1]),g=g.translate(l,c);break;case"rotate":h=parseFloat(f[0]),l=parseFloat(f[1])||0,c=parseFloat(f[2])||0,g=0!==l||0!==c?g.translate(l,c).rotate(h).translate(-l,-c):g.rotate(h);break;case"skewx":h=parseFloat(f[0]),g=g.skewX(h);break;case"skewy":h=parseFloat(f[0]),g=g.skewY(h);break;case"matrix":g.a=parseFloat(f[0]),g.b=parseFloat(f[1]),g.c=parseFloat(f[2]),g.d=parseFloat(f[3]),g.e=parseFloat(f[4]),g.f=parseFloat(f[5]);break;default:continue}n=n.multiply(g)}}return n},e.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},e.parseTransformString=function(t){var n,r,i;if(t){var o=e.transformSeparatorRegex;if(t.trim().indexOf("matrix")>=0){var a=e.transformStringToMatrix(t),s=e.decomposeMatrix(a);n=[s.translateX,s.translateY],i=[s.scaleX,s.scaleY],r=[s.rotation];var u=[];0===n[0]&&0===n[0]||u.push("translate("+n+")"),1===i[0]&&1===i[1]||u.push("scale("+i+")"),0!==r[0]&&u.push("rotate("+r+")"),t=u.join(" ")}else{var l=t.match(/translate\((.*?)\)/);l&&(n=l[1].split(o));var c=t.match(/rotate\((.*?)\)/);c&&(r=c[1].split(o));var h=t.match(/scale\((.*?)\)/);h&&(i=h[1].split(o))}}var g=i&&i[0]?parseFloat(i[0]):1;return{value:t,translate:{tx:n&&n[0]?parseInt(n[0],10):0,ty:n&&n[1]?parseInt(n[1],10):0},rotate:{angle:r&&r[0]?parseInt(r[0],10):0,cx:r&&r[1]?parseInt(r[1],10):void 0,cy:r&&r[2]?parseInt(r[2],10):void 0},scale:{sx:g,sy:i&&i[1]?parseFloat(i[1]):g}}},e.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},e.decomposeMatrix=function(t){var n=e.deltaTransformPoint(t,{x:0,y:1}),r=e.deltaTransformPoint(t,{x:1,y:0}),i=180/Math.PI*Math.atan2(n.y,n.x)-90,o=180/Math.PI*Math.atan2(r.y,r.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:i,skewY:o,rotation:i}},e.matrixToScale=function(t){var n,r,i,o;return t?(n=e.isUndefined(t.a)?1:t.a,o=e.isUndefined(t.d)?1:t.d,r=t.b,i=t.c):n=o=1,{sx:r?Math.sqrt(n*n+r*r):n,sy:i?Math.sqrt(i*i+o*o):o}},e.matrixToRotate=function(t){var n={x:0,y:1};return t&&(n=e.deltaTransformPoint(t,n)),{angle:l.normalizeAngle(l.toDeg(Math.atan2(n.y,n.x))-90)}},e.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},e.isV=function(t){return t instanceof e},e.isVElement=e.isV;var n=e("svg").node;return e.createSVGMatrix=function(t){var e=n.createSVGMatrix();for(var r in t)e[r]=t[r];return e},e.createSVGTransform=function(t){return e.isUndefined(t)?n.createSVGTransform():(t instanceof SVGMatrix||(t=e.createSVGMatrix(t)),n.createSVGTransformFromMatrix(t))},e.createSVGPoint=function(t,e){var r=n.createSVGPoint();return r.x=t,r.y=e,r},e.transformRect=function(t,e){var r=n.createSVGPoint();r.x=t.x,r.y=t.y;var i=r.matrixTransform(e);r.x=t.x+t.width,r.y=t.y;var o=r.matrixTransform(e);r.x=t.x+t.width,r.y=t.y+t.height;var a=r.matrixTransform(e);r.x=t.x,r.y=t.y+t.height;var s=r.matrixTransform(e),u=Math.min(i.x,o.x,a.x,s.x),c=Math.max(i.x,o.x,a.x,s.x),h=Math.min(i.y,o.y,a.y,s.y),g=Math.max(i.y,o.y,a.y,s.y);return l.Rect(u,h,c-u,g-h)},e.transformPoint=function(t,n){return l.Point(e.createSVGPoint(t.x,t.y).matrixTransform(n))},e.styleToObject=function(t){for(var e={},n=t.split(";"),r=0;r<n.length;r++){var i=n[r].split("=");e[i[0].trim()]=i[1].trim()}return e},e.createSlicePathData=function(t,e,n,r){var i=2*Math.PI-1e-6,o=t,a=e,s=n,u=r,l=(u<s&&(l=s,s=u,u=l),u-s),c=l<Math.PI?"0":"1",h=Math.cos(s),g=Math.sin(s),f=Math.cos(u),d=Math.sin(u);return l>=i?o?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":o?"M"+a*h+","+a*g+"A"+a+","+a+" 0 "+c+",1 "+a*f+","+a*d+"L"+o*f+","+o*d+"A"+o+","+o+" 0 "+c+",0 "+o*h+","+o*g+"Z":"M"+a*h+","+a*g+"A"+a+","+a+" 0 "+c+",1 "+a*f+","+a*d+"L0,0Z"},e.mergeAttrs=function(t,n){for(var r in n)"class"===r?t[r]=t[r]?t[r]+" "+n[r]:n[r]:"style"===r?e.isObject(t[r])&&e.isObject(n[r])?t[r]=e.mergeAttrs(t[r],n[r]):e.isObject(t[r])?t[r]=e.mergeAttrs(t[r],e.styleToObject(n[r])):e.isObject(n[r])?t[r]=e.mergeAttrs(e.styleToObject(t[r]),n[r]):t[r]=e.mergeAttrs(e.styleToObject(t[r]),e.styleToObject(n[r])):t[r]=n[r];return t},e.annotateString=function(t,n,r){n=n||[];for(var i,o,a,s=(r=r||{}).offset||0,u=[],l=[],c=0;c<t.length;c++){o=l[c]=t[c];for(var h=0;h<n.length;h++){var g=n[h],f=g.start+s,d=g.end+s;c>=f&&c<d&&(e.isObject(o)?o.attrs=e.mergeAttrs(e.mergeAttrs({},o.attrs),g.attrs):o=l[c]={t:t[c],attrs:g.attrs},r.includeAnnotationIndices&&(o.annotations||(o.annotations=[])).push(h))}(a=l[c-1])?e.isObject(o)&&e.isObject(a)?JSON.stringify(o.attrs)===JSON.stringify(a.attrs)?i.t+=o.t:(u.push(i),i=o):e.isObject(o)?(u.push(i),i=o):e.isObject(a)?(u.push(i),i=o):i=(i||"")+o:i=o}return i&&u.push(i),u},e.findAnnotationsAtIndex=function(t,e){var n=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&n.push(t)}),n},e.findAnnotationsBetweenIndexes=function(t,e,n){var r=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&r.push(t)}),r},e.shiftAnnotations=function(t,e,n){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)}),t},e.convertLineToPathData=function(t){return["M",(t=e(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},e.convertPolygonToPathData=function(t){var n=e.getPointsFromSvgNode(e(t).node);return n.length>0?e.svgPointsToPath(n)+" Z":null},e.convertPolylineToPathData=function(t){var n=e.getPointsFromSvgNode(e(t).node);return n.length>0?e.svgPointsToPath(n):null},e.svgPointsToPath=function(t){var e;for(e=0;e<t.length;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},e.getPointsFromSvgNode=function(t){var n=[],r=(t=e.toNode(t)).points;if(r)for(var i=0;i<r.numberOfItems;i++)n.push(r.getItem(i));return n},e.KAPPA=.5522847498307935,e.convertCircleToPathData=function(t){t=e(t);var n=parseFloat(t.attr("cx"))||0,r=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("r")),o=i*e.KAPPA;return["M",n,r-i,"C",n+o,r-i,n+i,r-o,n+i,r,"C",n+i,r+o,n+o,r+i,n,r+i,"C",n-o,r+i,n-i,r+o,n-i,r,"C",n-i,r-o,n-o,r-i,n,r-i,"Z"].join(" ")},e.convertEllipseToPathData=function(t){t=e(t);var n=parseFloat(t.attr("cx"))||0,r=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("rx")),o=parseFloat(t.attr("ry"))||i,a=i*e.KAPPA,s=o*e.KAPPA;return["M",n,r-o,"C",n+a,r-o,n+i,r-s,n+i,r,"C",n+i,r+s,n+a,r+o,n,r+o,"C",n-a,r+o,n-i,r+s,n-i,r,"C",n-i,r-s,n-a,r-o,n,r-o,"Z"].join(" ")},e.convertRectToPathData=function(t){return t=e(t),e.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},e.rectToPath=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=Math.min(t.rx||t["top-rx"]||0,r/2),a=Math.min(t.rx||t["bottom-rx"]||0,r/2),s=Math.min(t.ry||t["top-ry"]||0,i/2),u=Math.min(t.ry||t["bottom-ry"]||0,i/2);return(o||a||s||u?["M",e,n+s,"v",i-s-u,"a",a,u,0,0,0,a,u,"h",r-2*a,"a",a,u,0,0,0,a,-u,"v",-(i-u-s),"a",o,s,0,0,0,-o,-s,"h",-(r-2*o),"a",o,s,0,0,0,-o,s,"Z"]:["M",e,n,"H",e+r,"V",n+i,"H",e,"V",n,"Z"]).join(" ")},e.namespace=t,e}();var c,h,g={version:"2.0.1",config:{classNamePrefix:"joint-",defaultTheme:"default"},dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},highlighters:{},routers:{},mvc:{views:{}},setTheme:function(t,e){e=e||{},g.util.invoke(g.mvc.views,"setTheme",t,e),g.mvc.View.prototype.defaultTheme=t},env:{_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return g.env._tests[t]=e},test:function(t){var e=g.env._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=g.env._results[t];if(void 0!==n)return n;try{n=e()}catch(t){n=!1}return g.env._results[t]=n,n}},util:{hashCode:function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e},getByPath:function(t,e,n){for(var r,i=Array.isArray(e)?e.slice():e.split(n||"/");i.length;){if(r=i.shift(),!(Object(t)===t&&r in t))return;t=t[r]}return t},setByPath:function(t,e,n,r){for(var i=Array.isArray(e)?e:e.split(r||"/"),o=t,a=0,s=i.length;a<s-1;a++)o=o[i[a]]||(o[i[a]]={});return o[i[s-1]]=n,t},unsetByPath:function(t,e,n){n=n||"/";var r=Array.isArray(e)?e.slice():e.split(n),i=r.pop();if(r.length>0){var o=g.util.getByPath(t,r,n);o&&delete o[i]}else delete t[i];return t},flattenObject:function(t,e,n){e=e||"/";var r={};for(var i in t)if(t.hasOwnProperty(i)){var o="object"==typeof t[i];if(o&&n&&n(t[i])&&(o=!1),o){var a=this.flattenObject(t[i],e,n);for(var s in a)a.hasOwnProperty(s)&&(r[i+e+s]=a[s])}else r[i]=t[i]}return r},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},guid:function(t){return this.guid.id=this.guid.id||1,t.id=void 0===t.id?"j_"+this.guid.id++:t.id,t.id},toKebabCase:function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},mixin:n.assign,supplement:n.defaults,deepMixin:n.mixin,deepSupplement:n.defaultsDeep,normalizeEvent:function(t){var e=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(e){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t},nextFrame:function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=setTimeout(function(){t(n+r)},r);return e=n+r,i}}return function(e,n){return t(n?e.bind(n):e)}}(),cancelFrame:(h="undefined"!=typeof window,h&&(c=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),c=c||clearTimeout,h?c.bind(window):c),shapePerimeterConnectionPoint:function(t,e,n,r){var i,o;if(!n){var a=e.$(".scalable")[0],s=e.$(".rotatable")[0];a&&a.firstChild?n=a.firstChild:s&&s.firstChild&&(n=s.firstChild)}return n?(o=u(n).findIntersection(r,t.paper.viewport))||(i=u(n).getBBox({target:t.paper.viewport})):o=(i=e.model.getBBox()).intersectionWithLineFromCenterToPoint(r),o||i.center()},parseCssNumeric:function(t,e){e=e||[];var n={value:parseFloat(t)};if(Number.isNaN(n.value))return null;var r=e.join("|");if(g.util.isString(t)){var i=new RegExp("(\\d+)("+r+")$").exec(t);if(!i)return null;i[2]&&(n.unit=i[2])}return n},breakText:function(t,e,n,r){r=r||{};var i=e.width,o=e.height,a=r.svgDocument||u("svg").node,s=u("<text><tspan></tspan></text>").attr(n||{}).node,l=s.firstChild,c=document.createTextNode("");s.style.opacity=0,s.style.display="block",l.style.display="block",l.appendChild(c),a.appendChild(s),r.svgDocument||document.body.appendChild(a);for(var h,f,d=t.split(" "),p=[],I=[],v=0,m=0,A=d.length;v<A;v++){var C=d[v];if(c.data=I[m]?I[m]+" "+C:C,l.getComputedTextLength()<=i)I[m]=c.data,h&&(p[m++]=!0,h=0);else{if(!I[m]||h){var y=!!h;if(h=C.length-1,y||!h){if(!h){if(!I[m]){I=[];break}d.splice(v,2,C+d[v+1]),A--,p[m++]=!0,v--;continue}d[v]=C.substring(0,h),d[v+1]=C.substring(h)+d[v+1]}else d.splice(v,1,C.substring(0,h),C.substring(h)),A++,m&&!p[m-1]&&m--;v--;continue}m++,v--}if(void 0!==o){var b;if(void 0===f)f=(b="auto"===n.lineHeight?{value:1.5,unit:"em"}:g.util.parseCssNumeric(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===b.unit&&(f*=s.getBBox().height);if(f*I.length>o){I.splice(Math.floor(o/f));break}}}return r.svgDocument?a.removeChild(s):document.body.removeChild(a),I.join("\n")},imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout(function(){e(null,t)},0);var n=new XMLHttpRequest;n.open("GET",t,!0),n.addEventListener("error",function(){e(new Error("Failed to load image "+t))}),n.responseType=window.FileReader?"blob":"arraybuffer",n.addEventListener("load",function(){window.FileReader?function(e,n){if(200===e.status){var r=new FileReader;r.onload=function(t){var e=t.target.result;n(null,e)},r.onerror=function(){n(new Error("Failed to load image "+t))},r.readAsDataURL(e.response)}else n(new Error("Failed to load image "+t))}(n,e):function(e,n){if(200===e.status){var r=new Uint8Array(e.response),i=t.split(".").pop()||"png";n(null,"data:image/"+({svg:"svg+xml"}[i]||i)+";base64,"+btoa(function(t){for(var e=[],n=0;n<t.length;n+=32768)e.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return e.join("")}(r)))}else n(new Error("Failed to load image "+t))}(n,e)}),n.send()},getElementBBox:function(t){var e=r(t);if(0===e.length)throw new Error("Element not found");var n=e[0],i=n.ownerDocument,o=n.getBoundingClientRect(),a=0,s=0;if(n.ownerSVGElement){var l=u(n),c=l.getBBox({target:l.svg()});a=o.width-c.width,s=o.height-c.height}return{x:o.left+window.pageXOffset-i.documentElement.offsetLeft+a/2,y:o.top+window.pageYOffset-i.documentElement.offsetTop+s/2,width:o.width-a,height:o.height-s}},sortElements:function(t,e){var n=r(t),i=n.map(function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}});return Array.prototype.sort.call(n,e).each(function(t){i[t].call(this)})},setAttributesBySelector:function(t,e){var n=r(t);g.util.forIn(e,function(t,e){var r=n.find(e).addBack().filter(e);g.util.has(t,"class")&&(r.addClass(t.class),t=g.util.omit(t,"class")),r.attr(t)})},normalizeSides:function(t){return Object(t)!==t?{top:t=t||0,bottom:t,left:t,right:t}:{top:t.top||0,bottom:t.bottom||0,left:t.left||0,right:t.right||0}},timing:{linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},interpolate:{number:function(t,e){var n=e-t;return function(e){return t+n*e}},object:function(t,e){var n=Object.keys(t);return function(r){var i,o,a={};for(i=n.length-1;-1!=i;i--)a[o=n[i]]=t[o]+(e[o]-t[o])*r;return a}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=255&n,o=(255&r)-i,a=65280&n,s=(65280&r)-a,u=16711680&n,l=(16711680&r)-u;return function(t){return"#"+(1<<24|i+o*t&255|a+s*t&65280|u+l*t&16711680).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i[1].indexOf("."),a=o>0?i[1].length-o-1:0;t=+r[1];var s=+i[1]-t,u=r[2];return function(e){return(t+s*e).toFixed(a)+u}}},filter:{outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return g.util.template('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+n,innerRadius:e})},highlight:function(t){return g.util.template('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return g.util.template('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return g.util.template(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return g.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return g.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return g.util.template('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return g.util.template('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return g.util.template('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return g.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return g.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},format:{number:function(t,e,n){n=n||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var r=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i.exec(t),i=r[1]||" ",o=r[2]||">",a=r[3]||"",s=r[4]||"",u=r[5],l=+r[6],c=r[7],h=r[8],g=r[9],f=1,d="",p="",I=!1;switch(h&&(h=+h.substring(1)),(u||"0"===i&&"="===o)&&(u=i="0",o="=",c&&(l-=Math.floor((l-1)/4))),g){case"n":c=!0,g="g";break;case"%":f=100,p="%",g="f";break;case"p":f=100,p="%",g="r";break;case"b":case"o":case"x":case"X":"#"===s&&(d="0"+g.toLowerCase());break;case"c":case"d":I=!0,h=0;break;case"s":f=-1,g="r"}"$"===s&&(d=n.currency[0],p=n.currency[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):"e"!=g&&"f"!=g||(h=Math.max(0,Math.min(20,h))));var v=u&&c;if(I&&e%1)return"";var m=e<0||0===e&&1/e<0?(e=-e,"-"):a,A=p;if(f<0){var C=this.prefix(e,h);e=C.scale(e),A=C.symbol+p}else e*=f;var y=(e=this.convert(g,e,h)).lastIndexOf("."),b=y<0?e:e.substring(0,y),w=y<0?"":n.decimal+e.substring(y+1);function N(t){for(var e=t.length,r=[],i=0,o=n.grouping[0];e>0&&o>0;)r.push(t.substring(e-=o,e+o)),o=n.grouping[i=(i+1)%n.grouping.length];return r.reverse().join(n.thousands)}!u&&c&&n.grouping&&(b=N(b));var x=d.length+b.length+w.length+(v?0:m.length),M=x<l?new Array(x=l-x+1).join(i):"";return v&&(b=N(M+b)),m+=d,e=b+w,("<"===o?m+e+M:">"===o?M+m+e:"^"===o?M.substring(0,x>>=1)+m+e+M.substring(x):m+(v?e:M+e))+A},string:function(t,e){for(var n,r="{",i=!1,o=[];-1!==(n=t.indexOf(r));){var a,s,u;if(a=t.slice(0,n),i){u=(s=a.split(":")).shift().split("."),a=e;for(var l=0;l<u.length;l++)a=a[u[l]];s.length&&(a=this.number(s,a))}o.push(a),t=t.slice(n+1),r=(i=!i)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,n){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(n);case"e":return e.toExponential(n);case"f":return e.toFixed(n);case"r":return(e=this.round(e,this.precision(e,n))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),n))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var n=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}),r=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r<=0?r+1:r-1)/3)))),n[8+r/3]}},template:function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^\{\} ]+) ?\}|\{\{([^\{\} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(t){for(var e=Array.from(arguments).slice(1,4).find(function(t){return!!t}).split("."),r=n[e.shift()];void 0!==r&&e.length;)r=r[e.shift()];return void 0!==r?r:""})}},toggleFullScreen:function(t){var e=window.top.document;function n(t,e){for(var n=["webkit","moz","ms","o",""],r=0;r<n.length;r++){var i=n[r],o=i?i+e:e.substr(0,1).toLowerCase()+e.substr(1);if(void 0!==t[o])return g.util.isFunction(t[o])?t[o]():t[o]}}t=t||e.body,n(e,"FullscreenElement")||n(e,"FullScreenElement")?n(e,"ExitFullscreen")||n(e,"CancelFullScreen"):n(t,"RequestFullscreen")||n(t,"RequestFullScreen")},addClassNamePrefix:function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,g.config.classNamePrefix.length)!==g.config.classNamePrefix&&(t=g.config.classNamePrefix+t),t}).join(" "):t},removeClassNamePrefix:function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,g.config.classNamePrefix.length)===g.config.classNamePrefix&&(t=t.substr(g.config.classNamePrefix.length)),t}).join(" "):t},wrapWith:function(t,e,n){if(g.util.isString(n)){if(!g.util.wrappers[n])throw new Error('Unknown wrapper: "'+n+'"');n=g.util.wrappers[n]}if(!g.util.isFunction(n))throw new Error("Wrapper must be a function.");this.toArray(e).forEach(function(e){t[e]=n(t[e])})},wrappers:{cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof g.dia.Cell?r=e:r instanceof g.dia.Cell&&(e.length>1&&e.pop(),r=e)),i instanceof g.dia.Cell&&(i={}),t.call(this,r,i)}}},sortedIndex:n.sortedIndexBy||n.sortedIndex,uniq:n.uniqBy||n.uniq,uniqueId:n.uniqueId,sortBy:n.sortBy,isFunction:n.isFunction,result:n.result,union:n.union,invoke:n.invokeMap||n.invoke,difference:n.difference,intersection:n.intersection,omit:n.omit,pick:n.pick,has:n.has,bindAll:n.bindAll,assign:n.assign,defaults:n.defaults,defaultsDeep:n.defaultsDeep,isPlainObject:n.isPlainObject,isEmpty:n.isEmpty,isEqual:n.isEqual,noop:function(){},cloneDeep:n.cloneDeep,toArray:n.toArray,flattenDeep:n.flattenDeep,camelCase:n.camelCase,groupBy:n.groupBy,forIn:n.forIn,without:n.without,debounce:n.debounce,clone:n.clone,isBoolean:function(t){var e=Object.prototype.toString;return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===e.call(t)},isObject:function(t){return!!t&&("object"==typeof t||"function"==typeof t)},isNumber:function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===e.call(t)},isString:function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===e.call(t)},merge:function(){if(n.mergeWith){var t=Array.from(arguments),e=t[t.length-1],r=this.isFunction(e)?e:this.noop;return t.push(function(t,e){var n=r(t,e);return void 0!==n?n:Array.isArray(t)&&!Array.isArray(e)?e:void 0}),n.mergeWith.apply(this,t)}return n.merge.apply(this,arguments)}}};if(g.mvc.View=e.View.extend({options:{},theme:null,themeClassNamePrefix:g.util.addClassNamePrefix("theme-"),requireSetThemeOverride:!1,defaultTheme:g.config.defaultTheme,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=g.util.assign({},this.options,t),e.View.call(this,t)},initialize:function(t){g.util.bindAll(this,"setTheme","onSetTheme","remove","onRemove"),g.mvc.views[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},_ensureElement:function(){if(this.el)this.setElement(g.util.result(this,"el"));else{var t=g.util.result(this,"tagName"),e=g.util.assign({},g.util.result(this,"attributes"));this.id&&(e.id=g.util.result(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_createElement:function(t){return this.svgElement?document.createElementNS(u.namespace.xmlns,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=u(this.el))},_ensureElClassName:function(){var t=g.util.result(this,"className"),e=g.util.addClassNamePrefix(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)},init:function(){},onRender:function(){},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),g.mvc.views[this.cid]=null,e.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid}},{extend:function(){var t=Array.from(arguments),n=t[0]&&g.util.assign({},t[0])||{},r=t[1]&&g.util.assign({},t[1])||{},i=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return i&&i.apply(this,arguments),this.onRender(),this},e.View.extend.call(this,n,r)}}),g.dia.GraphCells=e.Collection.extend({cellNamespace:g.shapes,initialize:function(t,e){e.cellNamespace&&(this.cellNamespace=e.cellNamespace),this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=new("link"===t.type?g.dia.Link:g.util.getByPath(r,t.type,".")||g.dia.Element)(t,e);return i.graph=n.graph,i},comparator:function(t){return t.get("z")||0}}),g.dia.Graph=e.Model.extend({_batches:{},initialize:function(t,n){n=n||{};var r=new g.dia.GraphCells([],{model:n.cellModel,cellNamespace:n.cellNamespace,graph:this});e.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this.on("batch:stop",this._onBatchStop,this),this._out={},this._in={},this._nodes={},this._edges={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.hasActiveBatch("to-front")||this.hasActiveBatch("to-back")||this.get("cells").sort()},_onBatchStop:function(t){var e=t&&t.batchName;"to-front"!==e&&"to-back"!==e||this.hasActiveBatch(e)||this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.get("source"),n=t.get("target");e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.get("source"),n=t.get("target");e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.get("source");n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,n,r){var i;return"object"==typeof t?(i=t,r=n):(i={})[t]=n,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,r),i=g.util.omit(i,"cells")),e.Model.prototype.set.call(this,i,r)},clear:function(t){t=g.util.assign({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var n=e.sortBy(function(t){return t.isLink()?1:2});do{n.shift().remove(t)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,n){var r;if(t instanceof e.Model?(r=t.attributes,t.graph||n&&n.dry||(t.graph=this)):r=t,!g.util.isString(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,n){return Array.isArray(t)?this.addCells(t,n):(t instanceof e.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,n),n||{}),this)},addCells:function(t,e){return t.length&&(t=g.util.flattenDeep(t),e.position=t.length,this.startBatch("add"),t.forEach(function(t){e.position--,this.addCell(t,e)},this),this.stopBatch("add")),this},resetCells:function(t,e){var n=g.util.toArray(t).map(function(t){return this._prepareCell(t,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),g.util.invoke(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return Object.keys(this._nodes).map(this.getCell,this)},getLinks:function(){return Object.keys(this._edges).map(this.getCell,this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var n=(e=e||{}).inbound,r=e.outbound;void 0===n&&void 0===r&&(n=r=!0);var i=[],o={};if(r&&g.util.forIn(this.getOutboundEdges(t.id),function(t,e){o[e]||(i.push(this.getCell(e)),o[e]=!0)}.bind(this)),n&&g.util.forIn(this.getInboundEdges(t.id),function(t,e){o[e]||(i.push(this.getCell(e)),o[e]=!0)}.bind(this)),e.deep){var a=t.getEmbeddedCells({deep:!0}),s={};a.forEach(function(t){t.isLink()&&(s[t.id]=!0)}),a.forEach(function(t){t.isLink()||(r&&g.util.forIn(this.getOutboundEdges(t.id),function(t,e){o[e]||s[e]||(i.push(this.getCell(e)),o[e]=!0)}.bind(this)),n&&g.util.forIn(this.getInboundEdges(t.id),function(t,e){o[e]||s[e]||(i.push(this.getCell(e)),o[e]=!0)}.bind(this)))},this)}return i},getNeighbors:function(t,e){var n=(e=e||{}).inbound,r=e.outbound;void 0===n&&void 0===r&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce(function(i,o){var a=o.get("source"),s=o.get("target"),u=o.hasLoop(e);if(n&&g.util.has(a,"id")&&!i[a.id]){var l=this.getCell(a.id);!u&&(!l||l===t||e.deep&&l.isEmbeddedIn(t))||(i[a.id]=l)}if(r&&g.util.has(s,"id")&&!i[s.id]){var c=this.getCell(s.id);!u&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(i[s.id]=c)}return i}.bind(this),{});return g.util.toArray(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e},this);t=t.sort(function(t,e){return t.length-e.length});var e=g.util.toArray(t.shift()).find(function(e){return t.every(function(t){return t.includes(e)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},g.util.assign({},e,{outbound:!0})),n},cloneCells:function(t){t=g.util.uniq(t);var e=g.util.toArray(t).reduce(function(t,e){return t[e.id]=e.clone(),t},{});return g.util.toArray(t).forEach(function(t){var n=e[t.id];if(n.isLink()){var r=n.get("source"),i=n.get("target");r.id&&e[r.id]&&n.prop("source/id",e[r.id].id),i.id&&e[i.id]&&n.prop("target/id",e[i.id].id)}var o=t.get("parent");o&&e[o]&&n.set("parent",e[o].id);var a=g.util.toArray(t.get("embeds")).reduce(function(t,n){return e[n]&&t.push(e[n].id),t},[]);g.util.isEmpty(a)||n.set("embeds",a)}),e},cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],o=[];return g.util.toArray(t).forEach(function(t){(r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t)),e.deep)&&t.getEmbeddedCells({deep:!0}).forEach(function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t))})}),o.forEach(function(t){var e=t.get("source"),o=t.get("target");if(e.id&&!r[e.id]){var a=this.getCell(e.id);n.push(a),r[a.id]=a,i.push(a)}if(o.id&&!r[o.id]){var s=this.getCell(o.id);n.push(this.getCell(o.id)),r[s.id]=s,i.push(s)}},this),i.forEach(function(t){this.getConnectedLinks(t,e).forEach(function(t){var e=t.get("source"),i=t.get("target");!r[t.id]&&e.id&&r[e.id]&&i.id&&r[i.id]&&(n.push(t),r[t.id]=t)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},g.util.assign({},e,{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n){n=n||{};var r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var a=o.shift();if(!r[a.id]){if(r[a.id]=!0,!1===e(a,i[a.id]))return;this.getNeighbors(a,n).forEach(function(t){i[t.id]=i[a.id]+1,o.push(t)})}}},dfs:function(t,e,n,r,i){n=n||{};var o=r||{},a=i||0;!1!==e(t,a)&&(o[t.id]=!0,this.getNeighbors(t,n).forEach(function(t){o[t.id]||this.dfs(t,e,n,o,a+1)},this))},getSources:function(){var t=[];return g.util.forIn(this._nodes,function(e,n){this._in[n]&&!g.util.isEmpty(this._in[n])||t.push(this.getCell(n))}.bind(this)),t},getSinks:function(){var t=[];return g.util.forIn(this._nodes,function(e,n){this._out[n]&&!g.util.isEmpty(this._out[n])||t.push(this.getCell(n))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||g.util.isEmpty(this._in[t.id])},isSink:function(t){return!this._out[t.id]||g.util.isEmpty(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){var r=(n=n||{}).inbound,i=n.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=!1;return this.getConnectedLinks(t,n).forEach(function(t){var n=t.get("source"),a=t.get("target");return r&&g.util.has(n,"id")&&n.id===e.id?(o=!0,!1):i&&g.util.has(a,"id")&&a.id===e.id?(o=!0,!1):void 0}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.get("source").id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){g.util.invoke(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(function(e){return e.getBBox().containsPoint(t)})},findModelsInArea:function(t,e){t=l.rect(t);var n=(e=g.util.defaults(e||{},{strict:!1})).strict?"containsRect":"intersect";return this.getElements().filter(function(e){return t[n](e.getBBox())})},findModelsUnderElement:function(t,e){e=g.util.defaults(e||{},{searchBy:"bbox"});var n=t.getBBox();return("bbox"===e.searchBy?this.findModelsInArea(n):this.findModelsFromPoint(n[e.searchBy]())).filter(function(e){return t.id!==e.id&&!e.isEmbeddedIn(t)})},getBBox:function(t,e){return this.getCellsBBox(t||this.getElements(),e)},getCellsBBox:function(t,e){return g.util.toArray(t).reduce(function(t,n){return n.isLink()?t:t?t.union(n.getBBox(e)):n.getBBox(e)},null)},translate:function(t,e,n){var r=this.getCells().filter(function(t){return!t.isEmbedded()});return g.util.invoke(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),a=Math.max(e/i.height,0);g.util.invoke(n,"scale",o,a,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",g.util.assign({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",g.util.assign({},e,{batchName:t}))},hasActiveBatch:function(t){return t?!!this._batches[t]:g.util.toArray(this._batches).some(function(t){return t>0})}}),g.util.wrapWith(g.dia.Graph.prototype,["resetCells","addCells","removeCells"],"cells"),function(t,e,n,r,i){function o(t){return i.isString(t)&&"%"===t.slice(-1)}function a(t,e){return function(n,r){var i=o(n);n=parseFloat(n),i&&(n/=100);var a={};if(isFinite(n)){var s=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);a[t]=s}return a}}function s(t,e,r){return function(i,a){var s,u=o(i);if(i=parseFloat(i),u&&(i/=100),isFinite(i)){var l=a[r]();s=u||i>0&&i<1?l[t]+a[e]*i:l[t]+i}var c=n.Point();return c[t]=s||0,c}}function l(t,e,r){return function(i,a){var s;s="middle"===i?a[e]/2:i===r?a[e]:isFinite(i)?i>-1&&i<1?-a[e]*i:-i:o(i)?a[e]*parseFloat(i)/100:0;var u=n.Point();return u[t]=-(a[t]+s),u}}var c=t.dia.attributes={xlinkHref:{set:"xlink:href"},xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},filter:{qualify:i.isPlainObject,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:i.isPlainObject,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},stroke:{qualify:i.isPlainObject,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},sourceMarker:{qualify:i.isPlainObject,set:function(t){return{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:i.isPlainObject,set:function(t){return t=i.assign({transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:i.isPlainObject,set:function(t){return{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{set:function(e,n,i,o){var a=r(i),s=a.data("joint-text"),l=t.util.pick(o,"lineHeight","annotations","textPath","x","eol"),c=l.fontSize=o["font-size"]||o.fontSize,h=JSON.stringify([e,l]);void 0!==s&&s===h||(c&&i.setAttribute("font-size",c),u(i).text(""+e,l),a.data("joint-text",h))}},textWrap:{qualify:i.isPlainObject,set:function(e,n,r,i){var a=e.width||0;o(a)?n.width*=parseFloat(a)/100:a<=0?n.width+=a:n.width=a;var s=e.height||0;o(s)?n.height*=parseFloat(s)/100:s<=0?n.height+=s:n.height=s;var l=t.util.breakText(""+e.text,n,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily},{svgDocument:this.paper.svg});u(r).text(l)}},lineHeight:{qualify:function(t,e,n){return void 0!==n.text}},textPath:{qualify:function(t,e,n){return void 0!==n.text}},annotations:{qualify:function(t,e,n){return void 0!==n.text}},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:i.isPlainObject,set:function(t,e,n){r(n).css(t)}},html:{set:function(t,e,n){r(n).html(t+"")}},ref:{},refX:{position:s("x","width","origin")},refY:{position:s("y","height","origin")},refDx:{position:s("x","width","corner")},refDy:{position:s("y","height","corner")},refWidth:{set:a("width","width")},refHeight:{set:a("height","height")},refRx:{set:a("rx","width")},refRy:{set:a("ry","height")},refCx:{set:a("cx","width")},refCy:{set:a("cy","height")},xAlignment:{offset:l("x","width","right")},yAlignment:{offset:l("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}}};c.refX2=c.refX,c.refY2=c.refY,c["ref-x"]=c.refX,c["ref-y"]=c.refY,c["ref-dy"]=c.refDy,c["ref-dx"]=c.refDx,c["ref-width"]=c.refWidth,c["ref-height"]=c.refHeight,c["x-alignment"]=c.xAlignment,c["y-alignment"]=c.yAlignment}(g,0,l,r,g.util),g.dia.Cell=e.Model.extend({constructor:function(t,e){var n,r=t||{};this.cid=g.util.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=g.util.result(this,"defaults"))&&(r=g.util.merge({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){var t=this.constructor.prototype.defaults.attrs||{},e=this.attributes.attrs,n={};g.util.forIn(e,function(e,r){var i=t[r];g.util.forIn(e,function(t,e){g.util.isObject(t)&&!Array.isArray(t)?g.util.forIn(t,function(t,o){i&&i[e]&&g.util.isEqual(i[e][o],t)||(n[r]=n[r]||{},(n[r][e]||(n[r][e]={}))[o]=t)}):i&&g.util.isEqual(i[e],t)||(n[r]=n[r]||{},n[r][e]=t)})});var r=g.util.cloneDeep(g.util.omit(this.attributes,"attrs"));return r.attrs=n,r},initialize:function(t){t&&t.id||this.set("id",g.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},processPorts:function(){var t=this.ports,e={};g.util.forIn(this.get("attrs"),function(t,n){t&&t.port&&(void 0!==t.port.id?e[t.port.id]=t.port:e[t.port]={id:t.port})});var n={};(g.util.forIn(t,function(t,r){e[r]||(n[r]=!0)}),this.graph&&!g.util.isEmpty(n))&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(t){n[t.get("target").port]&&t.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(t){n[t.get("source").port]&&t.remove()}));this.ports=e},remove:function(t){t=t||{};var e=this.graph;e&&e.startBatch("remove");var n=this.get("parent");n&&(e&&e.getCell(n)).unembed(this);return g.util.invoke(this.getEmbeddedCells(),"remove",t),this.trigger("remove",this,this.collection,t),e&&e.stopBatch("remove"),this},toFront:function(t){if(this.graph){t=t||{};var e=(this.graph.getLastCell().get("z")||0)+1;if(this.startBatch("to-front").set("z",e,t),t.deep)this.getEmbeddedCells({deep:!0,breadthFirst:!0}).forEach(function(n){n.set("z",++e,t)});this.stopBatch("to-front")}return this},toBack:function(t){if(this.graph){t=t||{};var e=(this.graph.getFirstCell().get("z")||0)-1;if(this.startBatch("to-back"),t.deep)this.getEmbeddedCells({deep:!0,breadthFirst:!0}).reverse().forEach(function(n){n.set("z",e--,t)});this.set("z",e,t).stopBatch("to-back")}return this},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var n=g.util.assign([],this.get("embeds"));return n[t.isLink()?"unshift":"push"](t.id),t.set("parent",this.id,e),this.set("embeds",g.util.uniq(n),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",g.util.without(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getAncestors:function(){var t=[],e=this.get("parent");if(!this.graph)return t;for(;void 0!==e;){var n=this.graph.getCell(e);if(void 0===n)break;t.push(n),e=n.get("parent")}return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else(e=this.getEmbeddedCells()).forEach(function(n){e.push.apply(e,n.getEmbeddedCells(t))});else e=g.util.toArray(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=g.util.isString(t)?t:t.id,r=this.get("parent");if(e=g.util.defaults({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).get("parent")}return!1}return r===n},isEmbedded:function(){return!!this.get("parent")},clone:function(t){if((t=t||{}).deep)return g.util.toArray(g.dia.Graph.prototype.cloneCells.call(null,[this].concat(this.getEmbeddedCells({deep:!0}))));var n=e.Model.prototype.clone.apply(this,arguments);return n.set("id",g.util.uuid()),n.unset("embeds"),n.unset("parent"),n},prop:function(t,e,n){var r=g.util.isString(t);if(r||Array.isArray(t)){if(arguments.length>1){var i,o;r?o=(i=t).split("/"):(i=t.join("/"),o=t.slice());var a=o[0],s=o.length;if((n=n||{}).propertyPath=i,n.propertyValue=e,n.propertyPathArray=o,1===s)return this.set(a,e,n);for(var u={},l=u,c=a,h=1;h<s;h++){var f=o[h],d=Number.isFinite(r?Number(f):f);l=l[c]=d?[]:{},c=f}u=g.util.setByPath(u,o,e,"/");var p=g.util.merge({},this.attributes);n.rewrite&&g.util.unsetByPath(p,i,"/");var I=g.util.merge(p,u);return this.set(a,I[a],n)}return g.util.getByPath(this.attributes,t,"/")}return this.set(g.util.merge({},this.attributes,t),e)},removeProp:function(t,e){(e=e||{}).dirty=!0;var n=Array.isArray(t)?t:t.split("/");if(1===n.length)return this.unset(t,e);var r=n[0],i=n.slice(1),o=g.util.cloneDeep(this.get(r));return g.util.unsetByPath(o,i,"/"),this.set(r,o,e)},attr:function(t,e,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):g.util.isString(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/";var i={duration:100,delay:10,timingFunction:g.util.timing.linear,valueFunction:g.util.interpolate.number};n=g.util.assign(i,n);var o,a=0,s=function(e){var r,i,u;(i=(e-=a=a||e)/n.duration)<1?this._transitionIds[t]=r=g.util.nextFrame(s):(i=1,delete this._transitionIds[t]),u=o(n.timingFunction(i)),n.transitionId=r,this.prop(t,u,n),r||this.trigger("transition:end",this,t)}.bind(this),u=function(i){this.stopTransitions(t),o=n.valueFunction(g.util.getByPath(this.attributes,t,r),e),this._transitionIds[t]=g.util.nextFrame(i),this.trigger("transition:start",this,t)}.bind(this);return setTimeout(u,n.delay,s)},getTransitions:function(){return Object.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var n=t&&t.split(e);return Object.keys(this._transitionIds).filter(n&&function(t){return g.util.isEqual(n,t.split(e).slice(0,n.length))}).forEach(function(t){g.util.cancelFrame(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,g.util.assign({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,g.util.assign({},e,{cell:this})),this}},{getAttributeDefinition:function(t){var e=this.attributes,n=g.dia.attributes;return e&&e[t]||n[t]},define:function(t,e,n,r){n=g.util.assign({defaults:g.util.defaultsDeep({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return g.util.setByPath(g.shapes,t,i,"."),i}}),g.dia.CellView=g.mvc.View.extend({tagName:"g",svgElement:!0,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(e,n,r){t.push("type-"+r.slice(0,n+1).join("-"))}),t.join(" ")},attributes:function(){return{"model-id":this.model.id}},constructor:function(t){t.id=t.id||g.util.guid(this),g.mvc.View.call(this,t)},init:function(){g.util.bindAll(this,"remove","update"),this.$el.data("view",this),this.$el.attr("data-type",this.model.get("type")),this.listenTo(this.model,"change:attrs",this.onChangeAttrs)},onChangeAttrs:function(t,e,n){return n.dirty?this.render():this.update(t,e,n)},can:function(t){var e=g.util.isFunction(this.options.interactive)?this.options.interactive(this):this.options.interactive;return g.util.isObject(e)&&!1!==e[t]||g.util.isBoolean(e)&&!1!==e},findBySelector:function(t,e){var n=r(e||this.el);return"."===t?n:n.find(t)},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getStrokeBBox:function(t){var e=!!t;t=t||this.el;var n,r=u(t).getBBox({target:this.paper.viewport});return n=e?u(t).attr("stroke-width"):this.model.attr("rect/stroke-width")||this.model.attr("circle/stroke-width")||this.model.attr("ellipse/stroke-width")||this.model.attr("path/stroke-width"),n=parseFloat(n)||0,l.rect(r).moveAndExpand({x:-n/2,y:-n/2,width:n,height:n})},getBBox:function(){return this.vel.getBBox({target:this.paper.svg})},highlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!==this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t),n=this.$el;0===e.length&&(e=n);do{var r=e.attr("magnet");if((r||e.is(n))&&"false"!==r)return e[0];e=e.parent()}while(e.length>0)},getSelector:function(t,e){if(t===this.el)return e;var n;if(t){var r=u(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){g.util.isEmpty(e)||(t instanceof SVGElement?u(t).attr(e):r(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,o,a,s,u,l,c,h=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],!(i=this.getAttributeDefinition(n))||g.util.isFunction(i.qualify)&&!i.qualify.call(this,r,t,e)?(s||(s={}),s[g.util.toKebabCase(n)]=r):(g.util.isString(i.set)&&(s||(s={}),s[i.set]=r),null!==r&&h.push(n,i)));for(o=0,a=h.length;o<a;o+=2)n=h[o],i=h[o+1],r=e[n],g.util.isFunction(i.set)&&(u||(u={}),u[n]=r),g.util.isFunction(i.position)&&(l||(l={}),l[n]=r),g.util.isFunction(i.offset)&&(c||(c={}),c[n]=r);return{raw:e,normal:s,set:u,position:l,offset:c}},updateRelativeAttributes:function(t,e,n,r){var i,o;r||(r={});var a=e.raw||{},s=e.normal||{},c=e.set,h=e.position,f=e.offset;for(i in c){o=c[i];var d=this.getAttributeDefinition(i).set.call(this,o,n.clone(),t,a);g.util.isObject(d)?g.util.assign(s,d):void 0!==d&&(s[i]=d)}if(t instanceof HTMLElement)this.setNodeAttributes(t,s);else{var p,I,v,m=s.transform,A=u.transformStringToMatrix(m),C=l.Point(A.e,A.f);if(m&&(s=g.util.omit(s,"transform"),A.e=A.f=0),h||f){var y=this.getNodeScale(t,r.scalableNode);p=y.sx,I=y.sy}var b=!1;for(i in h)o=h[i],(v=this.getAttributeDefinition(i).position.call(this,o,n.clone(),t,a))&&(C.offset(l.Point(v).scale(p,I)),b||(b=!0));this.setNodeAttributes(t,s);var w=!1;if(f){var N=t.getBoundingClientRect();if(N.width>0&&N.height>0){var x=u.transformRect(t.getBBox(),A).scale(1/p,1/I);for(i in f)o=f[i],(v=this.getAttributeDefinition(i).offset.call(this,o,x,t,a))&&(C.offset(l.Point(v).scale(p,I)),w||(w=!0))}}(void 0!==m||b||w)&&(C.round(1),A.e=C.x,A.f=C.y,t.setAttribute("transform",u.matrixToTransformString(A)))}},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},findNodesAttributes:function(t,e,n){var r={};for(var i in t)if(t.hasOwnProperty(i))for(var o=n[i]=this.findBySelector(i,e),a=0,s=o.length;a<s;a++){var l=o[a],c=u.ensureId(l),h=t[i],f=r[c];f?(f.merged||(f.merged=!0,f.attributes=g.util.cloneDeep(f.attributes)),g.util.merge(f.attributes,h)):r[c]={attributes:h,node:l,merged:!1}}return r},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=l.Rect());var r,i,o,a,s,c={},h={},g=[],f=n.roAttributes,d=this.findNodesAttributes(f||e,t,c),p=f?p=this.findNodesAttributes(e,t,c):d;for(var I in d)if(o=(a=d[I]).attributes,i=a.node,(s=this.processNodeAttributes(i,o)).set||s.position||s.offset){var v,m=p[I]&&p[I].attributes,A=m&&void 0===o.ref?m.ref:o.ref;if(A){if(!(v=(c[A]||this.findBySelector(A,t))[0]))throw new Error('dia.ElementView: "'+A+'" reference does not exists.')}else v=null;r={node:i,refNode:v,processedAttributes:s,allAttributes:m};var C=g.findIndex(function(t){return t.refNode===i});C>-1?g.splice(C,0,r):g.push(r)}else this.setNodeAttributes(i,s.normal);for(var y=0,b=g.length;y<b;y++){r=g[y],i=r.node;var w=(v=r.refNode)?u.ensureId(v):"",N=h[w];N||(N=h[w]=v?u(v).getBBox({target:n.rotatableNode||t}):n.rootBBox),f?(s=this.processNodeAttributes(i,r.allAttributes),this.mergeProcessedAttributes(s,r.processedAttributes)):s=r.processedAttributes,this.updateRelativeAttributes(i,s,N,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),g.util.assign(t.set,e.set),g.util.assign(t.position,e.position),g.util.assign(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},pointerdown:function(t,e,n){this.model.graph&&(this.model.startBatch("pointer"),this._graph=this.model.graph),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){this.notify("cell:pointerup",t,e,n),this._graph&&(this._graph.stopBatch("pointer",{cell:this.model}),delete this._graph)},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},event:function(t,e,n,r){this.notify(e,t,n,r)},setInteractivity:function(t){this.options.interactive=t}}),g.dia.Element=g.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),g.dia.Cell.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},isElement:function(){return!0},position:function(t,e,n){var r=g.util.isNumber(e);if((n=(r?n:t)||{}).parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var i=this.graph.getCell(this.get("parent")),o=i&&!i.isLink()?i.get("position"):{x:0,y:0}}if(r){if(n.parentRelative&&(t+=o.x,e+=o.y),n.deep){var a=this.get("position");this.translate(t-a.x,e-a.y,n)}else this.set("position",{x:t,y:e},n);return this}var s=l.point(this.get("position"));return n.parentRelative?s.difference(o):s},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0};if(n.restrictedArea&&n.translateBy===this.id){var i=this.getBBox({deep:!0}),o=n.restrictedArea,a=r.x-i.x,s=r.y-i.y,u=Math.max(o.x+a,Math.min(o.x+o.width+a-i.width,r.x+t)),l=Math.max(o.y+s,Math.min(o.y+o.height+s-i.height,r.y+e));t=u-r.x,e=l-r.y}var c={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(g.util.isObject(n.transition)||(n.transition={}),this.transition("position",c,g.util.assign({},n.transition,{valueFunction:g.util.interpolate.object}))):this.set("position",c,n),g.util.invoke(this.getEmbeddedCells(),"translate",t,e,n),this},size:function(t,e,n){var r=this.get("size");return void 0===t?{width:r.width,height:r.height}:(g.util.isObject(t)&&(n=e,e=g.util.isNumber(t.height)?t.height:r.height,t=g.util.isNumber(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var i=l.normalizeAngle(this.get("angle")||0),o={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(o+=Math.floor((i+45)/90),o%=4);var a=this.getBBox(),s=a[["bottomLeft","corner","topRight","origin"][o]](),u=l.point(s).rotate(a.center(),-i),c=Math.sqrt(t*t+e*e)/2,h=o*Math.PI/2;h+=Math.atan(o%2==0?e/t:t/e),h-=l.toRad(i);var g=l.point.fromPolar(c,h,u),f=l.point(g).offset(t/-2,e/-2);this.set("size",{width:t,height:e},n),this.position(f.x,f.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){if(t=t||{},!this.graph)throw new Error("Element must be part of a graph.");var e=this.getEmbeddedCells();if(e.length>0){this.startBatch("fit-embeds",t),t.deep&&g.util.invoke(e,"fitEmbeds",t);var n=this.graph.getCellsBBox(e),r=g.util.normalizeSides(t.padding);n.moveAndExpand({x:-r.left,y:-r.top,width:r.right+r.left,height:r.bottom+r.top}),this.set({position:{x:n.x,y:n.y},size:{width:n.width,height:n.height}},t),this.stopBatch("fit-embeds")}return this},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),o=this.get("size"),a=this.get("position");i.rotate(n,this.get("angle")-t);var s=i.x-o.width/2-a.x,u=i.y-o.height/2-a.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(a.x+s,a.y+u,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},getBBox:function(t){if((t=t||{}).deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var n=this.get("position"),r=this.get("size");return l.rect(n.x,n.y,r.width,r.height)}}),g.dia.ElementView=g.dia.CellView.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=g.dia.CellView.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){g.dia.CellView.prototype.initialize.apply(this,arguments);var t=this.model;this.listenTo(t,"change:position",this.translate),this.listenTo(t,"change:size",this.resize),this.listenTo(t,"change:angle",this.rotate),this.listenTo(t,"change:markup",this.render),this._initializePorts()},_initializePorts:function(){},update:function(t,e){this._removePorts();var n=this.model,r=n.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:l.Rect(n.size()),scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===r?null:e}),this._renderPorts()},renderMarkup:function(){var t=this.model.get("markup")||this.model.markup;if(!t)throw new Error("properties.markup is missing while the default render() implementation is used.");var e=g.util.template(t)(),n=u(e);this.vel.append(n)},render:function(){return this.$el.empty(),this.renderMarkup(),this.rotatableNode=this.vel.findOne(".rotatable"),(this.scalableNode=this.vel.findOne(".scalable"))&&this.update(),this.resize(),this.rotate(),this.translate(),this},resize:function(t,e,n){var r=this.model,i=r.get("size")||{width:1,height:1},o=r.get("angle")||0,a=this.scalableNode;if(!a)return 0!==o&&this.rotate(),void this.update();var s=!1;a.node.getElementsByTagName("path").length>0&&(s=!0);var u=a.getBBox({recursive:s}),l=i.width/(u.width||1),c=i.height/(u.height||1);a.attr("transform","scale("+l+","+c+")");var h=this.rotatableNode,g=h&&h.attr("transform");if(g&&"null"!==g){h.attr("transform",g+" rotate("+-o+","+i.width/2+","+i.height/2+")");var f=a.getBBox({target:this.paper.viewport});r.set("position",{x:f.x,y:f.y},n),this.rotate()}this.update()},translate:function(t,e,n){var r=this.model.get("position")||{x:0,y:0};this.vel.attr("transform","translate("+r.x+","+r.y+")")},rotate:function(){var t=this.rotatableNode;if(t){var e=this.model.get("angle")||0,n=this.model.get("size")||{width:1,height:1},r=n.width/2,i=n.height/2;0!==e?t.attr("transform","rotate("+e+","+r+","+i+")"):t.removeAttr("transform")}},getBBox:function(t){if(t&&t.useModelGeometry){var e=this.model.getBBox().bbox(this.model.get("angle"));return this.paper.localToPaperRect(e)}return g.dia.CellView.prototype.getBBox.apply(this,arguments)},prepareEmbedding:function(t){var e=(t=t||{}).model||this.model,n=(t.paper||this.paper).model;e.startBatch("to-front",t),e.toFront({deep:!0,ui:!0});var r=n.get("cells").max("z").get("z"),i=n.getConnectedLinks(e,{deep:!0});g.util.invoke(i,"set","z",r+1,{ui:!0}),e.stopBatch("to-front");var o=e.get("parent");o&&n.getCell(o).unembed(e,{ui:!0})},processEmbedding:function(t){var e=(t=t||{}).model||this.model,n=t.paper||this.paper,r=n.options,i=n.model.findModelsUnderElement(e,{searchBy:r.findParentBy});r.frontParentOnly&&(i=i.slice(-1));for(var o=null,a=this._candidateEmbedView,s=i.length-1;s>=0;s--){var u=i[s];if(a&&a.model.id==u.id){o=a;break}var l=u.findView(n);if(r.validateEmbedding.call(n,this,l)){o=l;break}}o&&o!=a&&(this.clearEmbedding(),this._candidateEmbedView=o.highlight(null,{embedding:!0})),!o&&a&&this.clearEmbedding()},clearEmbedding:function(){var t=this._candidateEmbedView;t&&(t.unhighlight(null,{embedding:!0}),this._candidateEmbedView=null)},finalizeEmbedding:function(t){t=t||{};var e=this._candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;e&&(e.model.embed(n,{ui:!0}),e.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView),g.util.invoke(r.model.getConnectedLinks(n,{deep:!0}),"reparent",{ui:!0})},pointerdown:function(t,e,n){var r=this.paper;if(t.target.getAttribute("magnet")&&this.can("addLinkFromMagnet")&&r.options.validateMagnet.call(r,this,t.target)){this.model.startBatch("add-link");var i=r.getDefaultLink(this,t.target);i.set({source:{id:this.model.id,selector:this.getSelector(t.target),port:t.target.getAttribute("port")},target:{x:e,y:n}}),r.model.addCell(i);var o=this._linkView=r.findViewByModel(i);o.pointerdown(t,e,n),o.startArrowheadMove("target",{whenNotAllowed:"remove"})}else this._dx=e,this._dy=n,this.restrictedArea=r.getRestrictedArea(this),g.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("element:pointerdown",t,e,n)},pointermove:function(t,e,n){if(this._linkView)this._linkView.pointermove(t,e,n);else{var r=this.paper.options.gridSize;if(this.can("elementMove")){var i=this.model.get("position"),o=l.snapToGrid(i.x,r)-i.x+l.snapToGrid(e-this._dx,r),a=l.snapToGrid(i.y,r)-i.y+l.snapToGrid(n-this._dy,r);this.model.translate(o,a,{restrictedArea:this.restrictedArea,ui:!0}),this.paper.options.embeddingMode&&(this._inProcessOfEmbedding||(this.prepareEmbedding(),this._inProcessOfEmbedding=!0),this.processEmbedding())}this._dx=l.snapToGrid(e,r),this._dy=l.snapToGrid(n,r),g.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("element:pointermove",t,e,n)}},pointerup:function(t,e,n){this._linkView?(this._linkView.pointerup(t,e,n),this._linkView=null,this.model.stopBatch("add-link")):(this._inProcessOfEmbedding&&(this.finalizeEmbedding(),this._inProcessOfEmbedding=!1),this.notify("element:pointerup",t,e,n),g.dia.CellView.prototype.pointerup.apply(this,arguments))},mouseenter:function(t){g.dia.CellView.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){g.dia.CellView.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)}}),g.dia.Link=g.dia.Cell.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),labelMarkup:['<g class="label">',"<rect />","<text />","</g>"].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(){return this.set({source:l.point(0,0),target:l.point(0,0)})},label:function(t,e,n){return t=t||0,arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},translate:function(t,e,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(r){return l.point(r).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!g.util.isFunction(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},r=this.get("source");r.id||(n.source=t(r));var i=this.get("target");i.id||(n.target=t(i));var o=this.get("vertices");return o&&o.length>0&&(n.vertices=o.map(t)),this.set(n,e)},reparent:function(t){var e;if(this.graph){var n=this.graph.getCell(this.get("source").id),r=this.graph.getCell(this.get("target").id),i=this.graph.getCell(this.get("parent"));n&&r&&(e=this.graph.getCommonAncestor(n,r)),!i||e&&e.id===i.id||i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.get("source").id,n=this.get("target").id;if(!e||!n)return!1;var r=e===n;if(!r&&t.deep&&this.graph){var i=this.graph.getCell(e),o=this.graph.getCell(n);r=i.isEmbeddedIn(o)||o.isEmbeddedIn(i)}return r},getSourceElement:function(){var t=this.get("source");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getTargetElement:function(){var t=this.get("target");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=g.util.isString(t)||g.util.isNumber(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}}),g.dia.LinkView=g.dia.CellView.extend({className:function(){var t=g.dia.CellView.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:100,doubleLinkTools:!1,longLinkLength:160,linkToolsOffset:40,doubleLinkToolsOffset:60,sampleInterval:50},_z:null,initialize:function(t){g.dia.CellView.prototype.initialize.apply(this,arguments),"function"!=typeof this.constructor.prototype.watchSource&&(this.constructor.prototype.watchSource=this.createWatcher("source"),this.constructor.prototype.watchTarget=this.createWatcher("target")),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){var t=this.model;this.listenTo(t,"change:markup",this.render),this.listenTo(t,"change:smooth change:manhattan change:router change:connector",this.update),this.listenTo(t,"change:toolMarkup",this.onToolsChange),this.listenTo(t,"change:labels change:labelMarkup",this.onLabelsChange),this.listenTo(t,"change:vertices change:vertexMarkup",this.onVerticesChange),this.listenTo(t,"change:source",this.onSourceChange),this.listenTo(t,"change:target",this.onTargetChange)},onSourceChange:function(t,e,n){this.watchSource(t,e),n.translateBy&&this.model.get("target").id||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onTargetChange:function(t,e,n){this.watchTarget(t,e),n.translateBy||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onVerticesChange:function(t,e,n){this.renderVertexMarkers(),n.translateBy&&n.translateBy!==this.model.id||(n.updateConnectionOnly=!0,this.update(t,null,n))},onToolsChange:function(){this.renderTools().updateToolsPosition()},onLabelsChange:function(t,e,n){var r=!0,i=this.model.previous("labels");if(i&&"propertyPathArray"in n&&"propertyValue"in n){var o=n.propertyPathArray||[],a=o.length;if(a>1)!!i[o[1]]&&(2===a?r="markup"in Object(n.propertyValue):"markup"!==o[2]&&(r=!1))}r?this.renderLabels():this.updateLabels(),this.updateLabelPositions()},render:function(){this.$el.empty();var t=this.model,e=t.get("markup")||t.markup,n=u(e);if(Array.isArray(n)||(n=[n]),this._V={},n.forEach(function(t){var e=t.attr("class");e&&(e=g.util.removeClassNamePrefix(e),this._V[r.camelCase(e)]=t)},this),!this._V.connection)throw new Error("link: no connection path in the markup");return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n),this.renderLabels(),this.watchSource(t,t.get("source")).watchTarget(t,t.get("target")).update(),this},renderLabels:function(){var t=this._V.labels;if(!t)return this;t.empty();var e=this.model,n=e.get("labels")||[],r=this._labelCache={},i=n.length;if(0===i)return this;for(var o=g.util.template(e.get("labelMarkup")||e.labelMarkup),a=u(o()),s=0;s<i;s++){var l=n[s].markup;(r[s]=l?u("g").append(u(l)):a.clone()).addClass("label").attr("label-idx",s).appendTo(t)}return this.updateLabels(),this},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model.get("labels")||[],e=this.can("labelMove"),n=0,r=t.length;n<r;n++){var i=this._labelCache[n],o=t[n];i.attr("cursor",e?"move":"default");var a=o.attrs;o.markup||(a=g.util.merge({text:{textAnchor:"middle",fontSize:14,fill:"#000000",pointerEvents:"none",yAlignment:"middle"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},a)),this.updateDOMSubtreeAttributes(i.node,a,{rootBBox:l.Rect(o.size)})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=r(this._V.linkTools.node).empty(),n=g.util.template(this.model.get("toolMarkup")||this.model.toolMarkup),i=u(n());(e.append(i.node),this._toolCache=i,this.options.doubleLinkTools)&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=g.util.template(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),t=u(n())):t=i.clone(),e.append(t.node),this._tool2Cache=t);return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=r(this._V.markerVertices.node).empty(),e=g.util.template(this.model.get("vertexMarkup")||this.model.vertexMarkup);return g.util.toArray(this.model.get("vertices")).forEach(function(n,r){t.append(u(e(g.util.assign({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=r(this._V.markerArrowheads.node);t.empty();var e=g.util.template(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=u(e({end:"source"})),this._V.targetArrowhead=u(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,n){return(n=n||{}).updateConnectionOnly||this.updateDOMSubtreeAttributes(this.el,this.model.attr()),this.updateConnection(n),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this.updatePostponed=!1,this},updateConnection:function(t){t=t||{};var e,n=this.model;if(t.translateBy&&n.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,i=t.ty||0;e=this.route=g.util.toArray(this.route).map(function(t){return l.point(t).offset(r,i)}),this._translateConnectionPoints(r,i)}else e=this.route=this.findRoute(n.get("vertices")||[],t),this._findConnectionPoints(e);var o=this.getPathData(e);this._V.connection.attr("d",o),this._V.connectionWrap&&this._V.connectionWrap.attr("d",o),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget)},_findConnectionPoints:function(t){var e,n,r,i,o=g.util.toArray(t),a=o[0];e=this.getConnectionPoint("source",this.model.get("source"),a||this.model.get("target")).round();var s=o[o.length-1];n=this.getConnectionPoint("target",this.model.get("target"),s||e).round();var u=this._markerCache;this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.getBBox(),r=l.point(e).move(a||n,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.getBBox(),i=l.point(n).move(s||e,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=r||e.clone(),u.targetPoint=i||n.clone(),this.sourcePoint=e,this.targetPoint=n},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var t,e=this.model.get("labels")||[];if(!e.length)return this;var n=this._V.connection.node,r=n.getTotalLength();if(Number.isNaN(r))return this;for(var i=0,o=e.length;i<o;i++){var a,s=e[i].position,u=g.util.isObject(s),c=u?s.distance:s,h=u?s.offset:{x:0,y:0};if(c=Number.isFinite(c)?(c=(c=c>r?r:c)<0?r+c:c)>1?c:r*c:r/2,a=n.getPointAtLength(c),g.util.isObject(h))a=l.point(a).offset(h);else if(Number.isFinite(h)){t||(t=this._samples||this._V.connection.sample(this.options.sampleInterval));for(var f,d,p,I=1/0,v=0,m=t.length;v<m;v++)d=t[v],(p=l.line(d,a).squaredLength())<I&&(I=p,f=v);var A=t[f-1],C=t[f+1],y=0;C?y=l.point(a).theta(C):A&&(y=l.point(A).theta(a)),a=l.point(a).offset(h).rotate(a,y-90)}this._labelCache[i].attr("transform","translate("+a.x+", "+a.y+")")}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===r.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},createWatcher:function(t){var e=function(e,n){this.onEndModelChange(t,e,n)};return function(n,r){r=r||{};var i=null,o=n.previous(t)||{};return o.id&&this.stopListening(this.paper.getModelById(o.id),"change",e),r.id&&(i=this.paper.getModelById(r.id),this.listenTo(i,"change",e)),e.call(this,i,{cacheOnly:!0}),this}},onEndModelChange:function(t,e,n){var r=!n.cacheOnly,i=this.model,o=i.get(t)||{};if(e){var a=this.constructor.makeSelector(o),s="source"==t?"target":"source",u=i.get(s)||{},c=u.id&&this.constructor.makeSelector(u);if(n.handleBy===this.cid&&a==c)this[t+"BBox"]=this[s+"BBox"],this[t+"View"]=this[s+"View"],this[t+"Magnet"]=this[s+"Magnet"];else if(n.translateBy){var h=this[t+"BBox"];h.x+=n.tx,h.y+=n.ty}else{var f=this.paper.findViewByModel(o.id),d=f.el.querySelector(a);this[t+"BBox"]=f.getStrokeBBox(d),this[t+"View"]=f,this[t+"Magnet"]=d}if(n.handleBy===this.cid&&n.translateBy&&i.isEmbeddedIn(e)&&!g.util.isEmpty(i.get("vertices"))&&(r=!1),!this.updatePostponed&&u.id){var p=this.paper.getModelById(u.id);o.id===u.id&&(n.handleBy=this.cid),(n.handleBy===this.cid||n.translateBy&&p.isEmbeddedIn(n.translateBy))&&(this.updatePostponed=!0,r=!1)}}else this[t+"BBox"]=l.rect(o.x||0,o.y||0,1,1),this[t+"View"]=this[t+"Magnet"]=null;r&&(n.updateConnectionOnly=!0,this.update(i,null,n))},_translateAndAutoOrientArrows:function(t,e){var n=g.util.toArray(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.viewport),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.viewport)},removeVertex:function(t){var e=g.util.assign([],this.model.get("vertices"));return e&&e.length&&(e.splice(t,1),this.model.set("vertices",e,{ui:!0})),this},addVertex:function(t){for(var e=(this.model.get("vertices")||[]).slice(),n=e.slice(),r=this._V.connection.node.cloneNode(!1),i=r.getTotalLength(),o=e.length+1;o--&&(e.splice(o,0,t),u(r).attr("d",this.getPathData(this.findRoute(e))),r.getTotalLength()-i>20);)e=n.slice();return-1===o&&(o=0,e.splice(o,0,t)),this.model.set("vertices",e,{ui:!0}),o},sendToken:function(t,e,n){var r,i;g.util.isObject(e)?(r=e.duration,i="reverse"===e.direction):(r=e,i=!1);var o={dur:(r=r||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};i&&(o.keyPoints="1;0",o.keyTimes="0;1");var a=u(t),s=this._V.connection;a.appendTo(this.paper.viewport).animateAlongPath(o,s),setTimeout(function(t,e){return function(){t.remove(),"function"==typeof e&&e()}}(a,n),r)},findRoute:function(t){var e=g.routers,n=this.model.get("router"),r=this.paper.options.defaultRouter;if(!n)if(this.model.get("manhattan"))n={name:"orthogonal"};else{if(!r)return t;n=r}var i=n.args||{},o=g.util.isFunction(n)?n:e[n.name];if(!g.util.isFunction(o))throw new Error('unknown router: "'+n.name+'"');return o.call(this,t||[],i,this)},getPathData:function(t){var e=g.connectors,n=this.model.get("connector"),r=this.paper.options.defaultConnector;n||(n=this.model.get("smooth")?{name:"smooth"}:r||{});var i=g.util.isFunction(n)?n:e[n.name],o=n.args||{};if(!g.util.isFunction(i))throw new Error('unknown connector: "'+n.name+'"');return i.call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,t||this.model.get("vertices")||{},o,this)},getConnectionPoint:function(t,e,n){var r;if(g.util.isEmpty(e)&&(e={x:0,y:0}),g.util.isEmpty(n)&&(n={x:0,y:0}),e.id){var i,o=l.Rect("source"===t?this.sourceBBox:this.targetBBox);if(n.id){var a=l.Rect("source"===t?this.targetBBox:this.sourceBBox);i=(i=a.intersectionWithLineFromCenterToPoint(o.center()))||a.center()}else i=l.Point(n);var s=this.paper.options;if(s.perpendicularLinks||this.options.perpendicular){var u=o.origin(),c=o.corner();if(u.y<=i.y&&i.y<=c.y)switch(o.sideNearestToPoint(i)){case"left":r=l.Point(u.x,i.y);break;case"right":r=l.Point(c.x,i.y);break;default:r=o.center()}else if(u.x<=i.x&&i.x<=c.x)switch(o.sideNearestToPoint(i)){case"top":r=l.Point(i.x,u.y);break;case"bottom":r=l.Point(i.x,c.y);break;default:r=o.center()}else r=(r=o.intersectionWithLineFromCenterToPoint(i))||o.center()}else if(s.linkConnectionPoint){var h="target"===t?this.targetView:this.sourceView,f="target"===t?this.targetMagnet:this.sourceMagnet;r=s.linkConnectionPoint(this,h,f,i,t)}else r=(r=o.intersectionWithLineFromCenterToPoint(i))||o.center()}else r=l.Point(e);return r},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(t){return this._V.connection.node.getPointAtLength(t)},_beforeArrowheadMove:function(){this._z=this.model.get("z"),this.model.toFront(),this.el.style.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets()},_afterArrowheadMove:function(){null!==this._z&&(this.model.set("z",this._z,{ui:!0}),this._z=null),this.el.style.pointerEvents="visiblePainted",this.paper.options.markAvailable&&this._unmarkAvailableMagnets()},_createValidateConnectionArgs:function(t){var e,n=[];n[4]=t,n[5]=this;var r=0,i=0;"source"===t?(r=2,e="target"):(i=2,e="source");var o=this.model.get(e);return o.id&&(n[r]=this.paper.findViewByModel(o.id),n[r+1]=o.selector&&n[r].el.querySelector(o.selector)),function(t,e){return n[i]=t,n[i+1]=t.el===e?void 0:e,n}},_markAvailableMagnets:function(){function t(t,e){var n=t.paper;return n.options.validateConnection.apply(n,this._validateConnectionArgs(t,e))}var e=this.paper,n=e.model.getElements();this._marked={};for(var r=0,i=n.length;r<i;r++){var o=n[r].findView(e);if(o){var a=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));"false"!==o.el.getAttribute("magnet")&&a.push(o.el);var s=a.filter(t.bind(this,o));if(s.length>0){for(var u=0,l=s.length;u<l;u++)o.highlight(s[u],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),this._marked[o.model.id]=s}}}},_unmarkAvailableMagnets:function(){for(var t,e,n=Object.keys(this._marked),r=0,i=n.length;r<i;r++){t=n[r],e=this._marked[t];var o=this.paper.findViewByModel(t);if(o){for(var a=0,s=e.length;a<s;a++)o.unhighlight(e[a],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}this._marked=null},startArrowheadMove:function(t,e){e=g.util.defaults(e||{},{whenNotAllowed:"revert"}),this._action="arrowhead-move",this._whenNotAllowed=e.whenNotAllowed,this._arrowhead=t,this._initialMagnet=this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),this._initialEnd=g.util.assign({},this.model.get(t))||{x:0,y:0},this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead),this._beforeArrowheadMove()},pointerdown:function(t,e,n){if(g.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("link:pointerdown",t,e,n),this._dx=e,this._dy=n,null==t.target.getAttribute("magnet")){var r,i=g.util.removeClassNamePrefix(t.target.getAttribute("class")),o=g.util.removeClassNamePrefix(t.target.parentNode.getAttribute("class"));switch("label"===o?(i=o,r=t.target.parentNode):r=t.target,i){case"marker-vertex":this.can("vertexMove")&&(this._action="vertex-move",this._vertexIdx=t.target.getAttribute("idx"));break;case"marker-vertex-remove":case"marker-vertex-remove-area":this.can("vertexRemove")&&this.removeVertex(t.target.getAttribute("idx"));break;case"marker-arrowhead":this.can("arrowheadMove")&&this.startArrowheadMove(t.target.getAttribute("end"));break;case"label":this.can("labelMove")&&(this._action="label-move",this._labelIdx=parseInt(u(r).attr("label-idx"),10),this._samples=this._V.connection.sample(1),this._linkLength=this._V.connection.node.getTotalLength());break;default:this.can("vertexAdd")&&(this._vertexIdx=this.addVertex({x:e,y:n}),this._action="vertex-move")}}},pointermove:function(t,e,n){switch(this._action){case"vertex-move":var r=g.util.assign([],this.model.get("vertices"));r[this._vertexIdx]={x:e,y:n},this.model.set("vertices",r,{ui:!0});break;case"label-move":for(var i,o,a,s,c={x:e,y:n},h=this._samples,f=1/0,d=0,p=h.length;d<p;d++)a=h[d],(s=l.line(a,c).squaredLength())<f&&(f=s,i=a,o=d);var I=h[o-1],v=h[o+1],m=0;I&&v?m=l.line(I,v).pointOffset(c):I?m=l.line(I,i).pointOffset(c):v&&(m=l.line(i,v).pointOffset(c)),this.model.label(this._labelIdx,{position:{distance:i.distance/this._linkLength,offset:m}});break;case"arrowhead-move":if(this.paper.options.snapLinks){var A,C=this.paper.options.snapLinks.radius||50,y=this.paper.findViewsInArea({x:e-C,y:n-C,width:2*C,height:2*C});this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;var b=Number.MAX_VALUE,w=l.point(e,n);y.forEach(function(t){"false"!==t.el.getAttribute("magnet")&&(A=t.model.getBBox().center().distance(w))<C&&A<b&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,null))&&(b=A,this._closestView=t,this._closestEnd={id:t.model.id}),t.$("[magnet]").each(function(e,n){var r=u(n).getBBox({target:this.paper.viewport});(A=w.distance({x:r.x+r.width/2,y:r.y+r.height/2}))<C&&A<b&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,n))&&(b=A,this._closestView=t,this._closestEnd={id:t.model.id,selector:t.getSelector(n),port:n.getAttribute("port")})}.bind(this))},this),this._closestView&&this._closestView.highlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this.model.set(this._arrowhead,this._closestEnd||{x:e,y:n},{ui:!0})}else{var N="mousemove"===t.type?t.target:document.elementFromPoint(t.clientX,t.clientY);this._eventTarget!==N&&(this._magnetUnderPointer&&this._viewUnderPointer.unhighlight(this._magnetUnderPointer,{connecting:!0}),this._viewUnderPointer=this.paper.findView(N),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(N),this._magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&&this._viewUnderPointer.highlight(this._magnetUnderPointer,{connecting:!0}):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._eventTarget=N,this.model.set(this._arrowhead,{x:e,y:n},{ui:!0})}}this._dx=e,this._dy=n,g.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("link:pointermove",t,e,n)},pointerup:function(t,e,n){if("label-move"===this._action)this._samples=null;else if("arrowhead-move"===this._action){var r,i=this.model,o=this.paper,a=o.options,s=this._arrowhead,u=this._initialEnd;if(a.snapLinks)this._closestView&&(this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),r=this._closestView.findMagnet(this._closestEnd.selector)),this._closestView=this._closestEnd=null;else{var l=this._viewUnderPointer;if(r=this._magnetUnderPointer,this._viewUnderPointer=null,this._magnetUnderPointer=null,r){l.unhighlight(r,{connecting:!0});var c=l.getSelector(r),h=r.getAttribute("port"),f={id:l.model.id};null!=h&&(f.port=h),null!=c&&(f.selector=c),i.set(s,f,{ui:!0})}}if(o.linkAllowed(this)){a.embeddingMode&&i.reparent()&&(this._z=null);var d=i.prop(s);d&&!g.dia.Link.endsEqual(u,d)&&(u.id&&this.notify("link:disconnect",t,o.findViewByModel(u.id),this._initialMagnet,s),d.id&&this.notify("link:connect",t,o.findViewByModel(d.id),r,s))}else switch(this._whenNotAllowed){case"remove":i.remove({ui:!0});break;case"revert":default:i.set(s,u,{ui:!0})}this._afterArrowheadMove()}this._action=null,this._whenNotAllowed=null,this._initialMagnet=null,this._initialEnd=null,this._validateConnectionArgs=null,this._eventTarget=null,this.notify("link:pointerup",t,e,n),g.dia.CellView.prototype.pointerup.apply(this,arguments)},mouseenter:function(t){g.dia.CellView.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){g.dia.CellView.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},event:function(t,e,n,r){u(t.target).findParentByClass("link-tool",this.el)?(t.stopPropagation(),this.can("useLinkTools")&&("remove"===e?this.model.remove({ui:!0}):this.notify(e,t,n,r))):g.dia.CellView.prototype.event.apply(this,arguments)}},{makeSelector:function(t){var e='[model-id="'+t.id+'"]';return t.port?e+=' [port="'+t.port+'"]':t.selector&&(e+=" "+t.selector),e}}),g.dia.Paper=g.mvc.View.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:g.dia.ElementView,linkView:g.dia.LinkView,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:{default:{name:"stroke",options:{padding:3}},magnetAvailability:{name:"addClass",options:{className:"available-magnet"}},elementAvailability:{name:"addClass",options:{className:"available-cell"}}},preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new g.dia.Link,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},validateMagnet:function(t,e){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,r,i,o){return("target"===i?n:t)instanceof g.dia.ElementView},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,clickThreshold:0,moveThreshold:0,cellViewNamespace:g.shapes,highlighterNamespace:g.highlighters},events:{mousedown:"pointerdown",dblclick:"mousedblclick",click:"mouseclick",touchstart:"pointerdown",touchend:"mouseclick",touchmove:"pointermove",mousemove:"pointermove","mouseover .joint-cell":"cellMouseover","mouseout .joint-cell":"cellMouseout",contextmenu:"contextmenu",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel","mouseenter .joint-cell":"cellMouseenter","mouseleave .joint-cell":"cellMouseleave","mousedown .joint-cell [event]":"cellEvent","touchstart .joint-cell [event]":"cellEvent"},_highlights:{},init:function(){g.util.bindAll(this,"pointerup");var t=this.model=this.options.model||new g.dia.Graph;this.setGrid(this.options.drawGrid),this.cloneOptions(),this.render(),this.setDimensions(),this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.removeView).listenTo(t,"reset",this.resetViews).listenTo(t,"sort",this._onSort).listenTo(t,"batch:stop",this._onBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update),this._mousemoved=0,this._views={},this.$document=r(this.el.ownerDocument)},cloneOptions:function(){var t=this.options;t.origin=g.util.assign({},t.origin),t.defaultConnector=g.util.assign({},t.defaultConnector),t.highlighting=g.util.defaultsDeep({},t.highlighting,this.constructor.prototype.options.highlighting)},bindDocumentEvents:function(){var t=this.getEventNamespace();this.$document.on("mouseup"+t+" touchend"+t,this.pointerup)},unbindDocumentEvents:function(){this.$document.off(this.getEventNamespace())},render:function(){return this.$el.empty(),this.svg=u("svg").attr({width:"100%",height:"100%"}).node,this.viewport=u("g").addClass(g.util.addClassNamePrefix("viewport")).node,this.defs=u("defs").node,u(this.svg).append([this.viewport,this.defs]),this.$background=r("<div/>").addClass(g.util.addClassNamePrefix("paper-background")),this.options.background&&this.drawBackground(this.options.background),this.$grid=r("<div/>").addClass(g.util.addClassNamePrefix("paper-grid")),this.options.drawGrid&&this.drawGrid(),this.$el.append(this.$background,this.$grid,this.svg),this},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},_viewportMatrix:null,_viewportTransformString:null,matrix:function(t){var e=this.viewport;if(void 0===t){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),u.createSVGMatrix(t)}return t=u.createSVGMatrix(t),u(e).transform(t,{absolute:!0}),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return u.createSVGMatrix(this.viewport.getScreenCTM())},_onSort:function(){this.model.hasActiveBatch("add")||this.sortViews()},_onBatchStop:function(t){"add"!==(t&&t.batchName)||this.model.hasActiveBatch("add")||this.sortViews()},onRemove:function(){this.removeViews(),this.unbindDocumentEvents()},setDimensions:function(t,e){t=this.options.width=t||this.options.width,e=this.options.height=e||this.options.height,this.$el.css({width:Math.round(t),height:Math.round(e)}),this.trigger("resize",t,e)},setOrigin:function(t,e){return this.translate(t||0,e||0,{absolute:!0})},fitToContent:function(t,e,n,r){g.util.isObject(t)?(t=(r=t).gridWidth||1,e=r.gridHeight||1,n=r.padding||0):(r=r||{},t=t||1,e=e||1,n=n||0),n=g.util.normalizeSides(n);var i=u(this.viewport).getBBox(),o=this.scale(),a=this.translate();i.x*=o.sx,i.y*=o.sy,i.width*=o.sx,i.height*=o.sy;var s=Math.max(Math.ceil((i.width+i.x)/t),1)*t,l=Math.max(Math.ceil((i.height+i.y)/e),1)*e,c=0,h=0;("negative"==r.allowNewOrigin&&i.x<0||"positive"==r.allowNewOrigin&&i.x>=0||"any"==r.allowNewOrigin)&&(c=Math.ceil(-i.x/t)*t,s+=c+=n.left),("negative"==r.allowNewOrigin&&i.y<0||"positive"==r.allowNewOrigin&&i.y>=0||"any"==r.allowNewOrigin)&&(h=Math.ceil(-i.y/e)*e,l+=h+=n.top),s+=n.right,l+=n.bottom,s=Math.max(s,r.minWidth||0),l=Math.max(l,r.minHeight||0),s=Math.min(s,r.maxWidth||Number.MAX_VALUE),l=Math.min(l,r.maxHeight||Number.MAX_VALUE);var f=s!=this.options.width||l!=this.options.height;(c!=a.tx||h!=a.ty)&&this.translate(c,h),f&&this.setDimensions(s,l)},scaleContentToFit:function(t){var e=this.getContentBBox();if(e.width&&e.height){t=t||{},g.util.defaults(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var n,r=t.padding,i=t.minScaleX||t.minScale,o=t.maxScaleX||t.maxScale,a=t.minScaleY||t.minScale,s=t.maxScaleY||t.maxScale;if(t.fittingBBox)n=t.fittingBBox;else{var u=this.translate();n={x:u.tx,y:u.ty,width:this.options.width,height:this.options.height}}n=l.rect(n).moveAndExpand({x:r,y:r,width:-2*r,height:-2*r});var c=this.scale(),h=n.width/e.width*c.sx,f=n.height/e.height*c.sy;if(t.preserveAspectRatio&&(h=f=Math.min(h,f)),t.scaleGrid){var d=t.scaleGrid;h=d*Math.floor(h/d),f=d*Math.floor(f/d)}h=Math.min(o,Math.max(i,h)),f=Math.min(s,Math.max(a,f)),this.scale(h,f);var p=this.getContentBBox(),I=n.x-p.x,v=n.y-p.y;this.translate(I,v)}},getContentBBox:function(){var t=this.viewport.getBoundingClientRect(),e=this.clientMatrix(),n=this.translate();return l.rect({x:t.left-e.e+n.tx,y:t.top-e.f+n.ty,width:t.width,height:t.height})},getArea:function(){return this.paperToLocalRect({x:0,y:0,width:this.options.width,height:this.options.height})},getRestrictedArea:function(){return g.util.isFunction(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):!0===this.options.restrictTranslate?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var n,r,i=this.options.cellViewNamespace,o=t.get("type")+"View",a=g.util.getByPath(i,o,".");return t.isLink()?(n=this.options.linkView,r=g.dia.LinkView):(n=this.options.elementView,r=g.dia.ElementView),new(n.prototype instanceof e.View?a||n:n.call(this,t)||a||r)({model:t,interactive:this.options.interactive})},onCellAdded:function(t,e,n){if(this.options.async&&!1!==n.async&&g.util.isNumber(n.position)){if(this._asyncCells=this._asyncCells||[],this._asyncCells.push(t),0==n.position){if(this._frameId)throw new Error("another asynchronous rendering in progress");this.asyncRenderViews(this._asyncCells,n),delete this._asyncCells}}else this.renderView(t)},removeView:function(t){var e=this._views[t.id];return e&&(e.remove(),delete this._views[t.id]),e},renderView:function(t){var e=this._views[t.id]=this.createViewForModel(t);return u(this.viewport).append(e.el),e.paper=this,e.render(),r(e.el).find("image").on("dragstart",function(){return!1}),e},beforeRenderViews:function(t){return t.sort(function(t){return t.isLink()?1:-1}),t},afterRenderViews:function(){this.sortViews()},resetViews:function(t,e){this.removeViews();var n=t.models.slice();if(n=this.beforeRenderViews(n,e)||n,this.cancelRenderViews(),this.options.async)this.asyncRenderViews(n,e);else{for(var r=0,i=n.length;r<i;r++)this.renderView(n[r]);this.sortViews()}},cancelRenderViews:function(){this._frameId&&(g.util.cancelFrame(this._frameId),delete this._frameId)},removeViews:function(){g.util.invoke(this._views,"remove"),this._views={}},asyncBatchAdded:g.util.noop,asyncRenderViews:function(t,e){if(this._frameId){var n=this.options.async&&this.options.async.batchSize||50;t.splice(0,n).forEach(function(t){t.graph===this.model&&this.renderView(t)},this),this.asyncBatchAdded()}t.length?this._frameId=g.util.nextFrame(function(){this.asyncRenderViews(t,e)},this):(delete this._frameId,this.afterRenderViews(e),this.trigger("render:done",e))},sortViews:function(){var t=r(this.viewport).children("[model-id]"),e=this.model.get("cells");g.util.sortElements(t,function(t,n){var i=e.get(r(t).attr("model-id")),o=e.get(r(n).attr("model-id"));return(i.get("z")||0)>(o.get("z")||0)?1:-1})},scale:function(t,e,n,r){if(void 0===t)return u.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===n&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var o=i.tx-n*(t-1),a=i.ty-r*(e-1);this.translate(o,a)}var s=this.matrix();return s.a=t||0,s.d=e||0,this.matrix(s),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(void 0===t)return u.matrixToRotate(this.matrix());if(void 0===e){var r=this.viewport.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(void 0===t)return u.matrixToTranslate(this.matrix());var n=this.matrix();n.e=t||0,n.f=e||0,this.matrix(n);var r=this.translate(),i=this.options.origin;return i.x=r.tx,i.y=r.ty,this.trigger("translate",r.tx,r.ty),this.options.drawGrid&&this.drawGrid(),this},findView:function(t){for(var e=g.util.isString(t)?this.viewport.querySelector(t):t instanceof r?t[0]:t;e&&e!==this.el&&e!==document;){var n=e.getAttribute("model-id");if(n)return this._views[n];e=e.parentNode}},findViewByModel:function(t){var e=g.util.isString(t)||g.util.isNumber(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=l.point(t),this.model.getElements().map(this.findViewByModel,this).filter(function(e){return e&&e.vel.getBBox({target:this.viewport}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=g.util.defaults(e||{},{strict:!1}),t=l.rect(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(e){return e&&t[r](e.vel.getBBox({target:this.viewport}))},this)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=l.Point(t,e),r=u.transformPoint(n,this.matrix());return l.Point(r)},localToPaperRect:function(t,e,n,r){var i=l.Rect(t,e),o=u.transformRect(i,this.matrix());return l.Rect(o)},paperToLocalPoint:function(t,e){var n=l.Point(t,e),r=u.transformPoint(n,this.matrix().inverse());return l.Point(r)},paperToLocalRect:function(t,e,n,r){var i=l.Rect(t,e,n,r),o=u.transformRect(i,this.matrix().inverse());return l.Rect(o)},localToClientPoint:function(t,e){var n=l.Point(t,e),r=u.transformPoint(n,this.clientMatrix());return l.Point(r)},localToClientRect:function(t,e,n,r){var i=l.Rect(t,e,n,r),o=u.transformRect(i,this.clientMatrix());return l.Rect(o)},clientToLocalPoint:function(t,e){var n=l.Point(t,e),r=u.transformPoint(n,this.clientMatrix().inverse());return l.Point(r)},clientToLocalRect:function(t,e,n,r){var i=l.Rect(t,e,n,r),o=u.transformRect(i,this.clientMatrix().inverse());return l.Rect(o)},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).moveAndExpand(this.pageOffset())},pageToLocalPoint:function(t,e){var n=l.Point(t,e).difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),o=l.Rect(t,e,n,r);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return l.Point(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){var e;if(t instanceof g.dia.Link)e=t;else{if(!(t instanceof g.dia.LinkView))throw new Error("Must provide link model or view.");e=t.model}if(!this.options.multiLinks){var n=e.get("source"),r=e.get("target");if(n.id&&r.id){var i=e.getSourceElement();if(i)if(this.model.getConnectedLinks(i,{outbound:!0,inbound:!1}).filter(function(t){var e=t.get("source"),i=t.get("target");return e&&e.id===n.id&&(!e.port||e.port===n.port)&&i&&i.id===r.id&&(!i.port||i.port===r.port)}).length>1)return!1}}return!!(this.options.linkPinning||g.util.has(e.get("source"),"id")&&g.util.has(e.get("target"),"id"))},getDefaultLink:function(t,e){return g.util.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t){var e=(t=t||{}).highlighter,n=this.options;if(void 0===e){var r=["embedding","connecting","magnetAvailability","elementAvailability"].find(function(e){return!!t[e]});e=r&&n.highlighting[r]||n.highlighting.default}if(!e)return!1;g.util.isString(e)&&(e={name:e});var i=e.name,o=n.highlighterNamespace[i];if(!o)throw new Error('Unknown highlighter ("'+i+'")');if("function"!=typeof o.highlight)throw new Error('Highlighter ("'+i+'") is missing required highlight() method');if("function"!=typeof o.unhighlight)throw new Error('Highlighter ("'+i+'") is missing required unhighlight() method');return{highlighter:o,options:e.options||{},name:i}},onCellHighlight:function(t,e,n){if(n=this.resolveHighlighter(n)){e.id||(e.id=u.uniqueId());var r=n.name+e.id+JSON.stringify(n.options);if(!this._highlights[r]){var i=n.highlighter;i.highlight(t,e,g.util.assign({},n.options)),this._highlights[r]={cellView:t,magnetEl:e,opt:n.options,highlighter:i}}}},onCellUnhighlight:function(t,e,n){if(n=this.resolveHighlighter(n)){var r=n.name+e.id+JSON.stringify(n.options),i=this._highlights[r];i&&(i.highlighter.unhighlight(i.cellView,i.magnetEl,i.opt),this._highlights[r]=null)}},mousedblclick:function(t){t.preventDefault(),t=g.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},mouseclick:function(t){if(this._mousemoved<=this.options.clickThreshold){t=g.util.normalizeEvent(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},guard:function(t,e){return!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof g.dia.Cell)&&(this.svg!==t.target&&this.el!==t.target&&!r.contains(this.svg,t.target)))},contextmenu:function(t){t=g.util.normalizeEvent(t),this.options.preventContextMenu&&t.preventDefault();var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){this.bindDocumentEvents(),t=g.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){this._mousemoved=0;var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?(t.preventDefault(),this.sourceView=e,e.pointerdown(t,n.x,n.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,n.x,n.y))}},pointermove:function(t){var e=this.sourceView;if(e&&(t.preventDefault(),++this._mousemoved>this.options.moveThreshold)){t=g.util.normalizeEvent(t);var n=this.snapToGrid({x:t.clientX,y:t.clientY});e.pointermove(t,n.x,n.y)}},pointerup:function(t){this.unbindDocumentEvents(),t=g.util.normalizeEvent(t);var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView?(this.sourceView.pointerup(t,e.x,e.y),this.sourceView=null):this.trigger("blank:pointerup",t,e.x,e.y)},mousewheel:function(t){t=g.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=t.originalEvent,r=this.snapToGrid({x:n.clientX,y:n.clientY}),i=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail));e?e.mousewheel(t,r.x,r.y,i):this.trigger("blank:mousewheel",t,r.x,r.y,i)}},cellMouseover:function(t){t=g.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseover(t)}},cellMouseout:function(t){t=g.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseout(t)}},cellMouseenter:function(t){t=g.util.normalizeEvent(t);var e=this.findView(t.target);e&&!this.guard(t,e)&&e.mouseenter(t)},cellMouseleave:function(t){t=g.util.normalizeEvent(t);var e=this.findView(t.target);e&&!this.guard(t,e)&&e.mouseleave(t)},cellEvent:function(t){var e=(t=g.util.normalizeEvent(t)).currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r&&!this.guard(t,r)){var i=this.snapToGrid({x:t.clientX,y:t.clientY});r.event(t,n,i.x,i.y)}}},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGriRefs:function(){return this._gridCache||(this._gridCache={root:u("svg",{width:"100%",height:"100%"},u("defs")),patterns:{},add:function(t,e){u(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(u("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(g.util.isString(t)&&Array.isArray(e[t]))return e[t].map(function(t){return g.util.assign({},t)});var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(r||i||n.markup||(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map(function(t){return g.util.assign({},t)}),a=Array.isArray(n.args)?n.args:[n.args||{}];g.util.defaults(a[0],g.util.omit(t,"args"));for(var s=0;s<a.length;s++)o[s]&&g.util.assign(o[s],a[s]);return o}return r?n:[n]},drawGrid:function(t){var e=this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGriRefs();this._gridSettings.forEach(function(t,o){var a="pattern_"+o,s=g.util.merge(t,n[o],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});s.width=e*(r.a||1)*(s.scaleFactor||1),s.height=e*(r.d||1)*(s.scaleFactor||1),i.exist(a)||i.add(a,u("pattern",{id:a,patternUnits:"userSpaceOnUse"},u(s.markup)));var l=i.get(a);g.util.isFunction(s.update)&&s.update(l.node.childNodes[0],s);var c=s.ox%s.width;c<0&&(c+=s.width);var h=s.oy%s.height;h<0&&(h+=s.height),l.attr({x:c,y:h,width:s.width,height:s.height})});var o=(new XMLSerializer).serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();g.util.isObject(e)&&(e=i.tx+r.sx*(e.x||0)+"px "+(i.ty+r.sy*(e.y||0))+"px");g.util.isObject(n)&&(n=(n=l.rect(n).scale(r.sx,r.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){var n,r=(e=e||{}).size,i=e.repeat||"no-repeat",o=e.opacity||1,a=Math.abs(e.quality)||1,s=this.constructor.backgroundPatterns[g.util.camelCase(i)];if(g.util.isFunction(s)){t.width*=a,t.height*=a;var u=s(t,e);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=u.toDataURL("image/png"),i="repeat",g.util.isObject(r)?(r.width*=u.width/t.width,r.height*=u.height/t.height):void 0===r&&(e.size={width:u.width/a,height:u.height/a})}else n=t.src,void 0===r&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=g.util.cloneDeep(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,g.util.invoke(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!g.util.isObject(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+g.util.hashCode(JSON.stringify(t))),!this.isDefined(e)){var r=g.util.filter,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var o=g.util.assign({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});u(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!g.util.isObject(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");var e=t.id,n=t.type,r=t.stops;if(e||(e=n+this.svg.id+g.util.hashCode(JSON.stringify(t))),!this.isDefined(e)){var i=g.util.template('<stop offset="${offset}" stop-color="${color}" stop-opacity="${opacity}"/>'),o=["<"+n+">",g.util.toArray(r).map(function(t){return i({offset:t.offset,color:t.color,opacity:Number.isFinite(t.opacity)?t.opacity:1})}).join(""),"</"+n+">"].join(""),a=g.util.assign({id:e},t.attrs);u(o,a).appendTo(this.defs)}return e},defineMarker:function(t){if(!g.util.isObject(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");var e=t.id;if(e||(e=this.svg.id+g.util.hashCode(JSON.stringify(t))),!this.isDefined(e)){var n=g.util.omit(t,"type","userSpaceOnUse");u("marker",{id:e,orient:"auto",overflow:"visible",markerUnits:t.markerUnits||"userSpaceOnUse"},[u(t.type||"path",n)]).appendTo(this.defs)}return e}},{backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;for(var o=i.getContext("2d"),a=g.util.isNumber(e.watermarkAngle)?-e.watermarkAngle:-20,s=l.toRad(a),u=i.width/4,c=i.height/4,h=0;h<4;h++)for(var f=0;f<4;f++)(h+f)%2>0&&(o.setTransform(1,0,0,1,(2*h-1)*u,(2*f-1)*c),o.rotate(s),o.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){u(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;u(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",u(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",u(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",u(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),function(t,e,n){var r=function(e){var r=n.cloneDeep(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=t.layout.Port,this.portLabelLayoutNamespace=t.layout.PortLabel,this._init(r)};r.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var r=this.getGroup(t),i=this.getPortsByGroup(t),o=r.position||{},a=o.name,s=this.portLayoutNamespace;s[a]||(a="left");var u=o.args||{},c=i.map(function(t){return t&&t.position&&t.position.args}),h=s[a](c,e,u),g={ports:i,result:[]};return n.toArray(h).reduce(function(t,n,r){var i=t.ports[r];return t.result.push({portId:i.id,portTransformation:n,labelTransformation:this._getPortLabelLayout(i,l.Point(n),e),portAttrs:i.attrs,portSize:i.size,labelSize:i.label.size}),t}.bind(this),g),g.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(n.isObject(t.groups))for(var e=Object.keys(t.groups),r=0,i=e.length;r<i;r++){var o=e[r];this.groups[o]=this._evaluateGroup(t.groups[o])}for(var a=n.toArray(t.items),s=0,u=a.length;s<u;s++)this.ports.push(this._evaluatePort(a[s]))},_evaluateGroup:function(t){return n.merge(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=n.assign({},t),r=this.getGroup(t.group);return e.markup=e.markup||r.markup,e.attrs=n.merge({},r.attrs,e.attrs),e.position=this._createPositionNode(r,e),e.label=n.merge({},r.label,this._getLabel(e)),e.z=this._getZIndex(r,e),e.size=n.assign({},r.size,e.size),e},_getZIndex:function(t,e){return n.isNumber(e.z)?e.z:n.isNumber(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return n.merge({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var r,i={};n.isFunction(t)?(r="fn",i.fn=t):n.isString(t)?r=t:void 0===t?r=e?"left":null:Array.isArray(t)?(r="absolute",i.x=t[0],i.y=t[1]):n.isObject(t)&&(r=t.name,n.assign(i,t.args));var o={args:i};return r&&(o.name=r),o},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}},n.assign(t.dia.Element.prototype,{_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};n.toArray(t.items).forEach(function(t){e[t.id]=!0});var r=this.previous("ports")||{},i={};n.toArray(r.items).forEach(function(t){e[t.id]||(i[t.id]=!0)});var o=this.graph;o&&!n.isEmpty(i)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(t){i[t.get("target").port]&&t.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(t){i[t.get("source").port]&&t.remove()}))},hasPorts:function(){return this.prop("ports/items").length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return n.cloneDeep(this.prop("ports/items"))||[]},getPort:function(t){return n.cloneDeep(n.toArray(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,l.Rect(this.size())).reduce(function(t,e){var n=e.portTransformation;return t[e.portId]={x:n.x,y:n.y,angle:n.angle},t},{})},getPortIndex:function(t){var e=n.isObject(t)?t.id:t;return this._isValidPortId(e)?n.toArray(this.prop("ports/items")).findIndex(function(t){return t.id===e}):-1},addPort:function(t,e){if(!n.isObject(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var r=n.assign([],this.prop("ports/items"));return r.push(t),this.prop("ports/items",r,e),this},portProp:function(t,e,r,i){var o=this.getPortIndex(t);if(-1===o)throw new Error("Element: unable to find port with id "+t);var a=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?a[0]=["ports","items",o].concat(e):n.isString(e)?a[0]=["ports/items/",o,"/",e].join(""):(a=["ports/items/"+o],n.isPlainObject(e)&&(a.push(e),a.push(r))),this.prop.apply(this,a)},_validatePorts:function(){var e=this.get("ports")||{},r=[];e=e||{};var i=n.toArray(e.items);return i.forEach(function(t){"object"!=typeof t&&r.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=n.uuid())},this),t.util.uniq(i,"id").length!==i.length&&r.push("Element: found id duplicities in ports."),r},_isValidPortId:function(t){return null!=t&&!n.isObject(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",n.assign([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){var r=e||{},i=n.assign([],this.prop("ports/items")),o=this.getPortIndex(t);return-1!==o&&(i.splice(o,1),r.rewrite=!0,this.prop("ports/items",i,r)),this},_createPortData:function(){var t,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new r(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var i=n.filter(function(e){if(!t.find(function(t){return t.id===e.id}))return e}),o=t.filter(function(t){if(!n.find(function(e){return e.id===t.id}))return t});o.length>0&&this.trigger("ports:remove",this,o),i.length>0&&this.trigger("ports:add",this,i)}}}),n.assign(t.dia.ElementView.prototype,{portContainerMarkup:'<g class="joint-port"/>',portMarkup:'<circle class="joint-port-body" r="10" fill="#FFFFFF" stroke="#000000"/>',portLabelMarkup:'<text class="joint-port-label" fill="#000000"/>',_portElementsCache:null,_initializePorts:function(){this._portElementsCache={},this.listenTo(this.model,"change:ports",function(){this._refreshPorts()})},_refreshPorts:function(){this._removePorts(),this._portElementsCache={},this._renderPorts()},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),r=0,i=e.node.childNodes.length;r<i;r++)t.push(e.node.childNodes[r]);var o=n.groupBy(this.model._portSettingsData.getPorts(),"z");n.toArray(o.auto).forEach(function(n){var r=this._getPortElement(n);e.append(r),t.push(r)},this);for(var a=Object.keys(o),s=0;s<a.length;s++){var u=a[s];if("auto"!==u){var l=parseInt(u,10);this._appendPorts(o[u],l,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,r){var i=this._getContainerElement(),o=n.toArray(t).map(this._getPortElement,this);r[e]||e<0?u(r[Math.max(e,0)]).before(o):i.append(o)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){n.invoke(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e=u(this._getPortMarkup(t)),n=u(this._getPortLabelMarkup(t.label));if(e&&e.length>1)throw new Error("ElementView: Invalid port markup - multiple roots.");e.attr({port:t.id,"port-group":t.group});var r=u(this.portContainerMarkup).append(e).append(n);return this._portElementsCache[t.id]={portElement:r,portLabelElement:n},r},_updatePortGroup:function(t){for(var e=l.Rect(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var o=n[r],a=o.portId,s=this._portElementsCache[a]||{},u=o.portTransformation;this.applyPortTransform(s.portElement,u),this.updateDOMSubtreeAttributes(s.portElement.node,o.portAttrs,{rootBBox:l.Rect(o.portSize)});var c=o.labelTransformation;c&&(this.applyPortTransform(s.portLabelElement,c,-u.angle||0),this.updateDOMSubtreeAttributes(s.portLabelElement.node,c.attrs,{rootBBox:l.Rect(o.labelSize)}))}},applyPortTransform:function(t,e,n){var r=u.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}})}(g,0,g.util),g.dia.Element.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),g.shapes.basic.Generic.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),g.shapes.basic.TextView=g.dia.ElementView.extend({initialize:function(){g.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:attrs",this.resize)}}),g.shapes.basic.Generic.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),g.shapes.basic.Generic.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),g.shapes.basic.Generic.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),g.shapes.basic.Generic.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),g.shapes.basic.Generic.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),g.shapes.basic.Generic.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),g.shapes.basic.Generic.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),g.shapes.basic.Path.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),g.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on("change:inPorts change:outPorts",this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(t){if(this._portSelectors){var e=g.util.omit(this.get("attrs"),this._portSelectors);this.set("attrs",e,{silent:!0})}this._portSelectors=[];var n={};g.util.toArray(this.get("inPorts")).forEach(function(t,e,r){var i=this.getPortAttrs(t,e,r.length,".inPorts","in");this._portSelectors=this._portSelectors.concat(Object.keys(i)),g.util.assign(n,i)},this),g.util.toArray("outPorts").forEach(function(t,e,r){var i=this.getPortAttrs(t,e,r.length,".outPorts","out");this._portSelectors=this._portSelectors.concat(Object.keys(i)),g.util.assign(n,i)},this),this.attr(n,{silent:!0}),this.processPorts(),this.trigger("process:ports")},getPortSelector:function(t){var e=".inPorts",n=this.get("inPorts").indexOf(t);if(n<0&&(e=".outPorts",(n=this.get("outPorts").indexOf(t))<0))throw new Error("getPortSelector(): Port doesn't exist.");return e+">g:nth-child("+(n+1)+")>.port-body"}},g.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,"process:ports",this.update),g.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),g.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var t=this.$(".inPorts").empty(),e=this.$(".outPorts").empty(),n=g.util.template(this.model.portMarkup),r=this.model.ports||[];r.filter(function(t){return"in"===t.type}).forEach(function(e,r){t.append(u(n({id:r,port:e})).node)}),r.filter(function(t){return"out"===t.type}).forEach(function(t,r){e.append(u(n({id:r,port:t})).node)})}},g.shapes.basic.Generic.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',g.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),g.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":g.util.assign({},e),div:{style:g.util.assign({},e)}})},updateContent:function(t,e){g.env.test("svgforeignobject")?this.attr({".content":{html:e}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),g.shapes.basic.TextBlockView=g.dia.ElementView.extend({initialize:function(){g.dia.ElementView.prototype.initialize.apply(this,arguments),this.noSVGForeignObjectElement=!g.env.test("svgforeignobject"),g.env.test("svgforeignobject")||this.listenTo(this.model,"change:content change:size",function(t){this.updateContent(t)})},update:function(t,e){var n=this.model;if(g.env.test("svgforeignobject"))g.dia.ElementView.prototype.update.call(this,n,e);else{var r=g.util.omit(e||n.get("attrs"),".content");g.dia.ElementView.prototype.update.call(this,n,r),e&&!g.util.has(e,".content")||this.updateContent(n,e)}},updateContent:function(t,e){var n=g.util.merge({},(e||t.get("attrs"))[".content"]);n=g.util.omit(n,"text");var r=g.util.breakText(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),i=g.util.setByPath({},".content",n,"/");i[".content"].text=r,g.dia.ElementView.prototype.update.call(this,t,i)}}),g.routers.manhattan=function(t,e,n,r){"use strict";var i={step:10,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],maximumLoops:2e3,startDirections:["left","right","top","bottom"],endDirections:["left","right","top","bottom"],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:90,paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},directions:function(){var t=this.step;return[{offsetX:t,offsetY:0,cost:t},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:0,cost:t},{offsetX:0,offsetY:-t,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},fallbackRoute:function(){return null},draggingRoute:null};function o(t){this.map={},this.options=t,this.mapGridSize=100}function a(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function s(e){return t.point(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function u(e,n,r,i){for(var o,a=[],u=s(i.difference(n)),l=n;o=e[l];){var c=s(l.difference(o));c.equals(u)||(a.unshift(l),u=c),l=o}return s(t.point(l).difference(r)).equals(u)||a.unshift(l),a}function l(t,e,n){var i=n.step,o=t.center(),a=r.isObject(n.directionMap)?Object.keys(n.directionMap):[],s=r.toArray(e);return a.reduce(function(e,r){if(s.includes(r)){var a=n.directionMap[r],u=a.x*t.width/2,l=a.y*t.height/2,c=o.clone().offset(u,l);t.containsPoint(c)&&c.offset(a.x*i,a.y*i),e.push(c.snapToGrid(i))}return e},[])}function c(e,n,r){var i=360/r;return Math.floor(t.normalizeAngle(e.theta(n)+i/2)/i)*i}function h(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function g(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function f(e,n,i,o){var s,f,d,p,I=o.step;if(e instanceof t.rect?(s=l(e,o.startDirections,o),d=e.center().snapToGrid(I)):s=[d=e.clone().snapToGrid(I)],n instanceof t.rect?(f=l(n,o.endDirections,o),p=n.center().snapToGrid(I)):f=[p=n.clone().snapToGrid(I)],s=s.filter(i.isPointAccessible,i),f=f.filter(i.isPointAccessible,i),s.length>0&&f.length>0){for(var v,m,A=new a,C={},y={},b=0,w=s.length;b<w;b++){var N=s[b],x=N.toString();A.add(x,g(N,f)),y[x]=0}for(var M=o.directions,_=M.length,j=o.maximumLoops,k=r.invoke(f,"toString");!A.isEmpty()&&j>0;){var z=A.pop(),D=t.point(z),Z=y[z],G=T,T=C[z]?c(C[z],D,_):null!=o.previousDirAngle?o.previousDirAngle:c(d,D,_);if(k.indexOf(z)>=0&&(m=h(T,c(D,p,_)),D.equals(p)||m<180))return o.previousDirAngle=T,u(C,D,d,p);for(b=0;b<_;b++)if(m=h(T,(v=M[b]).angle),!(G&&m>o.maxAllowedDirectionChange)){var S=D.clone().offset(v.offsetX,v.offsetY),L=S.toString();if(!A.isClose(L)&&i.isPointAccessible(S)){var B=Z+v.cost+o.penalties[m];(!A.isOpen(L)||B<y[L])&&(C[L]=D,y[L]=B,A.add(L,B+g(S,f)))}}j--}}return o.fallbackRoute(d,p,o)}function d(e,i){!function(e){e.directions=r.result(e,"directions"),e.penalties=r.result(e,"penalties"),e.paddingBox=r.result(e,"paddingBox"),r.toArray(e.directions).forEach(function(e){var n=t.point(0,0),r=t.point(e.offsetX,e.offsetY);e.angle=t.normalizeAngle(n.theta(r))})}(i),this.options.perpendicular=!!i.perpendicular;for(var a=t.rect(this.sourceBBox).moveAndExpand(i.paddingBox),s=t.rect(this.targetBBox).moveAndExpand(i.paddingBox),u=new o(i).build(this.paper.model,this.model),l=r.toArray(e).map(t.point),c=[],h=a.center().snapToGrid(i.step),g=0,d=l.length;g<=d;g++){var p=null,I=v||a,v=l[g];if(!v)if(v=s,(!this.model.get("source").id||!this.model.get("target").id)&&r.isFunction(i.draggingRoute)){var m=I instanceof t.rect?I.center():I;p=i.draggingRoute(m,v.origin(),i)}if(null===(p=p||f(I,v,u,i))){if(!r.isFunction(n.routers.orthogonal))throw new Error("Manhattan requires the orthogonal router.");return n.routers.orthogonal(e,i,this)}var A=p[0];A&&A.equals(h)&&p.shift(),h=p[p.length-1]||h,Array.prototype.push.apply(c,p)}return c}return o.prototype.build=function(t,e){var n=this.options,i=r.toArray(n.excludeEnds).reduce(function(n,r){var i=e.get(r);if(i){var o=t.getCell(i.id);o&&n.push(o)}return n},[]),o=[],a=t.getCell(e.get("source").id);a&&(o=r.union(o,a.getAncestors().map(function(t){return t.id})));var s=t.getCell(e.get("target").id);s&&(o=r.union(o,s.getAncestors().map(function(t){return t.id})));var u=this.mapGridSize;return t.getElements().reduce(function(t,e){var a=r.toArray(n.excludeTypes).includes(e.get("type")),s=i.find(function(t){return t.id===e.id}),l=o.includes(e.id);if(!(a||s||l))for(var c=e.getBBox().moveAndExpand(n.paddingBox),h=c.origin().snapToGrid(u),g=c.corner().snapToGrid(u),f=h.x;f<=g.x;f+=u)for(var d=h.y;d<=g.y;d+=u){var p=f+"@"+d;t[p]=t[p]||[],t[p].push(c)}return t},this.map),this},o.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return r.toArray(this.map[e]).every(function(e){return!e.containsPoint(t)})},a.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var r=n.util.sortedIndex(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(r,0,t)},a.prototype.remove=function(t){this.hash[t]=this.CLOSE},a.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},a.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},a.prototype.isEmpty=function(){return 0===this.items.length},a.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t},function(t,e,n){return d.call(n,t,r.assign({},i,e))}}(l,0,g,g.util),g.routers.metro=function(t){if(!t.isFunction(g.routers.manhattan))throw new Error("Metro requires the manhattan router.");var e={diagonalCost:null,directions:function(){var t=this.step,e=this.diagonalCost||Math.ceil(Math.sqrt(t*t<<1));return[{offsetX:t,offsetY:0,cost:t},{offsetX:t,offsetY:t,cost:e},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:t},{offsetX:-t,offsetY:-t,cost:e},{offsetX:0,offsetY:-t,cost:t},{offsetX:t,offsetY:-t,cost:e}]},maxAllowedDirectionChange:45,fallbackRoute:function(t,e,n){var r=t.theta(e),i={x:e.x,y:t.y},o={x:t.x,y:e.y};if(r%180>90){var a=i;i=o,o=a}var s=r%90<45?i:o,u=l.line(t,s),c=90*Math.ceil(r/90),h=l.point.fromPolar(u.squaredLength(),l.toRad(c+135),s),g=l.line(e,h),f=u.intersection(g);return f?[f.round(),e]:[e]}};return function(n,r,i){return g.routers.manhattan(n,t.assign({},e,r),i)}}(g.util),g.routers.normal=function(t,e,n){return t},g.routers.oneSide=function(t,e,n){var r,i,o,a=e.side||"bottom",s=e.padding||40,u=n.sourceBBox,l=n.targetBBox,c=u.center(),h=l.center();switch(a){case"bottom":o=1,r="y",i="height";break;case"top":o=-1,r="y",i="height";break;case"left":o=-1,r="x",i="width";break;case"right":o=1,r="x",i="width";break;default:throw new Error("Router: invalid side")}return c[r]+=o*(u[i]/2+s),h[r]+=o*(l[i]/2+s),o*(c[r]-h[r])>0?h[r]=c[r]:c[r]=h[r],[c].concat(t,h)},g.routers.orthogonal=function(t){var e={N:"S",S:"N",E:"W",W:"E"},n={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function r(t,e){return t.x==e.x?t.y>e.y?"N":"S":t.y==e.y?t.x>e.x?"W":"E":null}function i(t,e){return t["W"==e||"E"==e?"width":"height"]}function o(t,e){return l.rect(t).moveAndExpand({x:-e,y:-e,width:2*e,height:2*e})}function a(t){return l.rect(t.x,t.y,0,0)}function s(t,e,n){var r=l.point(t.x,e.y);return n.containsPoint(r)&&(r=l.point(e.x,t.y)),r}function u(t,n,i){var o=l.point(t.x,n.y),a=l.point(n.x,t.y),s=r(t,o),u=r(t,a),c=e[i],h=s==i||s!=c&&(u==c||u!=i)?o:a;return{points:[h],direction:r(h,n)}}function c(t,e,n){var i=s(t,e,n);return{points:[i],direction:r(i,e)}}function h(e,n,o,a){var u,c={},h=[l.point(e.x,n.y),l.point(n.x,e.y)],g=h.filter(function(t){return!o.containsPoint(t)}),f=g.filter(function(t){return r(t,e)!=a});if(f.length>0)u=(u=f.filter(function(t){return r(e,t)==a}).pop())||f[0],c.points=[u],c.direction=r(u,n);else{u=t.difference(h,g)[0];var d=l.point(n).move(u,-i(o,a)/2),p=s(d,e,o);c.points=[p,d],c.direction=r(d,n)}return c}function g(t,e,n,o){var a=c(e,t,o),s=a.points[0];if(n.containsPoint(s)){var h=(a=c(t,e,n)).points[0];if(o.containsPoint(h)){var g=l.point(t).move(h,-i(n,r(t,h))/2),f=l.point(e).move(s,-i(o,r(e,s))/2),d=l.line(g,f).midpoint(),p=c(t,d,n),I=u(d,e,p.direction);a.points=[p.points[0],I.points[0]],a.direction=I.direction}}return a}function f(t,e,i,a,u){var c,h,g,f,d,p,I,v,m,A={},C=o((c=i,h=a,g=Math.min(c.x,h.x),f=Math.min(c.y,h.y),d=Math.max(c.x+c.width,h.x+h.width),p=Math.max(c.y+c.height,h.y+h.height),l.rect(g,f,d-g,p-f)),1),y=C.center().distance(e)>C.center().distance(t),b=y?e:t,w=y?t:e;return u?(I=l.point.fromPolar(C.width+C.height,n[u],b),I=C.pointNearestToPoint(I).move(I,-1)):I=C.pointNearestToPoint(b).move(b,1),v=s(I,w,C),I.round().equals(v.round())?(v=l.point.fromPolar(C.width+C.height,l.toRad(I.theta(b))+Math.PI/2,w),m=s(I,v=C.pointNearestToPoint(v).move(w,1).round(),C),A.points=y?[v,m,I]:[I,m,v]):A.points=y?[v,I]:[I,v],A.direction=r(y?I:v,e),A}return function(e,n,i){var s,d=n.elementPadding||20,p=[],I=o(i.sourceBBox,d),v=o(i.targetBBox,d);(e=t.toArray(e).map(l.point)).unshift(I.center()),e.push(v.center());for(var m=0,A=e.length-1;m<A;m++){var C=null,y=e[m],b=e[m+1],w=!!r(y,b);if(0==m)m+1==A?I.intersect(o(v,1))?C=f(y,b,I,v):w||(C=g(y,b,I,v)):I.containsPoint(b)?C=f(y,b,I,o(a(b),d)):w||(C=c(y,b,I));else if(m+1==A){var N=w&&r(b,y)==s;v.containsPoint(y)||N?C=f(y,b,o(a(y),d),v,s):w||(C=h(y,b,v,s))}else w||(C=u(y,b,s));C?(Array.prototype.push.apply(p,C.points),s=C.direction):s=r(y,b),m+1<A&&p.push(b)}return p}}(g.util),g.connectors.normal=function(t,e,n){var r=["M",t.x,t.y];return g.util.toArray(n).forEach(function(t){r.push(t.x,t.y)}),r.push(e.x,e.y),r.join(" ")},g.connectors.rounded=function(t,e,n,r){var i,o,a,s,u,c,h=(r=r||{}).radius||10,f=["M",t.x,t.y];return g.util.toArray(n).forEach(function(r,g){u=n[g-1]||t,c=n[g+1]||e,a=s||l.point(r).distance(u)/2,s=l.point(r).distance(c)/2,i=l.point(r).move(u,-Math.min(h,a)).round(),o=l.point(r).move(c,-Math.min(h,s)).round(),f.push(i.x,i.y,"S",r.x,r.y,o.x,o.y,"L")}),f.push(e.x,e.y),f.join(" ")},g.connectors.smooth=function(t,e,n){var r;if(n.length)r=l.bezier.curveThroughPoints([t].concat(n).concat([e]));else{var i=(t.x+e.x)/2;r=["M",t.x,t.y,"C",i,t.y,i,e.y,e.x,e.y]}return r.join(" ")},g.connectors.jumpover=function(t,e,n){var r=["arc","gap","cubic"],i=1,o=["smooth"];function a(t,n,r){var i=[].concat(t,r,n);return i.reduce(function(t,n,r){var o=i[r+1];return null!=o&&(t[r]=e.line(n,o)),t},[])}function s(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function u(t,n){return e.line(t,n).squaredLength()}function l(t,r,i){var o=["M",t[0].start.x,t[0].start.y];return n.toArray(t).reduce(function(t,n){var o;if(n.isJump){if("arc"===i){o=n.start.difference(n.end);var a=Number(o.x<0&&o.y<0);t.push("A",r,r,0,0,a,n.end.x,n.end.y)}else if("gap"===i)t=t.concat(["M",n.end.x,n.end.y]);else if("cubic"===i){o=n.start.difference(n.end);var s=n.start.theta(n.end),u=.6*r,l=1.35*r;o.x<0&&o.y<0&&(l*=-1);var c=e.point(n.start.x+u,n.start.y+l).rotate(n.start,s),h=e.point(n.end.x-u,n.end.y+l).rotate(n.end,s);t.push("C",c.x,c.y,h.x,h.y,n.end.x,n.end.y)}}else t.push("L",n.end.x,n.end.y);return t},o).join(" ")}return function(t,c,h,g){var f,d;null==(d=(f=this).paper._jumpOverUpdateList)&&(d=f.paper._jumpOverUpdateList=[],f.paper.on("cell:pointerup",s),f.paper.model.on("reset",function(){d=f.paper._jumpOverUpdateList=[]})),d.indexOf(f)<0&&(d.push(f),f.listenToOnce(f.model,"change:connector remove",function(){d.splice(d.indexOf(f),1)}));var p=g.size||5,I=g.jump&&(""+g.jump).toLowerCase(),v=g.ignoreConnectors||o;-1===r.indexOf(I)&&(I=r[0]);var m=this.paper,A=m.model.getLinks();if(1===A.length)return l(a(t,c,h),p,I);var C=this.model,y=A.indexOf(C),b=m.options.defaultConnector||{},w=A.filter(function(t,e){var r=t.get("connector")||b;return!n.toArray(v).includes(r.name)&&(!(e>y)||"jumpover"!==r.name)}),N=w.map(function(t){return m.findViewByModel(t)}),x=a(t,c,h),M=N.map(function(t){return null==t?[]:t===this?x:a(t.sourcePoint,t.targetPoint,t.route)},this);return l(x.reduce(function(t,r){var o=w.reduce(function(t,e,i){if(e!==C){var o=(a=r,s=M[i],n.toArray(s).reduce(function(t,e){var n=a.intersection(e);return n&&t.push(n),t},[]));t.push.apply(t,o)}var a,s;return t},[]).sort(function(t,e){return u(r.start,t)-u(r.start,e)});return o.length>0?t.push.apply(t,function(t,n,r){return n.reduce(function(o,a,s){if(!0===a.skip)return o;var u=o.pop()||t,l=e.point(a).move(u.start,-r),c=e.point(a).move(u.start,+r),h=n[s+1];if(null!=h){var g=c.distance(h);g<=r&&(c=h.move(u.start,g),h.skip=!0)}else if(l.distance(u.end)<2*r+i)return o.push(u),o;if(c.distance(u.start)<2*r+i)return o.push(u),o;var f=e.line(l,c);return f.isJump=!0,o.push(e.line(u.start,l),f,e.line(c,u.end)),o},[])}(r,o,p)):t.push(r),t},[]),p,I)}}(0,l,g.util),function(t,e,n,r){function i(t,e,r){var i=t.toJSON();return i.angle=e||0,n.util.defaults({},r,i)}function o(t,n,r){return t.map(function(t,e,n){var r=this.pointAt((e+.5)/n.length);return(t.dx||t.dy)&&r.offset(t.dx||0,t.dy||0),i(r.round(),0,t)},e.line(n,r))}function a(t,n,r,o){var a=n.center(),s=n.width/n.height,u=n.topMiddle(),l=e.Ellipse.fromRect(n);return t.map(function(t,e,n){var c=r+o(e,n.length),h=u.clone().rotate(a,-c).scale(s,1,a),g=t.compensateRotation?-l.tangentTheta(h):0;return(t.dx||t.dy)&&h.offset(t.dx||0,t.dy||0),t.dr&&h.move(a,t.dr),i(h.round(),g,t)})}function s(t,n){var i=n.x;r.isString(i)&&(i=parseFloat(i)/100*t.width);var o=n.y;return r.isString(o)&&(o=parseFloat(o)/100*t.height),e.point(i||0,o||0)}n.layout.Port={absolute:function(t,e,n){return t.map(s.bind(null,e))},fn:function(t,e,n){return n.fn(t,e,n)},line:function(t,e,n){return o(t,s(e,n.start||e.origin()),s(e,n.end||e.corner()))},left:function(t,e,n){return o(t,e.origin(),e.bottomLeft())},right:function(t,e,n){return o(t,e.topRight(),e.corner())},top:function(t,e,n){return o(t,e.origin(),e.topRight())},bottom:function(t,e,n){return o(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return a(t,e,r,function(t){return t*i})},ellipse:function(t,e,n){var r=n.startAngle||0,i=n.step||20;return a(t,e,r,function(t,e){return(t+.5-e/2)*i})}}}(0,l,g,g.util),function(t,e,n,r){function i(t,e){return r.defaultsDeep({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function o(t,e,n,o){o=r.defaults({},o,{offset:15});var s,u,l,c,h=e.center().theta(t),g=a(e),f=o.offset,d=0;h<g[1]||h>g[2]?(l=".3em",s=f,u=0,c="start"):h<g[0]?(l="0",s=0,u=-f,n?(d=-90,c="start"):c="middle"):h<g[3]?(l=".3em",s=-f,u=0,c="end"):(l=".6em",s=0,u=f,n?(d=90,c="start"):c="middle");var p=Math.round;return i({x:p(s),y:p(u),angle:d,attrs:{".":{y:l,"text-anchor":c}}})}function a(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner());return[n,e.theta(t.topRight()),i,r]}function s(t,e,n,o){var s,u,l,c,h=e.center().theta(t),g=(o=r.defaults({},o,{offset:15})).offset,f=0,d=a(e);h<d[1]||h>d[2]?(l=".3em",s=-g,u=0,c="end"):h<d[0]?(l=".6em",s=0,u=g,n?(f=90,c="start"):c="middle"):h<d[3]?(l=".3em",s=g,u=0,c="start"):(l="0em",s=0,u=-g,n?(f=-90,c="start"):c="middle");var p=Math.round;return i({x:p(s),y:p(u),angle:f,attrs:{".":{y:l,"text-anchor":c}}})}function u(t,n,o){o=r.defaults({},o,{offset:20});var a,s=e.point(0,0),u=-t.theta(s),l=u,c=t.clone().move(s,o.offset).difference(t).round(),h=".3em";(u+90)%180==0?(a=n?"end":"middle",n||-270!==u||(h="0em")):u>-270&&u<-90?(a="start",l=u-180):a="end";var g=Math.round;return i({x:g(c.x),y:g(c.y),angle:n?l:0,attrs:{".":{y:h,"text-anchor":a}}})}n.layout.PortLabel={manual:function(t,e,n){return i(n,t)},left:function(t,e,n){return i(n,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,n){return i(n,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,n){return i(n,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,n){return i(n,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,n){return o(t,e,!0,n)},outside:function(t,e,n){return o(t,e,!1,n)},insideOriented:function(t,e,n){return s(t,e,!0,n)},inside:function(t,e,n){return s(t,e,!1,n)},radial:function(t,e,n){return u(t.difference(e.center()),!1,n)},radialOriented:function(t,e,n){return u(t.difference(e.center()),!0,n)}}}(0,l,g,g.util),g.highlighters.addClass={className:g.util.addClassNamePrefix("highlighted"),highlight:function(t,e,n){var r=(n||{}).className||this.className;u(e).addClass(r)},unhighlight:function(t,e,n){var r=(n||{}).className||this.className;u(e).removeClass(r)}},g.highlighters.opacity={highlight:function(t,e){u(e).addClass(g.util.addClassNamePrefix("highlight-opacity"))},unhighlight:function(t,e){u(e).removeClass(g.util.addClassNamePrefix("highlight-opacity"))}},g.highlighters.stroke={defaultOptions:{padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},_views:{},getHighlighterId:function(t,e){return t.id+JSON.stringify(e)},removeHighlighter:function(t){this._views[t]&&(this._views[t].remove(),this._views[t]=null)},highlight:function(t,e,n){var r=this.getHighlighterId(e,n);if(!this._views[r]){var i,o=g.util.defaults(n||{},this.defaultOptions),a=u(e);try{var s=a.convertToPathData()}catch(t){i=a.bbox(!0),s=u.rectToPath(g.util.assign({},o,i))}var l=u("path").attr({d:s,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"}).attr(o.attrs),c=a.getTransformToElement(t.el),h=o.padding;if(h){i||(i=a.bbox(!0));var f=i.x+i.width/2,d=i.y+i.height/2;i=u.transformRect(i,c);var p=Math.max(i.width,1),I=Math.max(i.height,1),v=(p+h)/p,m=(I+h)/I,A=u.createSVGMatrix({a:v,b:0,c:0,d:m,e:f-v*f,f:d-m*d});c=c.multiply(A)}l.transform(c);var C=this._views[r]=new g.mvc.View({svgElement:!0,className:"highlight-stroke",el:l.node}),y=this.removeHighlighter.bind(this,r),b=t.model;C.listenTo(b,"remove",y),C.listenTo(b.graph,"reset",y),t.vel.append(l)}},unhighlight:function(t,e,n){this.removeHighlighter(this.getHighlighterId(e,n))}},g.dia.Element.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),g.shapes.erd.Entity.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),g.dia.Element.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),g.shapes.erd.Relationship.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),g.dia.Element.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),g.shapes.erd.Attribute.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),g.shapes.erd.Attribute.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),g.shapes.erd.Attribute.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),g.shapes.erd.Attribute.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),g.dia.Element.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),g.dia.Link.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),g.shapes.basic.Circle.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),g.dia.Element.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),g.dia.Element.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),g.dia.Link.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0}),g.dia.Element.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),g.dia.Link.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}),g.shapes.basic.Generic.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),g.shapes.basic.Generic.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),g.shapes.basic.Generic.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),g.shapes.basic.Generic.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),g.shapes.pn.PlaceView=g.dia.ElementView.extend({},{initialize:function(){g.dia.ElementView.prototype.initialize.apply(this,arguments),this.model.on("change:tokens",function(){this.renderTokens(),this.update()},this)},render:function(){g.dia.ElementView.prototype.render.apply(this,arguments),this.renderTokens(),this.update()},renderTokens:function(){var t=this.$(".tokens").empty();t[0].className.baseVal="tokens";var e=this.model.get("tokens");if(e)switch(e){case 1:t[0].className.baseVal+=" one",t.append(u("<circle/>").node);break;case 2:t[0].className.baseVal+=" two",t.append(u("<circle/>").node,u("<circle/>").node);break;case 3:t[0].className.baseVal+=" three",t.append(u("<circle/>").node,u("<circle/>").node,u("<circle/>").node);break;default:t[0].className.baseVal+=" alot",t.append(u("<text/>").text(e+"").node)}}}),g.shapes.basic.Generic.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),g.dia.Link.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}}),g.shapes.basic.Generic.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){g.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,n){var r=g.util.uniq(this.get("inPorts")),i=g.util.difference(g.util.uniq(this.get("outPorts")),r),o=this.createPortItems("in",r),a=this.createPortItems("out",i);this.prop("ports/items",o.concat(a),g.util.assign({rewrite:!0},n))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return g.util.toArray(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,n){var r=this.get(e);return this.set(e,Array.isArray(r)?r.concat(t):[t],n)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,n){return this.set(e,g.util.without(this.get(e),t),n)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,n){return this.prop("ports/groups/"+t,g.util.isObject(e)?e:{},n)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),g.shapes.devs.Model.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),g.shapes.devs.Model.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),g.dia.Link.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}}),g.shapes.basic.Generic.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),g.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],n=0;e.forEach(function(e){var r=Array.isArray(e.text)?e.text:[e.text],i=20*r.length+20;t[".uml-class-"+e.type+"-text"].text=r.join("\n"),t[".uml-class-"+e.type+"-rect"].height=i,t[".uml-class-"+e.type+"-rect"].transform="translate(0,"+n+")",n+=i})}}),g.shapes.uml.ClassView=g.dia.ElementView.extend({},{initialize:function(){g.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),g.shapes.uml.Class.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),g.shapes.uml.AbstractView=g.shapes.uml.ClassView,g.shapes.uml.Class.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),g.shapes.uml.InterfaceView=g.shapes.uml.ClassView,g.dia.Link.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),g.dia.Link.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),g.dia.Link.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),g.dia.Link.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),g.dia.Link.define("uml.Association"),g.shapes.basic.Generic.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),g.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),g.shapes.basic.Circle.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),g.shapes.basic.Generic.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),g.dia.Link.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}),g.shapes.basic.Generic.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),g.shapes.logic.Gate.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),g.shapes.logic.IO.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),g.shapes.logic.IO.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),g.shapes.logic.Gate.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),g.shapes.logic.Gate.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),g.shapes.logic.Gate11.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),g.shapes.logic.Gate11.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),g.shapes.logic.Gate21.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),g.shapes.logic.Gate21.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),g.shapes.logic.Gate21.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),g.shapes.logic.Gate21.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),g.shapes.logic.Gate21.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),g.shapes.logic.Gate21.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),g.dia.Link.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")}),"object"==typeof exports)var f=require("graphlib"),d=require("dagre");return f=f||"undefined"!=typeof window&&window.graphlib,d=d||"undefined"!=typeof window&&window.dagre,g.layout.DirectedGraph={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,e,n){var r=this.getCell(e.name),i=n.edge(e),o=i.points||[];if((t.setVertices||t.setLinkVertices)&&(g.util.isFunction(t.setVertices)?t.setVertices(r,o):r.set("vertices",o.slice(1,o.length-1))),t.setLabels&&"x"in i&&"y"in i){var a={x:i.x,y:i.y};if(g.util.isFunction(t.setLabels))t.setLabels(r,a,o);else{var s=l.Polyline(o),u=s.closestPointLength(a),c=s.pointAtLength(u),h=u/s.length();r.label(0,{position:{distance:h,offset:l.Point(a).difference(c).toJSON()}})}}},layout:function(t,e){var n;n=t instanceof g.dia.Graph?t:(new g.dia.Graph).resetCells(t,{dry:!0}),t=null,e=g.util.defaults(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});var r=n.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(t){return t.id}}),i={},o=e.marginX||0,a=e.marginY||0;if(e.rankDir&&(i.rankdir=e.rankDir),e.align&&(i.align=e.align),e.nodeSep&&(i.nodesep=e.nodeSep),e.edgeSep&&(i.edgesep=e.edgeSep),e.rankSep&&(i.ranksep=e.rankSep),e.ranker&&(i.ranker=e.ranker),o&&(i.marginx=o),a&&(i.marginy=a),r.setGraph(i),d.layout(r,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),n.fromGraphLib(r,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var s=r.nodes().filter(function(t){return r.children(t).length>0}).map(n.getCell.bind(n)).sort(function(t,e){return e.getAncestors().length-t.getAncestors().length});g.util.invoke(s,"fitEmbeds",{padding:e.clusterPadding})}n.stopBatch("layout");var u=r.graph();return l.Rect(o,a,Math.abs(u.width-2*o),Math.abs(u.height-2*a))},fromGraphLib:function(t,e){var n=(e=e||{}).importNode||g.util.noop,r=e.importEdge||g.util.noop,i=this instanceof g.dia.Graph?this:new g.dia.Graph;return t.nodes().forEach(function(r){n.call(i,r,t,i,e)}),t.edges().forEach(function(n){r.call(i,n,t,i,e)}),i},toGraphLib:function(t,e){e=e||{};for(var n=g.util.pick(e,"directed","compound","multigraph"),r=new f.Graph(n),i=e.setNodeLabel||g.util.noop,o=e.setEdgeLabel||g.util.noop,a=e.setEdgeName||g.util.noop,s=t.get("cells"),u=0,l=s.length;u<l;u++){var c=s.at(u);if(c.isLink()){var h=c.get("source"),d=c.get("target");if(!h.id||!d.id)break;r.setEdge(h.id,d.id,o(c),a(c))}else if(r.setNode(c.id,i(c)),r.isCompound()&&c.has("parent")){var p=c.get("parent");s.has(p)&&r.setParent(c.id,p)}}return r}},g.dia.Graph.prototype.toGraphLib=function(t){return g.layout.DirectedGraph.toGraphLib(this,t)},g.dia.Graph.prototype.fromGraphLib=function(t,e){return g.layout.DirectedGraph.fromGraphLib.call(this,t,e)},g.g=l,g.V=g.Vectorizer=u,g});



$.fn.modelDesigner = function(Data=null) {
  Data=Data!=null?Data:{ DiagramId:guid(),DiagramName:'Diagram 1',Models:null};
  var ListData=Data.Models;
  var t=this;
  joint.layout.DirectedGraph = {
    layout: function (graph, opt) {
      opt = opt || {};
      var dGraph = new dagre.graphlib.Graph();
/*    var dGraph = new dagre.graphlib.Graph({ multigraph: true })*/
      var inputGraph = this._prepareData(graph, dGraph);
      var runner = dGraph.setGraph({});
      if (opt.debugLevel) {
        runner.debugLevel(opt.debugLevel);
      }
      if (opt.rankDir) {
        inputGraph.graph().rankdir = opt.rankDir;
      }
      if (opt.rankSep) {
        inputGraph.graph().rankSep = opt.rankSep;
      }
      if (opt.edgeSep) {
        inputGraph.graph().edgeSep = opt.edgeSep;
      }
      if (opt.nodeSep) {
        inputGraph.graph().nodeSep = opt.nodeSep;
      }
      if (opt.rankSep) {
        inputGraph.graph().rankSep = opt.rankSep;
      }
      var layoutGraph = dagre.layout(inputGraph);
      inputGraph.nodes().forEach(function (u) {
        var value = inputGraph.node(u); 
        if (!value.dummy) {
          var cell = graph.getCell(u);
          opt.setPosition
          ? opt.setPosition(cell, value) 
          : graph.get('cells').get(u).set('position', {
            x: value.x - value.width / 2,
            y: value.y - value.height / 2
          });
        }
      });
      if (opt.setLinkVertices) {
        inputGraph.edges().forEach(function (e) {
          var e_label = inputGraph.edge(e.v, e.w);
          var link = graph.getCell(e_label);
          if (link) {
            opt.setVertices
            ? opt.setVertices(link, value.points) 
            : link.set('vertices', value.points);
          }
        });
      }
      return {
        width: runner.graph().width,
        height: runner.graph().height
      };
    },
    _prepareData: function (graph, dagre_graph) {
      var dagreGraph = dagre_graph;
      // For each element.
      _.each(graph.getElements(), function (cell) {
        if (dagreGraph.hasNode(cell.id)) return;
        dagreGraph.setNode(cell.id.toString(), {
          width: cell.get('size').width,
          height: cell.get('size').height,
          rank: cell.get('rank')
        });
      });
      // For each link.
      _.each(graph.getLinks(), function (cell) {
        if (dagreGraph.hasEdge(cell.id)) return;
        var sourceId = cell.get('source').id.toString();
        var targetId = cell.get('target').id.toString();
        dagreGraph.setEdge(sourceId, targetId, {
          label: cell.id,
          minLen: cell.get('minLen') || 1
        });
      });
      return dagreGraph;
    }
  };
  // Helpers.
  // --------

  function buildGraph(data) {
    var elements = [];
    var links = [];
      
    _.each(data.nodes, function(node) {
      elements.push(makeElement(node));
    })
    
    _.each(data.links, function(edge) {
      links.push(makeLink(edge)); 
    })
    return elements.concat(links);
  }

  function makeLink(edge) {

    var lnk = new joint.dia.Link({
        source: { id: edge.source.toString() },
        target: { id: edge.target.toString() },
        attrs: {
          '.marker-target': { d: 'M 4 0 L 0 2 L 4 4 z' }
        },
        labels: [{
          position: 0.5,
          // attrs: {
            // text: {
              // text: "on"
            // }
          // }
        }],
        connector: {name: 'smooth'}
    });
      
    //}
    
    return lnk;
  }

  function makeElement(node) {

      var textsLengths=[];
      textsLengths.push(node.name.length);
      node.properties.forEach(function(d){textsLengths.push(d.length)});
      var maxLineLength = _.max(textsLengths);

      var letterSize = 12;
      var width = letterSize * maxLineLength*0.6;
      var height = textsLengths.length*letterSize+(letterSize*3);

      return new joint.shapes.uml.Class({
          id: node.id.toString(),
          size: { width: width, height: height },
      attrs: {
              '.uml-class-methods-rect': {
                  display:"none"
              },
              text: { 
            'font-size': letterSize, 
            'font-family': 'monospace'
          }
          },
          name: node.name,
          attributes: node.properties,
      });
  }

  // Main.
  // -----
  $(t).css('font-family','monospace');
  $(t).css('position','relative');
  $(t).html('<style>[mdg-ctx],[mdg-etx]{display: none;position: absolute;top: 0;left: 0;z-index: 1;background-color: white;border: 1px solid #ededed;box-shadow: 3px 3px 5px #00000024;} [mdg-ctx-menu] {padding: 5px 10px;border-bottom: 1px solid #f3f3f3;cursor: pointer;} [mdg-ctx-menu]:hover {background-color: #f3f3f3;}[mdg-etx-header] {padding: 5px 10px;background-color: #e9e9e9;min-width: 300px;outline: none;}[mdg-etx-body] {padding: 5px 10px;min-height: 50px;}[mdg-etx-footer] {display: flex;}[mdg-etx-button] {flex: auto;padding: 5px;cursor: pointer;text-align: center;font-weight: bold;}[mdg-etx-button="p"] {background-color: #3f51b529;color: #3f51b5;}[mdg-etx-button="d"] {background-color: #e91e631a;color: #e91e63;}[mdg-etx-button="c"] {background-color: #ff98001c;color: #ff9800;}[mdg-etx-button="s"] {background-color: #0096881c;color: #009688;}[mdg-etx-body]>table {width: 100%;font-family: monospace;color: #464646;border-collapse: collapse;}[mdg-etx-body]>table th {padding: 5px;background-color: #f3f3f3;border: 1px solid #e9e9e9;}[mdg-etx-body]>table td {padding: 0;text-align: center;border: 1px solid #e9e9e9;}[mdg-etx-body]>table td input[type="text"],[mdg-etx-body]>table td select {border: none;padding: 5px;font-family: inherit;font-size: 13px;outline: none;} g.scalable{filter:drop-shadow(5px 5px 3px rgba(0, 0, 0, 0.2));}.uml-class-name-rect {fill: #e9e9e9;stroke: #b9b9b9;stroke-width: 0.5px;}.uml-class-attrs-rect {fill: #ffffff;    stroke: #b9b9b9;    stroke-width: 0.5px;}.uml-class-methods-rect {display:none;}[mdg-body]{position: relative;width: 100%;height:100%;max-height: 90vh;overflow: auto;} [mdg-header]{display:flex;flex-wrap:wrap;align-items:center;padding:10px;z-index:99999999999999;background-color:#f3f3f3;border-bottom:1px solid #e3e3e3}[mdg-label]{font-size: 16px;}[mdg-title] {flex: auto;padding: 0 10px;font-size: 16px;;outline: none;}</style>');
  $(t).append('<div mdg-header><div mdg-label>Diagram Title: </div><div contenteditable="true" mdg-title=""></div></div><div mdg-body><div></div></div>');
  $(t).append('<div mdg-etx><div mdg-etx-header contenteditable="true"></div><div mdg-etx-body=""><table><thead><tr><th>Name</th><th>Type</th><th>PK</th><th>Unique</th><th>Required</th></tr></thead><tbody></tbody></table></div><div mdg-etx-footer><div mdg-etx-button="p">Add Property</div><div mdg-etx-button="d">Delete</div><div mdg-etx-button="c">Cancel</div><div mdg-etx-button="s">Save</div></div></div>');
  $(t).append('<div mdg-ctx><div mdg-ctx-menu="n">New Model</div><div mdg-ctx-menu="r">Refresh</div><div mdg-ctx-menu="c">Clear</div></div>');
  var h=$(t).find('[mdg-header]');
  var ht=$(t).find('[mdg-header]>[mdg-title]');
  var etx=$(t).find('[mdg-etx]');
  var ctx=$(t).find('[mdg-ctx]');
  var b=$(t).find('[mdg-body]')[0];
  var bc=$(t).find('[mdg-body]>div')[0];
  new PerfectScrollbar(b);
  function guid() {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
          var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
          return v.toString(16);
      });
  }
  t.dataType=["string","int","datetime","bool"];
  function getDT(v=null){
    var r="<select prtype>";
    t.dataType.forEach(function(d){
      r+='<option '+(v==d?'selected':'')+' value="'+d+'">'+d+'</option>';
    });
    r+="</select>";
    return r;
  }
  function openEtx(id,x,y){
    etx.css('top',y+'px');
    etx.css('left',x+'px');
    var h=etx.find('[mdg-etx-header]').html('');
    var b=etx.find('[mdg-etx-body]>table>tbody').html('');
    etx.show();
    var nid=guid();
    var model=ListData==null?null:ListData.find(x=>x.ModelId==id);
    model=model!=null?model:{ModelId:nid,ModelName: "NewModel",Properties:[{PropertyId:guid(),ModelId:nid,Name:"",Type:"string",PK:true,Unique:false,Required:true}]};
    etx.attr('mdg-etx',model.ModelId);
    h.html(model.ModelName);
    model.Properties.forEach(function(d){
      b.append(addExtProp(d));
    });
  }
  function addExtProp(p){
    return '<tr><td prid="'+p.PropertyId+'"><input type="text" prname value="'+p.Name+'"/></td><td>'+getDT(p.Type)+'</td><td><input prpk type="checkbox" value="true" '+(p.PK?'checked':'')+'/></td><td><input pruk type="checkbox" value="true" '+(p.Unique?'checked':'')+'/></td><td><input prrq type="checkbox" value="true" '+(p.Required?'checked':'')+'/></td></tr>';
  }
  var graph = new joint.dia.Graph;

  var paper= new joint.dia.Paper({
      el: bc,
      width: 2000,
      height: 2000,
      gridSize: 1,
      model: graph
    });
	V(paper.viewport).translate(20, 20);


  t.OnTitleChange=null;
  t.OnModelSave=null;
  t.OnModelDelete=null;
  t.refresh=function(){
    var hid=Data==null?guid():Data.DiagramId;
    ht.attr('mdg-title',hid);
    ht.html(Data==null?'':Data.DiagramName);
    
    var data={},nodes=[],links=[]; 
    var fProperties=[];
    if(ListData!=null){
      ListData.forEach(function(d){
        var properties=[];
        d.Properties.forEach(function(p){
          properties.push(p.Name+' : '+p.Type+(p.PK?'-P':'')+(p.Unique?'-U':'')+(p.Required?'-R':''));
          fProperties.push(p);
        });
        nodes.push({id:d.ModelId,name:d.ModelName,properties});
      });
      data.nodes=nodes;
      ListData.forEach(function(d){
        var pk=d.Properties.find(x=>x.PK);
        fProperties.filter(x=>x.Name==pk.Name && !x.PK).forEach(function(p){
          links.push({source: d.ModelId, target: p.ModelId});
        });
      });
      data.links=links;
    }
    var cells = buildGraph(data);
      graph.resetCells(cells);
      joint.layout.DirectedGraph.layout(graph, {
        setLinkVertices: true,
        rankDir: "lr",
        nodeSep: 50,
        rankSep: 50
      });
  };

  t.refresh();

  t.save=function(model){
    ListData=ListData==null?[]:ListData.filter(x=>x.ModelId!=model.ModelId);
    ListData.push(model);
    this.refresh();
    if(t.OnModelSave!=null) t.OnModelSave(model,Data);
  };

  t.remove=function(id){
    if(id==null)return;
    ListData=ListData==null?[]:ListData.filter(x=>x.ModelId!=id);
    this.refresh();
    if(t.OnModelDelete!=null) t.OnModelDelete(id);
  };
  
  t.data=function(){ if(Data==null) return null; Data.Models=ListData; return Data;};

  $(t).on("keypress", '[mdg-title]', function(e){
    Data.DiagramId=$(this).attr('mdg-title');
    Data.DiagramName=$(this).text().trim();
    if(e.which==13){
      if(t.OnTitleChange!=null){t.OnTitleChange(Data);}
      return false;
    }
  });
  $(t).on("keypress", '[mdg-etx-header]', function(e){
    if(e.which==13){
      return false;
    }
  });
  $(t).on("click", '[mdg-body]', function(e){
    ctx.hide();
    return false;
  });
  $(t).on("contextmenu", '[mdg-body]', function(e){
    if(e.target.tagName!="svg") return false;
    ctx.css('top',e.pageY+'px');
    ctx.css('left',e.pageX+'px');
    ctx.show(200);
    return false;
  });
  ctx.on("click","[mdg-ctx-menu]",function(e){
    var a=$(this).attr('mdg-ctx-menu');
    if(a=="n"){ openEtx(null,e.pageX,e.pageY);}
    else if(a=="r"){t.refresh();}
    else if(a=="c"){ListData=null;t.refresh();}
    ctx.hide();
  });
  etx.on("click","[mdg-etx-button]",function(e){
    var a=$(this).attr('mdg-etx-button');
    var nid=etx.attr('mdg-etx');
    if(a=="p"){ etx.find('[mdg-etx-body]>table>tbody').append(addExtProp({PropertyId:guid(),ModelId:nid,Name:"",Type:"",PK:false,Unique:false,Required:false}));}
    else if(a=="d"){t.remove(nid);etx.hide();}
    else if(a=="c"){etx.hide();}
    else if(a=="s"){
      var mn=$('[mdg-etx-header]').text().trim();
      var vmn=ListData==null?null:ListData.find(x=>x.ModelName==mn && x.ModelId!=nid);
      if(vmn!=null) { alert(mn+" is already exist in diagram!");return;}
      var model={ModelId:nid,ModelName: mn,Properties:[]};
      etx.find('[mdg-etx-body]>table>tbody>tr').each(function(i,d){
        if($('[prname]',d).val()!="")
        model.Properties.push({PropertyId:$('[prid]',d).attr('prid'),ModelId:nid,Name:$('[prname]',d).val(),Type:$('[prtype]',d).val(),PK:$('[prpk]',d).prop('checked'),Unique:$('[pruk]',d).prop('checked'),Required:$('[prrq]',d).prop('checked')});
      });
      t.save(model);
      etx.hide();
      }
  });
  paper.on('cell:pointerclick', 
      function(cellView, evt, x, y) { 
          openEtx(cellView.model.id,x,y); 
      }
  );

  return t;
};